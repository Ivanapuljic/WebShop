define("Models/Component",[],function(){return function(){this.componentConfig=null,this.type=null,this.elementId=null,this.element=null,this.useComponentTemplate=!1,this.data=null,this.state=void 0,this.setComponentConfig=function(t){this.componentConfig=void 0!==t?t:null},this.setType=function(t){this.type=void 0!==t?t:null},this.setElementId=function(t){this.elementId=void 0!==t?t:this.type,this.element=document.getElementById(this.elementId)},this.setUseComponentTemplate=function(t){t=void 0===t?!0:t,this.useComponentTemplate="boolean"==typeof t?t:!0},this.setData=function(t){this.data=void 0!==t?t:null},this.setState=function(t){this.state=void 0!==t?t:this.state},this.getComponentPath=function(){return null!==this.type?"Components/"+this.type+"/"+this.type:null},this.getElement=function(){return this.element},this.getDictionary=function(){if(!this.element||!this.element.hasAttribute("dictionary"))return null;try{return JSON.parse(this.element.getAttribute("dictionary"))}catch(t){return null}},this.getComponentConfig=function(){return!this.useComponentTemplate&&this.element&&(this.componentConfig.template={element:this.element}),this.componentConfig}}}),define("ProductUtils/ComponentLoader",["ko","Models/Component"],function(t,e){return function(){this.register=function(i,n,s){var r=new e;return r.setType(i.type),r.setElementId(i.elementId),r.setData(n),r.setState(s),r.setUseComponentTemplate(i.useComponentTemplate),require([r.getComponentPath()],function(e){r.setComponentConfig(e),t.components.register(i.name,r.getComponentConfig()),(null!==r.getElement()||r.getElement()!=={})&&t.applyBindingsToNode(r.getElement(),{component:{name:i.name,params:{dictionary:r.getDictionary(),data:r.data,state:r.state}}})}),r},this.unregister=function(e){e&&0!==e.length&&t.components.isRegistered(e)&&t.components.unregister(e)}}}),define("videoPlayerView",[],function(){return'<div class="asos-media-players">\r\n    <div class="amp-video-player amp-relative">\r\n        <video class="amp-page amp-video-element" data-bind="foreach: sources" controls="controls">\r\n            <source data-bind="attr: { type: type, src: src }" />\r\n        </video>\r\n        <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                    <p data-bind="html: messages.errorMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="amp-page amp-page-message amp-unsupported-page" data-bind="visible: isUnsupportedPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.unsupportedHeaderText"></h2>\r\n                    <p data-bind="html: messages.unsupportedMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.closeButtonText, click: closeButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("utils/scene7.config",[],function(){"use strict";return function(t,e){this.jsonpCallback="s7jsonResponse",this.jsonpErrorCallback="s7jsonError",this.scene7imageServer=t,this.scene7videoServer=e,this.spinsetManifestFileUrlPattern=this.scene7imageServer+"/products/test-desc/[productID]-spinset",this.imageUrlPattern=this.scene7imageServer+"/products/[assetID]",this.maxImageSize={width:4e3,height:4e3},this.imageMinPartitionFactors={horizontal:3,vertical:4}}}),define("utils/scene7.DataProvider",["$"],function(t){"use strict";var e=function(t){this.scene7config=t,this.manifestCache={}};return e.prototype.ABSOLUTE_URL_REGEX=/^https?:\/\/|^\/\//i,e.requests=[],e.prototype.getJson=function(i,n,s){Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpErrorCallback)||(window[this.scene7config.jsonpErrorCallback]=function(t,i){var n=e.requests[i];"function"==typeof n.onError&&n.onError()}),Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpCallback)||(window[this.scene7config.jsonpCallback]=function(t,i){var n=e.requests[i];"function"==typeof n.onSuccess&&n.onSuccess(t)}),e.requests.push({onSuccess:n,onError:s}),t.ajax({url:i.replace("[requestID]",e.requests.length-1),jsonp:"true",dataType:"jsonp",success:function(t){n(t)},error:s})},e.prototype.getManifestData=function(e){this.ABSOLUTE_URL_REGEX.test(e)||(e="//"+e);var i=new t.Deferred;if(!this.manifestCache[e]){var n=e+(-1===e.indexOf("?")?"?":"&")+"req=set,json&id=[requestID]";return this.getJson(n,function(n){this.manifestCache[e]=n,i.resolve(t.extend(!0,{},n))}.bind(this),function(){i.reject()}),i.promise()}return i.resolve(t.extend(!0,{},this.manifestCache[e])),i.promise()},e}),define("videoPlayer/DataMapper",[],function(){"use strict";var t=function(t){this.scene7config=t};return t.prototype.VIDEO_FILE_URL_PATTERN="/products/[assetID]",t.prototype.VIDEO_TYPE_FORMAT={m3u8:"application/x-mpegurl",mp4:"video/mp4"},t.prototype.map=function(t){return t.set.item.map(this.getAssetFromServerItem.bind(this))},t.prototype.getAssetFromServerItem=function(t){return{bitrate:parseInt(t.v.bitrate,10),width:parseInt(t.v.dx,10),height:parseInt(t.v.dy,10),src:this.scene7config.scene7videoServer+this.VIDEO_FILE_URL_PATTERN.replace("[assetID]",t.v.path),format:t.v.suffix,type:this.VIDEO_TYPE_FORMAT[t.v.suffix],fps:t.userdata&&t.userdata[0]&&t.userdata[0].Video_Frame_Rate?parseFloat(t.userdata[0].Video_Frame_Rate):null}},t}),define("utils/deviceHelper",[],function(){"use strict";var t=function(){return this};return t.prototype.getScreenProperties=function(t){return{width:t.screen.width,height:t.screen.height}},t.prototype.isPhysicalSizeGreaterThanLogicalSize=function(t){return t&&void 0!==t.systemXDPI&&void 0!==t.logicalXDPI&&t.systemXDPI>t.logicalXDPI},t.prototype.getDevicePixelRatio=function(t){var e=1;return this.isPhysicalSizeGreaterThanLogicalSize(t.screen)?e=t.screen.systemXDPI/t.screen.logicalXDPI:void 0!==t.devicePixelRatio&&(e=t.devicePixelRatio),e},t.prototype.getWidthInPhysicalPixels=function(t){return this.getScreenProperties(t).width*this.getDevicePixelRatio(t)},t.prototype.getHeightInPhysicalPixels=function(t){return this.getScreenProperties(t).height*this.getDevicePixelRatio(t)},new t}),define("videoPlayer/AssetsProvider",["$","utils/deviceHelper"],function(t,e){"use strict";var i=function(t,e,i){this.scene7config=t,this.dataProvider=e,this.dataMapper=i};return i.prototype.MANIFEST_PATH_PATTERN="/products/test-desc/[productID]-catwalk-AVS",i.prototype.DEFAULT_FPS=50,i.prototype.DEFAULT_BITRATES={480:800,720:1200,1080:2500},i.prototype.getAssetsByFormat=function(t,e){return t.filter(function(t){return t.format===e})},i.prototype.isBetterWidthDifference=function(t,e){return 0===t||t>0&&0>e||!(0>t&&e>0)&&Math.abs(t)<=Math.abs(e)},i.prototype.getBestAssetsByWidth=function(t){var i=e.getWidthInPhysicalPixels(window),n=t[0].width,s=t[0].width-i,r=s;return t.forEach(function(t){r=t.width-i,this.isBetterWidthDifference(r,s)&&(n=t.width,s=r)}.bind(this)),t.filter(function(t){return t.width===n})},i.prototype.getPreferredBitrateForDevice=function(t){t=t||this.DEFAULT_BITRATES;var i=Object.keys(t).map(function(t){return parseInt(t,10)}),n=e.getWidthInPhysicalPixels(window),s=i[0],r=i[0]-n,o=r;return i.forEach(function(t){o=t-n,Math.abs(o)<=Math.abs(r)&&(s=t,r=o)}),1e3*t[s]},i.prototype.getBestAssetsByBitrate=function(t,e){var i=this.getPreferredBitrateForDevice(e),n=t[0].bitrate,s=t[0].bitrate-i,r=s;return t.forEach(function(t){r=t.bitrate-i,Math.abs(r)<=Math.abs(s)&&(n=t.bitrate,s=r)}.bind(this)),t.filter(function(t){return t.bitrate===n})},i.prototype.getBestAssetsByFPS=function(t,e){var i=t[0].fps,n=t[0].fps-e,s=n;return t.forEach(function(t){s=t.fps-e,Math.abs(s)<=Math.abs(n)&&(i=t.fps,n=s)}.bind(this)),t.filter(function(t){return t.fps===i})},i.prototype.getBestAsset=function(t,e,i){if(t&&t.length){i=i||this.DEFAULT_FPS;var n=this.getBestAssetsByWidth(t);if(n.length<=1)return n[0];var s=this.getBestAssetsByBitrate(n,e);if(s.length<=1)return s[0];var r=this.getBestAssetsByFPS(s,i);return r[0]}},i.prototype.getBestAssets=function(t,e,i){var n=this.getBestAssetsFromManifest(e,i);return-1!==i.formats.indexOf("m3u8")&&this.addM3U8Asset(t,n),n},i.prototype.getBestAssetsFromManifest=function(t,e){var i=[];return e.formats.forEach(function(n){var s=this.getBestAsset(this.getAssetsByFormat(t,n),e.preferredBitrates,e.preferredFPS);s&&i.push(s)}.bind(this)),i},i.prototype.addM3U8Asset=function(t,e){e.push({src:t+".m3u8",format:"m3u8",type:this.dataMapper.VIDEO_TYPE_FORMAT.m3u8})},i.prototype.getAssets=function(t,e,i,n){return isNaN(parseInt(t,10))||(t=this.scene7config.scene7videoServer+this.MANIFEST_PATH_PATTERN.replace("[productID]",t)),this.dataProvider.getManifestData(t).then(function(n){var s=this.dataMapper.map(n),r=this.getBestAssets(t,s,e);return r.sort(function(t,i){return e.formats.indexOf(t.format)-e.formats.indexOf(i.format)}),"function"==typeof i&&i(r),r}.bind(this)).fail(function(){"function"==typeof n&&n()})},i}),define("videoPlayer/ViewModel",["ko"],function(t){function e(e,i){this.events=e,this.sources=t.observableArray(),this.messages=i,this.isErrorPageVisible=t.observable(!1),this.isUnsupportedPageVisible=t.observable(!1),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.closeButtonClicked=function(){this.events.trigger("closeButtonClicked")}.bind(this)}return e}),define("utils/fullScreenHelper",["$"],function(t){"use strict";var e=function(t,e){this.events=t,this.fullscreenLauncherName=this.getFullscreenLauncherName(e),this.fullscreenElementName=this.getFullscreenElementName(e),this.fullscreenCancelName=this.getFullscreenCancelName(e),this.elementStyle={position:null,top:null,left:null,width:null,height:null,backgroundColor:null,zIndex:null},this.setEventListeners(e)};return e.prototype.getFullscreenLauncherName=function(t){return t.body.requestFullscreen?"requestFullscreen":t.body.mozRequestFullScreen?"mozRequestFullScreen":t.body.webkitRequestFullscreen?"webkitRequestFullscreen":t.body.msRequestFullscreen?"msRequestFullscreen":null},e.prototype.getFullscreenCancelName=function(t){return t.exitFullscreen?"exitFullscreen":t.mozCancelFullScreen?"mozCancelFullScreen":t.webkitExitFullscreen?"webkitExitFullscreen":null},e.prototype.getFullscreenElementName=function(t){return"fullscreenElement"in t?"fullscreenElement":"webkitFullscreenElement"in t?"webkitFullscreenElement":"msFullscreenElement"in t?"msFullscreenElement":"mozFullScreenElement"in t?"mozFullScreenElement":null},e.prototype.getNativeFullScreenElement=function(t){return this.fullscreenElementName?t[this.fullscreenElementName]:void 0},e.prototype.getFullScreenElement=function(t){return this.fullscreenElement?this.fullscreenElement:this.getNativeFullScreenElement(t)},e.prototype.launchIntoFullscreen=function(t,e){if(!this.getFullScreenElement(t)){if(this.fullscreenLauncherName)return void e[this.fullscreenLauncherName]();this.fullscreenElement=e,this.onFullScreenChange(t)}},e.prototype.exitFullScreen=function(t,e){if(!e||!this.getNativeFullScreenElement(t)||this.getNativeFullScreenElement(t)===e){if(this.fullscreenCancelName)return void(this.getNativeFullScreenElement(t)&&t[this.fullscreenCancelName]());if(this.fullscreenElement)try{var i=this.fullscreenElement.parentNode,n=this.fullscreenElement.nextSibling;i.removeChild(this.fullscreenElement),i.insertBefore(this.fullscreenElement,n)}catch(s){}finally{this.onFullScreenChange(t)}}},e.prototype.onFullScreenChange=function(t){return this.getFullScreenElement(t)?void this.events.trigger("fullScreenEntered"):void this.events.trigger("fullScreenExited")},e.prototype.setEventListeners=function(e){t(e).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",this.onFullScreenChange.bind(this,e))},new e(t({}),document)}),define("videoPlayer/Controller",["$","utils/fullScreenHelper"],function(t,e){"use strict";var i=function(e,i,n,s,r){this.loadedAssets=null,this.loadedSources=void 0,this.progressEvents={0:!1,25:!1,50:!1,75:!1,100:!1},this.assetsProvider=e,this.events=s,this.viewModel=n,this.videoElement=r,this.params={},this.isError=!1,t.extend(!0,this.params,i),this.setEventListeners()};return i.prototype.setEventListeners=function(){var i=t(this.videoElement);i.on("timeupdate",function(){this.onVideoTimeUpdated(),this.videoElement.ended&&this.onVideoPlaybackEnded()}.bind(this)),i.on("webkitendfullscreen",function(){this.onFullScreenExited()}.bind(this)),i.on("error",function(t){var e=t.target;if(e===this.videoElement)this.onVideoError();else if("SOURCE"===e.tagName){var i=Array.prototype.indexOf.call(this.videoElement.querySelectorAll("source"),e);this.onVideoSourceError(i)}}.bind(this)),i.on("canplay",function(){this.isError=!1}.bind(this)),this.viewModel.events.on("videoSourceError",function(t){this.onVideoSourceError(t.detail.sourceIndex)}.bind(this)),this.viewModel.events.on("refreshButtonClicked",function(){this.onRefreshButtonClicked()}.bind(this)),this.viewModel.events.on("closeButtonClicked",function(){this.onCloseButtonClicked()}.bind(this)),e.events.on("fullScreenExited",function(){this.onFullScreenExited()}.bind(this)),e.events.on("fullScreenEntered fullScreenExited",function(){this.onFullScreenChanged()}.bind(this))},i.prototype.onVideoPlaybackEnded=function(){--this.remainingLoopCount>0?(this.videoElement.currentTime=0,this.resetProgressEvents(),this.videoElement.play(),this.events.trigger("loopEnded")):(this.stop(),this.events.trigger("allLoopsEnded"))},i.prototype.onVideoTimeUpdated=function(){var t=100*this.videoElement.currentTime/this.videoElement.duration;for(var i in this.progressEvents){var n=parseInt(i,10);!this.progressEvents[i]&&t>=n&&(this.progressEvents[i]=!0,this.events.trigger("progress",{detail:{src:this.videoElement.currentSrc,value:n,isFullScreen:e.getFullScreenElement(document)===this.videoElement}}))}},i.prototype.onVideoError=function(){this.isError=!0,this.viewModel.isErrorPageVisible(!0),this.events.trigger("playbackError")},i.prototype.onVideoSourceError=function(t){t===this.viewModel.sources().length-1&&this.onVideoError()},i.prototype.onRefreshButtonClicked=function(){this.videoElement.load(),this.start()},i.prototype.onCloseButtonClicked=function(){this.events.trigger("playerExitRequested")},i.prototype.onFullScreenExited=function(){this.params.closeOnFullScreenExited&&this.events.trigger("playerExitRequested")},i.prototype.onFullScreenChanged=function(){if(!this.params.closeOnFullScreenExited&&4===this.videoElement.readyState){var t=function(){this.videoElement.currentTime<1?(this.videoElement.currentTime+=1,this.videoElement.currentTime-=1):(this.videoElement.currentTime-=1,this.videoElement.currentTime+=1)}.bind(this);this.videoElement.paused?(this.videoElement.play(),t(),this.videoElement.pause()):(t(),this.videoElement.pause(),this.videoElement.play())}},i.prototype.hideInfoPages=function(){this.viewModel.isErrorPageVisible(!1)},i.prototype.start=function(t){this.hideInfoPages(),this.resetProgressEvents(),this.play(this.params.initialLoopCount||1,this.params.startInFullScreen,t)},i.prototype.play=function(t,i,n){n&&this.setAssets(n),this.videoElement&&this.videoElement.play&&this.loadedAssets&&!this.viewModel.isUnsupportedPageVisible()&&((this.isError||JSON.stringify(this.loadedAssets)!==JSON.stringify(this.viewModel.sources()))&&(this.viewModel.sources(this.loadedAssets),this.videoElement.load()),this.remainingLoopCount=t,this.videoElement.readyState>0&&(this.videoElement.currentTime=0),i&&e.launchIntoFullscreen(document,this.videoElement,!0),this.videoElement.play())},i.prototype.stop=function(){this.videoElement&&this.videoElement.pause&&(e.exitFullScreen(document,this.videoElement,!0),this.videoElement.pause(),this.videoElement.readyState>0&&(this.videoElement.currentTime=0))},i.prototype.resetProgressEvents=function(){for(var t in this.progressEvents)this.progressEvents[t]=!1},i.prototype.hasSupportedAssets=function(t){var e=document.createElement("video");if(!t||!e.canPlayType)return!1;var i=t.filter(function(t){return""!==e.canPlayType(t.type)});return i.length>0},i.prototype.setAssets=function(t){this.loadedAssets=t,this.viewModel.isUnsupportedPageVisible(!this.hasSupportedAssets(this.loadedAssets))},i.prototype.loadAssets=function(t,e,i,n){this.loadedAssets=null,this.assetsProvider.getAssets(t,e,function(t){t&&t.length>0?(this.setAssets(t),"function"==typeof i&&i()):"function"==typeof n&&n()}.bind(this),function(){"function"==typeof n&&n()})},i}),define("videoPlayer/component",["ko","$","videoPlayerView","utils/scene7.config","utils/scene7.DataProvider","videoPlayer/DataMapper","videoPlayer/AssetsProvider","videoPlayer/ViewModel","videoPlayer/Controller"],function(t,e,i,n,s,r,o,a,l){"use strict";return{viewModel:{createViewModel:function(t,i){var c=e({}),d=e({}),u=i.element.querySelector(".asos-media-players .amp-video-player .amp-video-element");t.messages&&t.messages.unsupportedHeaderText&&(t.messages.unsupportedHeaderText=t.messages.unsupportedHeaderText.replace("[BrowserName]","Your browser"));var h=new a(c,t.messages),p=new n(t.scene7.imageServer,t.scene7.videoServer),m=new s(p),f=new r(p),v=new o(p,m,f),g=new l(v,t.player,h,d,u),b={start:g.start.bind(g),stop:g.stop.bind(g),loadAssets:g.loadAssets.bind(g),events:g.events};return t.api(b),h}},template:i,synchronous:!0}}),define("spinViewerView",[],function(){return'<div class="asos-media-players amp-relative">\r\n    <div class="amp-spin-viewer amp-relative" data-bind=\'css: { "pannable": isPannable() }\'>\r\n        <div class="amp-spinner amp-relative">\r\n            <div class="amp-page amp-spin">\r\n                <div class="amp-page amp-hint" data-bind="fadeVisible: isHintVisible">\r\n                    <div class="amp-hint-container">\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <div class="amp-hint-gesture-img sprite drag"></div>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <span data-bind="text: messages.hintDragText"></span>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="amp-page amp-overlay"></div>\r\n                <div class="amp-page amp-images"></div>\r\n            </div>\r\n            <div class="amp-page amp-loading" data-bind="visible: isLoadingPageVisible">\r\n                <div class="amp-loading-img"></div>\r\n                <span data-bind="text: loadingPercentage() + \'%\'"></span>\r\n            </div>\r\n            <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n                <div class="amp-message-container">\r\n                    <div class="amp-message-box">\r\n                        <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                        <p data-bind="html: messages.spinsetErrorMessageText"></p>\r\n                        <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="amp-controls">\r\n            <div class="amp-button amp-wrapper" data-bind="visible: isCloseButtonVisible, click: closeButtonClicked">\r\n                <div class="sprite close"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>                '}),define("utils/sizeHelper",[],function(){"use strict";function t(){}return t.prototype.getProportionalSize=function(t,e){var i={width:t.width,height:t.height},n=e.width/e.height,s=t.width/t.height;return s>n?i.width=i.height*n:n>s&&(i.height=i.width/n),i.width=Math.round(i.width),i.height=Math.round(i.height),i},t.prototype.resizeCanvas=function(t,e){var i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(t,0,0,e.width,e.height),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(i,0,0)},new t}),define("utils/imageProvider",["$"],function(t){"use strict";var e=function(){};return e.prototype.setImage=function(e,i,n,s,r,o){if(r&&t.support.cors)return i.onload=n,t.ajax(e,{success:function(t){i.src=e},error:s,cache:!o});if(o)e+="&"+(new Date).getTime();else if(i.complete&&i.src===e)return"function"==typeof n&&n(),null;return i.onload=n,i.onerror=s,i.src=e,null},new e}),define("utils/scene7.ImageLoader",["$","utils/sizeHelper","utils/imageProvider"],function(t,e,i){"use strict";var n=function(t,e){this.urlQueryStringPattern="wid=[width]&hei=[height]&size=[width],[height]&rect=[startH],[startW],[lengthH],[lengthW]&qlt=[qlt]",this.scene7Config=t,this.canUseCanvas=document.createElement("canvas").getContext,this.useCors=e,this.loadRequests=[]};return n.prototype.getPartitionFactors=function(t,e){return{horizontal:Math.max(Math.ceil(t.width/this.scene7Config.maxImageSize.width),e?this.scene7Config.imageMinPartitionFactors.horizontal:1),vertical:Math.max(Math.ceil(t.height/this.scene7Config.maxImageSize.height),e?this.scene7Config.imageMinPartitionFactors.vertical:1)}},n.prototype.getTile=function(t,e,n,s,r,o,a,l,c){var d=new Image,u=this.getTileUrl(e,n,s,r,o,a),h=i.setImage(u,d,function(){d.onload=null,this.loadRequests[t].isActive&&"function"==typeof l&&l(d)}.bind(this),function(){d.onload=null,this.loadRequests[t].isActive&&"function"==typeof c&&c()}.bind(this),this.useCors);return{xhr:h,image:d}},n.prototype.addTile=function(t,e,i,n,s,r,o,a,l,c,d){this.loadRequests[t].isActive&&this.loadRequests[t].tiles.push(this.getTile(t,i,n,r,o,a,l,function(i){if(this.loadRequests[t].isActive){var n=(this.getTileBox(s,r,o,a),e.querySelector('.tile[data-tile-hp="'+r+'" ][data-tile-vp="'+o+'"]')),l=n.querySelector("img");l||(l=new Image,l.style.width="100%",l.style.height="100%",n.appendChild(l)),l.src=i.src,"function"==typeof c&&c()}}.bind(this),d))},n.prototype.addTiles=function(t,e,i,n,s,r,o,a,l,c){var d=t.length,u=function(){d--,0===d&&"function"==typeof l&&l()};0===d&&"function"==typeof l&&l();for(var h=0;h<t.length;h++)this.addTile(e,i,n,s,r,t[h].horizontal,t[h].vertical,o,a,u,c)},n.prototype.loadFullImage=function(t,n,s,r,o,a,l,c,d){(r.width>this.scene7Config.maxImageSize.width||r.height>this.scene7Config.maxImageSize.height)&&(r=e.getProportionalSize(this.scene7Config.maxImageSize,r));var u=s.querySelector(".fullImageContainer"),h=s.querySelector(".partitionedImageContainer"),p=s.querySelector(".fullImageContainer img"),m=!1;u||(u=document.createElement("div"),u.className="fullImageContainer",s.insertBefore(u,s.firstChild)),p?m=!p.complete:(p=new Image,p.className="img",p.style.width="100%",p.style.height="100%",u.appendChild(p)),u.style.width=Math.floor(o.width)+"px",u.style.height=Math.floor(o.height)+"px",l&&(u.style.position=l.position,u.style.top=l.top,u.style.left=l.left),u.setAttribute("data-url",n),u.setAttribute("data-target-qlt",a),u.setAttribute("data-target-width",Math.floor(r.width)),u.setAttribute("data-target-height",Math.floor(r.height)),u.setAttribute("data-output-width",Math.floor(o.width)),u.setAttribute("data-output-height",Math.floor(o.height));var f=this.getTileUrl(n,r,0,0,{vertical:1,horizontal:1},a),v=i.setImage(f,p,function(){if(p.onload=null,this.loadRequests[t].isActive){if(h)for(;h.lastChild;)h.removeChild(h.lastChild);"function"==typeof c&&c()}}.bind(this),function(){p.onload=null,this.loadRequests[t].isActive&&"function"==typeof d&&d()}.bind(this),this.useCors,m);this.loadRequests[t].tiles.push({image:p,xhr:v})},n.prototype.loadImageToContainer=function(t,e,i,n,s,r,o,a,l,c,d){o=o||{x:i.width/2,y:i.height/2},c=c||"";var u,h,p=this.getPartitionFactors(i,l),m=(p.horizontal*p.vertical,{topLeft:{x:0,y:0},bottomRight:{x:n.width-1,y:n.height-1}}),f=this.getTileDataForPoint(o,n,p),v=this.loadRequests.push({isActive:!0,tiles:[]})-1,g=function(){this.addTiles([f],v,b,t,i,n,p,c,function(){return!!this.loadRequests[v].isActive&&void this.addTiles(u,v,b,t,i,n,p,c,function(){return!!this.loadRequests[v].isActive&&void this.addTiles(h,v,b,t,i,n,p,c,function(){this.loadRequests[v].isActive=!1,"function"==typeof s&&s()}.bind(this),function(){return!!this.loadRequests[v].isActive&&void("function"==typeof r&&r())}.bind(this))}.bind(this),function(){return!!this.loadRequests[v].isActive&&void("function"==typeof r&&r())}.bind(this))}.bind(this),function(){return!!this.loadRequests[v].isActive&&void("function"==typeof r&&r())}.bind(this))}.bind(this);if(a=a||m,a.topLeft.x=Math.max(Math.min(a.topLeft.x,m.bottomRight.x),m.topLeft.x),a.topLeft.y=Math.max(Math.min(a.topLeft.y,m.bottomRight.y),m.topLeft.y),a.bottomRight.x=Math.max(Math.min(a.bottomRight.x,m.bottomRight.x),a.topLeft.x),a.bottomRight.y=Math.max(Math.min(a.bottomRight.y,m.bottomRight.y),a.topLeft.y),u=this.getTilesDataForArea(a,n,[f],f,p),h=this.getTilesDataForArea(m,n,[f].concat(u),f,p),!this.canUseCanvas||1===p.vertical&&1===p.horizontal)this.loadFullImage(v,t,e,i,n,c,d,s,r);else{var b=e.querySelector(".partitionedImageContainer");if(!b){b=document.createElement("div"),b.className="partitionedImageContainer",b.style.width=n.width+"px",b.style.height=n.height+"px",d&&(b.style.position=d.position,b.style.top=d.top,b.style.left=d.left);for(var y=0;y<p.vertical;y++)for(var S=0;S<p.horizontal;S++){var w=document.createElement("div");w.className="tile",w.style["float"]="left",w.style.width=100/p.horizontal+"%",w.style.height=100/p.vertical+"%",w.setAttribute("data-tile-hp",S),w.setAttribute("data-tile-vp",y),b.appendChild(w)}e.appendChild(b)}g()}return v},n.prototype.getTilesDataForArea=function(t,e,i,n,s){i=i||[],n=n||{horizontal:0,vertical:0};for(var r=this.getTileDataForPoint(t.topLeft,e,s),o=this.getTileDataForPoint(t.bottomRight,e,s),a=[],l=function(t){return t.horizontal===c&&t.vertical===d},c=r.horizontal;c<=o.horizontal;c++)for(var d=r.vertical;d<=o.vertical;d++)0===i.filter(l).length&&a.push({horizontal:c,vertical:d});return a.sort(function(t,e){var i=Math.sqrt(Math.pow(t.horizontal-n.horizontal,2)+Math.pow(t.vertical-n.vertical)),s=Math.sqrt(Math.pow(e.horizontal-n.horizontal,2)+Math.pow(e.vertical-n.vertical));return i>s?1:-1}),a},n.prototype.getTileDataForPoint=function(t,e,i){for(var n,s={horizontal:null,vertical:null},r=0;r<i.horizontal&&null===s.horizontal;r++)n=this.getTileBox(e,r,0,i),t.x>=n.left&&t.x<n.left+n.width&&(s.horizontal=r);for(var o=0;o<i.vertical&&null===s.vertical;o++)n=this.getTileBox(e,0,o,i),t.y>=n.top&&t.y<n.top+n.height&&(s.vertical=o);return s},n.prototype.getTileBox=function(t,e,i,n){var s=this.getPartPosition(e,t.width,n.horizontal),r=this.getPartPosition(i,t.height,n.vertical),o=this.getPartPosition(e+1,t.width,n.horizontal),a=this.getPartPosition(i+1,t.height,n.vertical);return{left:s,top:r,width:o-s,height:a-r}},n.prototype.getPartPosition=function(t,e,i){return Math.floor(e*t/i)},n.prototype.getTileUrl=function(t,e,i,n,s,r){var o=this.getTileBox(e,i,n,s),a=t.indexOf("?")>-1?"&":"?",l=t+a+this.urlQueryStringPattern,c=l.replace(/\[width\]/g,Math.floor(e.width)).replace(/\[height\]/g,Math.floor(e.height)).replace("[startH]",Math.floor(o.left)).replace("[startW]",Math.floor(o.top)).replace("[lengthH]",Math.floor(o.width)).replace("[lengthW]",Math.floor(o.height)).replace("[qlt]",r);return c},n.prototype.cancelAllLoadRequests=function(){for(var t=0;t<this.loadRequests.length;t++)this.cancelLoadRequest(t)},n.prototype.cancelLoadRequest=function(t){if("number"==typeof t&&t<this.loadRequests.length&&this.loadRequests[t].isActive){var e=this.loadRequests[t];if(e.isActive=!1,e.tiles.length)for(var i=e.tiles[0].image.src,n=e.tiles.pop();n;)n.xhr?n.xhr.abort():(n.image.onload=null,n.image.src=i),n=e.tiles.pop()}},n}),define("spinViewer/DataProvider",[],function(){"use strict";var t=function(t,e){this.scene7config=t,this.scene7dataProvider=e};return t.prototype.mapManifestData=function(t){var e={frameUrls:[],maxSize:{width:0,height:0}};if(t.set.item.length>0){var i=t.set.item[0].set?t.set.item.length:1;if(1===i)e.frameUrls[0]=t.set.item.map(function(t){return this.scene7config.imageUrlPattern.replace("[assetID]",t.i.n)}.bind(this)),e.maxSize.width=parseInt(t.set.item[0].dx,10),e.maxSize.height=parseInt(t.set.item[0].dy,10);else{t.set.item[0].set.item.length>0&&(e.maxSize.width=parseInt(t.set.item[0].set.item[0].dx,10),e.maxSize.height=parseInt(t.set.item[0].set.item[0].dy,10));for(var n=0;i>n;n++)e.frameUrls[n]=t.set.item[n].set.item.map(function(t){return this.scene7config.imageUrlPattern.replace("[assetID]",t.i.n)}.bind(this))}}return e},t.prototype.getSpinsetDataForImageUrls=function(t,e,i){for(var n,s="[baseUrl]?imageset={[imageSet]}&req=set,json",r=[],o=0;o<t.length;o++)n=t[o].split("?").shift(),s=s.replace("[baseUrl]",n),r.push(n.split("/").pop());return s=s.replace("[imageSet]",r.join(",")),this.scene7dataProvider.getManifestData(s).then(function(t){var i=[];for(Array.isArray(t.set.item)||(t.set.item=[t.set.item]),o=0;o<t.set.item.length;o++)i.push(this.mapManifestData({set:{item:[t.set.item[o]]}}));return"function"==typeof e&&e(i),i}.bind(this)).fail(function(){"function"==typeof i&&i()})},t.prototype.getSpinsetDataForImageUrl=function(t,e,i){t=t.split("?").shift();var n=t+"?req=set,json";return this.scene7dataProvider.getManifestData(n).then(function(t){return t.set.item=[t.set.item],"function"==typeof e&&e(t),t}.bind(this)).fail(function(){"function"==typeof i&&i()})},t.prototype.getSpinsetDataForProduct=function(t,e,i){var n=this.scene7config.spinsetManifestFileUrlPattern.replace("[productID]",t);return this.scene7dataProvider.getManifestData(n).then(function(t){var i=this.mapManifestData(t);return"function"==typeof e&&e(i),i}.bind(this)).fail(function(){"function"==typeof i&&i()})},t}),define("spinViewer/AssetsProvider",[],function(){"use strict";var t=function(t){this.dataProvider=t};return t.prototype.getAssets=function(t,e,i){Array.isArray(t)?this.dataProvider.getSpinsetDataForImageUrls(t,e,i):isNaN(t)?this.dataProvider.getSpinsetDataForImageUrl(t,e,i):this.dataProvider.getSpinsetDataForProduct(t,e,i)},t}),define("spinViewer/ViewModel",["ko"],function(t){function e(e,i){this.events=e,this.messages=i,this.isCloseButtonVisible=t.observable(!1),this.isPannable=t.observable(!1),this.isLoadingPageVisible=t.observable(!1),this.loadingPercentage=t.observable(0),this.isErrorPageVisible=t.observable(!1),this.isHintVisible=t.observable(!1),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.closeButtonClicked=function(){this.events.trigger("closeButtonClicked")}.bind(this)}return e}),define("utils/ImageScaler",["$"],function(t){"use strict";var e=function(e){this.options={},t.extend(!0,this.options,e)};return e.prototype.getScaledImageSize=function(t){var e=this.getScaledImageLength(this.options.baseSize.width,this.options.maxSize.width,t),i=this.getScaledImageLength(this.options.baseSize.height,this.options.maxSize.height,t);return{width:e,height:i}},e.prototype.getScaledImageLength=function(t,e,i){return i?Math.pow(Math.pow(t,1/i)*e/t,i):t},e}),define("utils/ImageZoomer",["ko","$","utils/sizeHelper"],function(t,e,i){"use strict";var n=function(i,n,s,r){this.events=e({}),this.imageLoader=i,this.inputImageScaler=n,this.outputImageScaler=s,this.currentLevel=t.observable(0),this.options={},e.extend(!0,this.options,r),this.options.zoomFactors=[0].concat(this.options.zoomFactors),this.updateCanZoomDummy=t.observable(!1),this.currLoadRequestId=null,this.currentPosition={x:0,y:0},this.currentSize={width:0,height:0
},this.canZoomIn=t.computed(this.canZoomIn,this),this.canZoomOut=t.computed(this.canZoomOut,this),this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded};return n.prototype.FULL_IMAGE_STATUS={NotLoaded:0,Loaded:2},n.prototype.init=function(){var t=e(this.options.container);this.containerSize={width:this.options.containerSize?this.options.containerSize.width:t.width(),height:this.options.containerSize?this.options.containerSize.height:t.height()},this.currentSize=this.getOutputImageSize(this.currentLevel()),this.currentPosition=this.getSanitizedPosition(this.currentPosition,this.currentSize),this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy())},n.prototype.getNextClosestLevel=function(t){for(var e=0,i=0;i<=this.options.zoomFactors.length;){var n=this.currentSize,s=this.getOutputImageSize(i);if(t&&(n.width===s.width||n.height===s.height)){e=i;break}if(n.width<s.width||n.height<s.height){e=i;break}i++}return e},n.prototype.resize=function(t,e,i){var n=this.getNextClosestLevel(!0);this.options.containerSize=e.containerSize,this.options.outputBaseSize=e.outputBaseSize,this.outputImageScaler.options.baseSize=e.imageScalersOptions.outputImageScalerOptions.baseSize,this.outputImageScaler.options.maxSize=e.imageScalersOptions.outputImageScalerOptions.maxSize,this.init(),t&&this.zoom(function(){return n},null,i)},n.prototype.canZoomIn=function(){this.updateCanZoomDummy();var t=this.currentSize,e=this.getOutputImageSize(this.options.zoomFactors.length-1);return t.width<e.width||t.height<e.height},n.prototype.canZoomOut=function(){this.updateCanZoomDummy();var t=this.getOutputImageSize(0),e=this.currentSize;return t.width<e.width||t.height<e.height},n.prototype.zoomIn=function(t,e,i){return this.canZoomIn()?void this.zoom(this.getNextClosestLevel.bind(this,!1),e,i):t?void this.zoomReset(i):void("function"==typeof i&&i())},n.prototype.zoomOut=function(t,e){return this.canZoomOut()?void this.zoom(function(){return this.currentLevel()-1}.bind(this),t,e):void("function"==typeof e&&e())},n.prototype.zoomReset=function(t,e){if(e){var i=0,n=this.getOutputImageSize(i),s=this.getZoomedImageBox(this.currentSize,this.currentPosition,n);return this.currentSize=s.size,this.currentPosition=s.position,this.applyPosition(!0),this.currentLevel(i),void("function"==typeof t&&setTimeout(t,0))}this.zoom(function(){return 0}.bind(this),void 0,t)},n.prototype.loadImage=function(t,e,i,n,s,r,o,a,l,c,d){t&&(this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.currLoadRequestId=this.imageLoader.loadImageToContainer(t,e,i,n,function(){this.currLoadRequestId=null,"function"==typeof s&&setTimeout(s,0)}.bind(this),r,o,a,l,c,d))},n.prototype.zoom=function(t,e,i,n){this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.fullImageStatus!==this.FULL_IMAGE_STATUS.Loaded&&(this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded);var s=t(),r=(this.getInputImageSize(s),this.getOutputImageSize(s)),o=this.getZoomedImageBox(this.currentSize,this.currentPosition,r,e),a=s>0;this.currentSize=o.size,this.currentPosition=o.position,this.applyPosition(!0),this.fullImageStatus===this.FULL_IMAGE_STATUS.NotLoaded&&a&&(this.loadImage(this.options.baseUrl,this.options.container,this.getInputImageSize(this.options.zoomFactors.length-1),this.currentSize,function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.Loaded,this.applyPosition(),"function"==typeof i&&i()}.bind(this),function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded,"function"==typeof n&&n()}.bind(this),o.focalPointOnSourceImage,this.getVisibleArea(o.position),!0,this.options.zoomJpgQlt,{position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px"}),this.applyPosition(!0)),this.currentLevel(s),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.getVisibleArea=function(t){return{topLeft:{x:-t.x,y:-t.y},bottomRight:{x:this.containerSize.width-t.x,y:this.containerSize.height-t.y}}},n.prototype.getZoomedImageBox=function(t,e,i,n){n||(n={x:this.containerSize.width/2,y:this.containerSize.height/2}),n=this.getSanitizedPointOnImage(n,t);var s=this.getPointOnOutputImageFromContainer(n,t),r={width:i.width-t.width,height:i.height-t.height},o=i.width/t.width,a={x:s.x*o,y:s.y*o},l={x:s.x/t.width,y:s.y/t.height},c={x:r.width*l.x,y:r.height*l.y},d=this.getSanitizedPosition({x:e.x-c.x,y:e.y-c.y},i);return{size:i,position:d,focalPointOnSourceImage:a}},n.prototype.moveBy=function(t){this.canZoomOut()&&(t.x||t.y)&&(this.currentPosition=this.getSanitizedPosition({x:this.currentPosition.x+t.x,y:this.currentPosition.y+t.y},this.currentSize),this.applyPosition())},n.prototype.applyPosition=function(t){var i=e(this.options.container),n=Math.floor(this.currentSize.width),s=Math.floor(this.currentSize.height),r=i.find(".fullImageContainer, .partitionedImageContainer");r.css({position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px",width:n+"px",height:s+"px"}),r.attr({"data-output-width":n,"data-output-height":s})},n.prototype.getInputImageSize=function(t){var e=this.options.zoomFactors[t],i=this.inputImageScaler.getScaledImageSize(e);return i.width<this.options.outputBaseSize.width||i.height<this.options.outputBaseSize.height?this.options.outputBaseSize:i},n.prototype.getOutputImageSize=function(t){if(0===t)return this.options.outputBaseSize;var e=this.options.zoomFactors[t],i=this.outputImageScaler.getScaledImageSize(e);return i.width<this.options.outputBaseSize.width||i.height<this.options.outputBaseSize.height?this.options.outputBaseSize:i},n.prototype.setPlaceholderImage=function(t){var i=0,n=(this.getInputImageSize(i),this.getOutputImageSize(i)),s=this.getZoomedImageBox(this.currentSize,this.currentPosition,n);this.currentSize=s.size,this.currentPosition=s.position;var r=e(this.options.container).children(),o=document.createElement("div");o.className="fullImageContainer",t.className="img",t.style.width="100%",t.style.height="100%",o.appendChild(t),this.options.container.appendChild(o),this.applyPosition(!0),r.remove()},n.prototype.getBezel=function(t){return{horizontal:Math.max(this.containerSize.width-Math.floor(t.width),0)/2,vertical:Math.max(this.containerSize.height-Math.floor(t.height),0)/2}},n.prototype.getSanitizedPosition=function(t,e){var i=this.getBezel(e),n={x:Math.floor(t.x),y:Math.floor(t.y)};return n.x=Math.min(n.x,i.horizontal),n.y=Math.min(n.y,i.vertical),n.x=Math.max(n.x,this.containerSize.width-Math.floor(e.width)-i.horizontal),n.y=Math.max(n.y,this.containerSize.height-Math.floor(e.height)-i.vertical),n},n.prototype.getSanitizedPointOnImage=function(t,e){var i=this.getBezel(e),n={x:t.x,y:t.y};return n.x=Math.max(n.x,i.horizontal),n.y=Math.max(n.y,i.vertical),n.x=Math.min(n.x,this.containerSize.width-i.horizontal),n.y=Math.min(n.y,this.containerSize.height-i.vertical),n},n.prototype.getPointOnOutputImageFromContainer=function(t){return{x:t.x-this.currentPosition.x,y:t.y-this.currentPosition.y}},n.prototype.getCurrentImageDisplaySize=function(){return this.currentSize},n.prototype.scale=function(t,e,i,n){i||(i={x:0,y:0});var s={width:Math.max(t.width*e,this.options.outputBaseSize.width),height:Math.max(t.height*e,this.options.outputBaseSize.height)};if(!n){var r=this.getOutputImageSize(this.options.zoomFactors.length-1);s.width=Math.min(r.width,s.width),s.height=Math.min(r.height,s.height)}var o=this.getZoomedImageBox(this.currentSize,this.currentPosition,s,i);this.currentPosition=o.position,this.currentSize=o.size,this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.setPartitionedImageVisibility=function(){var t=this.options.container.querySelector(".partitionedImageContainer");return t?this.currentSize.width===this.options.outputBaseSize.width?void(this.options.container.querySelector(".partitionedImageContainer").style.display="none"):void(this.options.container.querySelector(".partitionedImageContainer").style.display="block"):void 0},n}),function(t,e,i,n){"use strict";function s(t,e,i){return setTimeout(c(t,i),e)}function r(t,e,i){return!!Array.isArray(t)&&(o(t,i[e],i),!0)}function o(t,e,i){var s;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(s=0;s<t.length;)e.call(i,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(i,t[s],s,t)}function a(e,i,n){var s="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,s,n),e.apply(this,arguments)}}function l(t,e,i){var n,s=e.prototype;n=t.prototype=Object.create(s),n.constructor=t,n._super=s,i&&ut(n,i)}function c(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==mt?t.apply(e?e[0]||n:n,e):t}function u(t,e){return t===n?e:t}function h(t,e,i){o(v(e),function(e){t.addEventListener(e,i,!1)})}function p(t,e,i){o(v(e),function(e){t.removeEventListener(e,i,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function f(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function g(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function y(t,e,i){for(var n=[],s=[],r=0;r<t.length;){var o=e?t[r][e]:t[r];g(s,o)<0&&n.push(t[r]),s[r]=o,r++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function S(t,e){for(var i,s,r=e[0].toUpperCase()+e.slice(1),o=0;o<ht.length;){if(i=ht[o],s=i?i+r:e,s in t)return s;o++}return n}function w(){return St++}function I(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}function C(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&i.handler(e)},this.init()}function T(t){var e,i=t.options.inputClass;return new(e=i?i:Ct?O:Tt?B:It?G:F)(t,P)}function P(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,r=e&Mt&&n-s===0,o=e&(Lt|Dt)&&n-s===0;i.isFirst=!!r,i.isFinal=!!o,r&&(t.session={}),i.eventType=e,x(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function x(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=E(e)),s>1&&!i.firstMultiple?i.firstMultiple=E(e):1===s&&(i.firstMultiple=!1);var r=i.firstInput,o=i.firstMultiple,a=o?o.center:r.center,l=e.center=M(n);e.timeStamp=gt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=_(a,l),e.distance=D(a,l),A(i,e),e.offsetDirection=L(e.deltaX,e.deltaY);var c=z(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=vt(c.x)>vt(c.y)?c.x:c.y,e.scale=o?V(o.pointers,n):1,e.rotation=o?R(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,k(i,e);var d=t.element;m(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d}function A(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Mt&&r.eventType!==Lt||(s=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}function k(t,e){var i,s,r,o,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=Dt&&(l>Et||a.velocity===n)){var c=e.deltaX-a.deltaX,d=e.deltaY-a.deltaY,u=z(l,c,d);s=u.x,r=u.y,i=vt(u.x)>vt(u.y)?u.x:u.y,o=L(c,d),t.lastInterval=e}else i=a.velocity,s=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=s,e.velocityY=r,e.direction=o}function E(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:ft(t.pointers[i].clientX),clientY:ft(t.pointers[i].clientY)},i++;return{timeStamp:gt(),pointers:e,center:M(e),deltaX:t.deltaX,deltaY:t.deltaY}}function M(t){var e=t.length;if(1===e)return{x:ft(t[0].clientX),y:ft(t[0].clientY)};for(var i=0,n=0,s=0;e>s;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:ft(i/e),y:ft(n/e)}}function z(t,e,i){return{x:e/t||0,y:i/t||0}}function L(t,e){return t===e?_t:vt(t)>=vt(e)?0>t?Rt:Vt:0>e?Ft:Ot}function D(t,e,i){i||(i=$t);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function _(t,e,i){i||(i=$t);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}function R(t,e){return _(e[1],e[0],Gt)+_(t[1],t[0],Gt)}function V(t,e){return D(e[0],e[1],Gt)/D(t[0],t[1],Gt)}function F(){this.evEl=qt,this.evWin=Wt,this.pressed=!1,C.apply(this,arguments)}function O(){this.evEl=Yt,this.evWin=Xt,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Jt,this.evWin=Qt,this.started=!1,C.apply(this,arguments)}function N(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(Lt|Dt)&&(i=y(i.concat(n),"identifier",!0)),[i,n]}function B(){this.evTarget=ee,this.targetIds={},C.apply(this,arguments)}function $(t,e){var i=b(t.touches),n=this.targetIds;if(e&(Mt|zt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,r,o=b(t.changedTouches),a=[],l=this.target;if(r=i.filter(function(t){return m(t.target,l)}),e===Mt)for(s=0;s<r.length;)n[r[s].identifier]=!0,s++;for(s=0;s<o.length;)n[o[s].identifier]&&a.push(o[s]),e&(Lt|Dt)&&delete n[o[s].identifier],s++;return a.length?[y(r.concat(a),"identifier",!0),a]:void 0}function G(){C.apply(this,arguments);var t=c(this.handler,this);this.touch=new B(this.manager,t),this.mouse=new F(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function H(t,e){t&Mt?(this.primaryTouch=e.changedPointers[0].identifier,q.call(this,e)):t&(Lt|Dt)&&q.call(this,e)}function q(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,s=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(s,ie)}}function W(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],r=Math.abs(e-s.x),o=Math.abs(i-s.y);if(ne>=r&&ne>=o)return!0}return!1}function j(t,e){this.manager=t,this.set(e)}function Z(t){if(f(t,ce))return ce;var e=f(t,de),i=f(t,ue);return e&&i?ce:e||i?e?de:ue:f(t,le)?le:ae}function Y(){if(!re)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!i||t.CSS.supports("touch-action",n)}),e}function X(t){this.options=ut({},this.defaults,t||{}),this.id=w(),this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=pe,this.simultaneous={},this.requireFail=[]}function K(t){return t&be?"cancel":t&ve?"end":t&fe?"move":t&me?"start":""}function J(t){return t==Ot?"down":t==Ft?"up":t==Rt?"left":t==Vt?"right":""}function Q(t,e){var i=e.manager;return i?i.get(t):t}function tt(){X.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function it(){tt.apply(this,arguments)}function nt(){X.apply(this,arguments),this._timer=null,this._input=null}function st(){tt.apply(this,arguments)}function rt(){tt.apply(this,arguments)}function ot(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function at(t,e){return e=e||{},e.recognizers=u(e.recognizers,at.defaults.preset),new lt(t,e)}function lt(t,e){this.options=ut({},at.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=T(this),this.touchAction=new j(this,this.options.touchAction),ct(this,!0),o(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ct(t,e){var i=t.element;if(i.style){var n;o(t.options.cssProps,function(s,r){n=S(i.style,r),e?(t.oldCssProps[n]=i.style[n],i.style[n]=s):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function dt(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var ut,ht=["","webkit","Moz","MS","ms","o"],pt=e.createElement("div"),mt="function",ft=Math.round,vt=Math.abs,gt=Date.now;ut="function"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(s!==n&&null!==s)for(var r in s)s.hasOwnProperty(r)&&(e[r]=s[r])}return e}:Object.assign;var bt=a(function(t,e,i){for(var s=Object.keys(e),r=0;r<s.length;)(!i||i&&t[s[r]]===n)&&(t[s[r]]=e[s[r]]),r++;return t},"extend","Use `assign`."),yt=a(function(t,e){return bt(t,e,!0)},"merge","Use `assign`."),St=1,wt=/mobile|tablet|ip(ad|hone|od)|android/i,It="ontouchstart"in t,Ct=S(t,"PointerEvent")!==n,Tt=It&&wt.test(navigator.userAgent),Pt="touch",xt="pen",At="mouse",kt="kinect",Et=25,Mt=1,zt=2,Lt=4,Dt=8,_t=1,Rt=2,Vt=4,Ft=8,Ot=16,Ut=Rt|Vt,Nt=Ft|Ot,Bt=Ut|Nt,$t=["x","y"],Gt=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(I(this.element),this.evWin,this.domHandler)}};var Ht={mousedown:Mt,mousemove:zt,mouseup:Lt},qt="mousedown",Wt="mousemove mouseup";l(F,C,{handler:function(t){var e=Ht[t.type];e&Mt&&0===t.button&&(this.pressed=!0),e&zt&&1!==t.which&&(e=Lt),this.pressed&&(e&Lt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:At,srcEvent:t}))}});var jt={pointerdown:Mt,pointermove:zt,pointerup:Lt,pointercancel:Dt,pointerout:Dt},Zt={2:Pt,3:xt,4:At,5:kt},Yt="pointerdown",Xt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Yt="MSPointerDown",Xt="MSPointerMove MSPointerUp MSPointerCancel"),l(O,C,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=jt[n],r=Zt[t.pointerType]||t.pointerType,o=r==Pt,a=g(e,t.pointerId,"pointerId");s&Mt&&(0===t.button||o)?0>a&&(e.push(t),a=e.length-1):s&(Lt|Dt)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var Kt={touchstart:Mt,touchmove:zt,touchend:Lt,touchcancel:Dt},Jt="touchstart",Qt="touchstart touchmove touchend touchcancel";l(U,C,{handler:function(t){var e=Kt[t.type];if(e===Mt&&(this.started=!0),this.started){var i=N.call(this,t,e);e&(Lt|Dt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Pt,srcEvent:t})}}});var te={touchstart:Mt,touchmove:zt,touchend:Lt,touchcancel:Dt},ee="touchstart touchmove touchend touchcancel";l(B,C,{handler:function(t){var e=te[t.type],i=$.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Pt,srcEvent:t})}});var ie=2500,ne=25;l(G,C,{handler:function(t,e,i){var n=i.pointerType==Pt,s=i.pointerType==At;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)H.call(this,e,i);else if(s&&W.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var se=S(pt.style,"touchAction"),re=se!==n,oe="compute",ae="auto",le="manipulation",ce="none",de="pan-x",ue="pan-y",he=Y();j.prototype={set:function(t){t==oe&&(t=this.compute()),re&&this.manager.element.style&&he[t]&&(this.manager.element.style[se]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,s=f(n,ce)&&!he[ce],r=f(n,ue)&&!he[ue],o=f(n,de)&&!he[de];if(s){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}return o&&r?void 0:s||r&&i&Ut||o&&i&Nt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var pe=1,me=2,fe=4,ve=8,ge=ve,be=16,ye=32;X.prototype={defaults:{},set:function(t){return ut(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(r(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return r(t,"dropRecognizeWith",this)?this:(t=Q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(r(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===g(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(r(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=g(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;ve>n&&e(i.options.event+K(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=ve&&e(i.options.event+K(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ye)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ye|pe)))return!1;t++}return!0},recognize:function(t){var e=ut({},t);return d(this.options.enable,[this,e])?(this.state&(ge|be|ye)&&(this.state=pe),this.state=this.process(e),void(this.state&(me|fe|ve|be)&&this.tryEmit(e))):(this.reset(),void(this.state=ye))},process:function(t){},getTouchAction:function(){},reset:function(){}},l(tt,X,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(me|fe),s=this.attrTest(t);return n&&(i&Dt||!s)?e|be:n||s?i&Lt?e|ve:e&me?e|fe:me:ye}}),l(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Bt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ut&&e.push(ue),t&Nt&&e.push(de),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,r=t.deltaX,o=t.deltaY;return s&e.direction||(e.direction&Ut?(s=0===r?_t:0>r?Rt:Vt,i=r!=this.pX,n=Math.abs(t.deltaX)):(s=0===o?_t:0>o?Ft:Ot,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return tt.prototype.attrTest.call(this,t)&&(this.state&me||!(this.state&me)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=J(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(it,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&me)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(nt,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Lt|Dt)&&!r)this.reset();else if(t.eventType&Mt)this.reset(),this._timer=s(function(){this.state=ge,this.tryEmit()},e.time,this);else if(t.eventType&Lt)return ge;return ye},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ge&&(t&&t.eventType&Lt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=gt(),this.manager.emit(this.options.event,this._input)))}}),l(st,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&me)}}),l(rt,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ut|Nt,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Ut|Nt)?e=t.overallVelocity:i&Ut?e=t.overallVelocityX:i&Nt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&vt(e)>this.options.velocity&&t.eventType&Lt},emit:function(t){var e=J(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(ot,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Mt&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=Lt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||D(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var l=this.count%e.taps;if(0===l)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ge,this.tryEmit()},e.interval,this),me):ge}return ye},failTimeout:function(){return this._timer=s(function(){this.state=ye},this.options.interval,this),ye},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ge&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),at.VERSION="2.0.7",at.defaults={domEvents:!1,touchAction:oe,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[it,{enable:!1},["rotate"]],[rt,{direction:Ut}],[et,{direction:Ut},["swipe"]],[ot],[ot,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Se=1,we=2;lt.prototype={set:function(t){return ut(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?we:Se},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&ge)&&(s=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],e.stopped===we||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(me|fe|ve)&&(s=e.curRecognizer=i),r++}},get:function(t){if(t instanceof X)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(r(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(r(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=g(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==n&&e!==n){var i=this.handlers;return o(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==n){var i=this.handlers;return o(v(t),function(t){e?i[t]&&i[t].splice(g(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&dt(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ct(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ut(at,{INPUT_START:Mt,INPUT_MOVE:zt,INPUT_END:Lt,INPUT_CANCEL:Dt,STATE_POSSIBLE:pe,STATE_BEGAN:me,STATE_CHANGED:fe,STATE_ENDED:ve,STATE_RECOGNIZED:ge,STATE_CANCELLED:be,STATE_FAILED:ye,DIRECTION_NONE:_t,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:Vt,DIRECTION_UP:Ft,DIRECTION_DOWN:Ot,DIRECTION_HORIZONTAL:Ut,DIRECTION_VERTICAL:Nt,DIRECTION_ALL:Bt,Manager:lt,Input:C,TouchAction:j,TouchInput:B,MouseInput:F,PointerEventInput:O,TouchMouseInput:G,SingleTouchInput:U,Recognizer:X,AttrRecognizer:tt,Tap:ot,Pan:et,Swipe:rt,Pinch:it,Rotate:st,Press:nt,on:h,off:p,each:o,merge:yt,extend:bt,assign:ut,inherit:l,bindFn:c,prefixed:S});var Ie="undefined"!=typeof t?t:"undefined"!=typeof self?self:{};Ie.Hammer=at,"function"==typeof define&&define.amd?define("hammer",[],function(){return at}):"undefined"!=typeof module&&module.exports?module.exports=at:t[i]=at}(window,document,"Hammer"),define("spinViewer/Controller",["ko","$","utils/deviceHelper","utils/sizeHelper","utils/ImageScaler","utils/ImageZoomer","hammer"],function(t,e,i,n,s,r,o){"use strict";var a=function(n,s,r,o,a,l){this.assetsProvider=n,this.imageLoader=s,this.loadedAssets=null,this.events=l,this.containers=a,this.params={showCloseButton:!1,showHint:!1,spinSpeed:1,maxPixelRatio:1.5,hintDisplayTime:3e3,preloadingTimeout:0,handleLoadingErrors:!0,framesCachingQueueInterval:35,useInitialAnimation:!1,animationFramesCount:-1,animationIntervalStart:40,animationIntervalPeak:5},this.viewModel=o,this.updateZoomerDummy=t.observable(!1),this.initState=this.INIT_STATE.NotInitialized,this.frames=[[]],this.lastInitArguments=null,this.currentRowIndex=t.observable(0),this.currentFrameIndex=t.observable(),e.extend(!0,this.params,r),this.params.devicePixelRatio=Math.min(i.getDevicePixelRatio(this.containers.window),this.params.maxPixelRatio),this.isPannable=t.computed(this.isPannable,this),this.hasError=t.observable(!1),this.getCurrentZoomer=t.computed(this.getCurrentZoomer,this),this.setEventListeners(),this.viewModel.isPannable(this.isPannable()),this.viewModel.isCloseButtonVisible(this.params.showCloseButton)};return a.prototype.MIN_GESTURE_RECOGNIZE_DISTANCE=10,a.prototype.INIT_STATE={NotInitialized:0,Initializing:1,Initialized:2},a.prototype.init=function(t,e){return this.initState!==this.INIT_STATE.Initializing?(e&&e.initImage&&(e=e.initImage.image),this.lastInitArguments=arguments,this.updateSpinContainerSize(),this.targetSize=this.getContainerInitialTargetSize(),e?(this.setInitialImage(e),this.initState=this.INIT_STATE.Initialized,void this.showFrame(0,0,!0)):this.initState!==this.INIT_STATE.Initialized?(this.initState=this.INIT_STATE.Initializing,void this.preloadImages(0,0)):void this.resize(function(){this.showFrame(0,0,!0)}.bind(this))):void 0},a.prototype.isVisible=function(){return"none"!==window.getComputedStyle(this.containers.spin).display},a.prototype.setInitialImage=function(t){var e=this.getZoomer(0,0);e.options.baseUrl=this.loadedAssets.frameUrls[0][0],e.zoomReset(null,!0),t.className="img",e.setPlaceholderImage(t)},a.prototype.updateSpinContainerSize=function(){this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.spinContainerSize={width:this.spinContainerRect.width,height:this.spinContainerRect.height}},a.prototype.isPannable=function(){var t=this.getCurrentZoomer();return t&&t.canZoomOut()},a.prototype.close=function(){this.zoomReset(),this.events.trigger("playerExitRequested")},a.prototype.zoomIn=function(t,e,i){var n=this.getCurrentZoomer();return n&&(t||n.canZoomIn())?(this.events.trigger("zoomedIn"),this.imageLoader.cancelAllLoadRequests(),void n.zoomIn(t,e,i)):void("function"==typeof i&&i())},a.prototype.zoomReset=function(t){var e=this.getCurrentZoomer();return e?(this.imageLoader.cancelAllLoadRequests(),void e.zoomReset(t)):void("function"==typeof t&&t())},a.prototype.zoomOut=function(t,e){var i=this.getCurrentZoomer();return i&&i.canZoomOut()?(this.imageLoader.cancelAllLoadRequests(),void i.zoomOut(focalPointInContainer,e)):void("function"==typeof e&&e())},a.prototype.getEventPositionRelativeToTarget=function(t,e){return{x:(t.center?t.center.x:t.clientX)-e.left,y:(t.center?t.center.y:t.clientY)-e.top}},a.prototype.resize=function(t){if(this.isVisible()){var e,i=this.frames.length*this.frames[0].length,n=function(){
i--,i||"function"==typeof t&&t()};if(this.updateSpinContainerSize(),!i)return void("function"==typeof t&&t());for(var s=0;s<this.frames.length;s++)for(var r=0;r<this.frames[s].length;r++){var o=this.getOutputBaseSize();e=this.frames[s][r],e.resize(!0,{containerSize:this.spinContainerSize,outputBaseSize:o,imageScalersOptions:this.getImageScalersOptions(o)},n)}}},a.prototype.animationIntervalEasing=function(t,e){var i=this.params.animationIntervalPeak-this.params.animationIntervalStart,n=(Math.sin(2*Math.PI*t/e-Math.PI/2)+1)/2;return this.params.animationIntervalStart+n*i},a.prototype.refresh=function(){this.init.apply(this,this.lastInitArguments)},a.prototype.animateSpin=function(t,e,i,n){var s=t,r=0,o=e>t?e-t:this.frames[this.currentRowIndex()].length+e-t,a=function(){return this.showFrame(this.currentRowIndex(),s,!0),s===e?void("function"==typeof n&&n()):(s++,r++,s>=this.frames[this.currentRowIndex()].length&&(s=0),void setTimeout(a,i(r,o)))}.bind(this);a()},a.prototype.getZoomer=function(t,e){var i,n=this.getOutputBaseSize(),s=this.getImageScalersOptions(n);return this.frames[t]=this.frames[t]||[],i=this.frames[t][e],i||(i=this.createZoomer(),this.frames[t][e]=i,this.updateZoomerDummy(!this.updateZoomerDummy())),i.inputImageScaler.options.baseSize=s.inputImageScalerOptions.baseSize,i.inputImageScaler.options.maxSize=s.inputImageScalerOptions.maxSize,i.resize(!1,{containerSize:this.spinContainerSize,outputBaseSize:n,imageScalersOptions:s}),i},a.prototype.getImageScalersOptions=function(t){var e={width:this.loadedAssets.maxSize.width,height:this.loadedAssets.maxSize.height},i={width:Math.min(this.loadedAssets.maxSize.width,this.targetSize.width*this.params.devicePixelRatio),height:Math.min(this.loadedAssets.maxSize.height,this.targetSize.height*this.params.devicePixelRatio)},n=t,s={width:Math.max(t.width,this.loadedAssets.maxSize.width/this.params.devicePixelRatio),height:Math.max(t.height,this.loadedAssets.maxSize.height/this.params.devicePixelRatio)};return{inputImageScalerOptions:{baseSize:i,maxSize:e},outputImageScalerOptions:{baseSize:n,maxSize:s}}},a.prototype.createZoomer=function(t){var e=document.createElement("div"),i=this.getOutputBaseSize(),n=this.getImageScalersOptions(i),o=new s(n.inputImageScalerOptions),a=new s(n.outputImageScalerOptions);e.className="amp-frame";var l=new r(this.imageLoader,o,a,{baseUrl:t,zoomFactors:this.params.zoomFactors,container:e,containerSize:this.spinContainerSize,outputBaseSize:i,devicePixelRatio:this.params.devicePixelRatio,baseJpgQlt:this.params.baseJpgQlt,zoomJpgQlt:this.params.zoomJpgQlt});return l},a.prototype.getContainerInitialTargetSize=function(){var t=n.getProportionalSize({width:this.spinContainerSize.width,height:this.spinContainerSize.height},this.loadedAssets.maxSize);return this.params.initialSize&&(t.width=this.params.initialSize.width,t.height=this.loadedAssets.maxSize.height*t.width/this.loadedAssets.maxSize.width),t},a.prototype.getOutputBaseSize=function(){return n.getProportionalSize(this.spinContainerSize,this.loadedAssets.maxSize)},a.prototype.preloadImages=function(t,e,i){this.viewModel.loadingPercentage(0),this.hasError(!1);var n,s=null,r=!1,o=[],a=null,l=function(t){var e=o.pop();return e?(this.showFrame(e.rowIndex,e.frameIndex,!0),m--,void this.viewModel.loadingPercentage(Math.floor(100*(n-m)/n))):void(p||(clearInterval(a),a=null,"function"==typeof t&&t()))},c=function(){r=!0,p--,m--,p||(clearTimeout(s),s=null,clearInterval(a),a=null,this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized)},d=function(){if(clearTimeout(s),s=null,this.hasError(r),r)return this.events.trigger("allImagesLoaded",!1),void(this.initState=this.INIT_STATE.NotInitialized);this.events.trigger("allImagesLoaded",!0);var i=this.frames[t].length,n=e,o=(i+e-1)%i;return!this.params.showHint||window.sessionStorage&&window.sessionStorage.getItem("spinViewerHintDisplayed")||(this.viewModel.isHintVisible(!0),setTimeout(function(){this.viewModel.isHintVisible(!1),window.sessionStorage&&window.sessionStorage.setItem("spinViewerHintDisplayed",!0)}.bind(this),this.params.hintDisplayTime)),this.params.useInitialAnimation?(n=(i+e-this.params.animationFramesCount)%i,o=e,this.showFrame(t,n,!0),this.viewModel.isLoadingPageVisible(!1),void this.animateSpin(n,o,this.animationIntervalEasing.bind(this),function(){this.initState=this.INIT_STATE.Initialized,this.showFrame(t,e,!0)}.bind(this))):(this.viewModel.isLoadingPageVisible(!1),this.initState=this.INIT_STATE.Initialized,void this.showFrame(t,e,!0))},u=function(t,e,i){i.applyPosition(),p--,n>1&&o.push({rowIndex:t,frameIndex:e})},h=function(t,e,i){i.loadImage(this.loadedAssets.frameUrls[t][e],i.options.container,i.inputImageScaler.options.baseSize,i.options.outputBaseSize,u.bind(this,t,e,i),this.params.handleLoadingErrors?c.bind(this):u.bind(this,t,e,i),null,null,1===n,this.params.baseJpgQlt)};n=this.loadedAssets.frameUrls.length*this.loadedAssets.frameUrls[0].length;var p=n,m=n;n>1&&this.viewModel.isLoadingPageVisible(!0),a=setInterval(l.bind(this,d.bind(this)),this.params.framesCachingQueueInterval),this.imageLoader.cancelAllLoadRequests(),this.params.handleLoadingErrors&&this.params.preloadingTimeout&&(s=setTimeout(function(){clearInterval(a),a=null,this.imageLoader.cancelAllLoadRequests(),this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized}.bind(this),this.params.preloadingTimeout));for(var f=0;f<this.loadedAssets.frameUrls.length;f++)for(var v=0;v<this.loadedAssets.frameUrls[f].length;v++){var g=this.getZoomer(f,v);g.options.baseUrl=this.loadedAssets.frameUrls[f][v],h.call(this,f,v,g)}},a.prototype.getCurrentZoomer=function(){return this.updateZoomerDummy(),this.currentRowIndex()<this.frames.length&&this.frames[this.currentRowIndex()]&&this.currentFrameIndex()<this.frames[this.currentRowIndex()].length?this.frames[this.currentRowIndex()][this.currentFrameIndex()]:null},a.prototype.getCurrentFrame=function(){return{rowIndex:this.currentRowIndex(),frameIndex:this.currentFrameIndex(),zoomer:this.getCurrentZoomer()}},a.prototype.showFrame=function(t,e,i){if((i||this.initState===this.INIT_STATE.Initialized)&&(t!=this.currentRowIndex()||e!=this.currentFrameIndex())){this.currentRowIndex(t),this.currentFrameIndex(e);for(var n=this.getCurrentFrame();this.containers.images.lastChild;)this.containers.images.removeChild(this.containers.images.lastChild);this.containers.images.appendChild(n.zoomer.options.container),this.events.trigger("frameShown",n)}},a.prototype.loadFullImage=function(t,e){t.fullImageStatus=t.FULL_IMAGE_STATUS.Loading;var i=(t.getCurrentImageDisplaySize(),t.getOutputImageSize(t.options.zoomFactors.length-1)),n=t.getZoomedImageBox(t.currentSize,t.currentPosition,i,e);t.loadImage(this.loadedAssets.frameUrls[this.currentRowIndex()][this.currentFrameIndex()],t.options.container,t.getInputImageSize(t.options.zoomFactors.length-1),i,function(){t.applyPosition(),t.fullImageStatus=t.FULL_IMAGE_STATUS.Loaded},function(){t.fullImageStatus!==t.FULL_IMAGE_STATUS.Loaded&&(t.fullImageStatus=t.FULL_IMAGE_STATUS.NotLoaded)},n.focalPointOnSourceImage,null,!0,this.params.zoomJpgQlt)},a.prototype.setEventListeners=function(){this.viewModel.events.on("closeButtonClicked",this.close.bind(this)),this.viewModel.events.on("refreshButtonClicked",function(){this.refresh(),this.events.trigger("refreshButtonClicked")}.bind(this)),e(window).resize(function(){if(this.initState===this.INIT_STATE.Initialized){var t=this.containers.spin.getBoundingClientRect();t.width===this.spinContainerRect.width&&t.height===this.spinContainerRect.height||this.resize()}}.bind(this));var t,i,n,s,r=new o(this.containers.root),a=r.get("pinch"),l=r.get("pan"),c=r.get("doubletap"),d=null,u=!1,h=function(t,e){var s=this.getCurrentZoomer();if(s.canZoomOut())return void s.moveBy(e);if(this.frames.length>1||this.frames[this.currentRowIndex()].length>1){var r=this.getRemoteRowIndex(i,this.getMatrixShift(this.params.reverseVerticalDirection,t.y,this.frames.length,this.spinContainerSize.height)),o=this.getRemoteFrameIndex(n,this.getMatrixShift(this.params.reverseHorizontalDirection,t.x,this.frames[0].length,this.spinContainerSize.width));r===this.currentRowIndex()&&o===this.currentFrameIndex()||(this.events.trigger("spun"),this.showFrame(r,o))}}.bind(this),p=function(){l.set({threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE}),l.set({direction:this.isPannable()?o.DIRECTION_ALL:o.DIRECTION_HORIZONTAL}),l.set({enable:this.isPannable()||this.frames[this.currentRowIndex()].length>1})}.bind(this),m=function(e){if(this.initState===this.INIT_STATE.Initialized){e.preventDefault(),e.stopPropagation();var i=this.getCurrentZoomer(),n=e.detail<0||e.wheelDelta>0?1:-1,s=1+.1*n;this.spinContainerRect=this.containers.spin.getBoundingClientRect(),i.fullImageStatus===i.FULL_IMAGE_STATUS.NotLoaded&&this.loadFullImage.call(this,i,this.getEventPositionRelativeToTarget(e,this.spinContainerRect)),t=i.getCurrentImageDisplaySize(),i.scale(t,s,this.getEventPositionRelativeToTarget(e,this.spinContainerRect),u)}}.bind(this);p(),c.set({interval:500,time:500,threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE,posThreshold:100}),this.isPannable.subscribe(function(t){this.viewModel.isPannable(t),p()}.bind(this)),r.on("hammer.input",function(t){return t.distance<this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(d=null),null===d&&t.distance>=this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(d=!this.isPannable()&&1===t.pointers.length&&(t.direction&o.DIRECTION_VERTICAL)>0),d?void r.stop():void a.set({enable:t.pointers.length>1})}.bind(this)),r.on("tap",function(t){this.initState===this.INIT_STATE.Initialized&&"mouse"===t.pointerType&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(t,this.spinContainerRect)))}.bind(this)),r.on("doubletap",function(t){t.preventDefault(),t.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&"mouse"!==t.pointerType&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(t,this.spinContainerRect)))}.bind(this)),r.on("panstart",function(t){s=t,n=this.currentFrameIndex(),i=this.currentRowIndex()}.bind(this)),r.on("pan",function(t){if(this.initState===this.INIT_STATE.Initialized){t.preventDefault(),t.srcEvent.stopPropagation(),n=n||this.currentFrameIndex(),i=i||this.currentRowIndex(),s=s||t;var e={x:t.deltaX-s.deltaX,y:t.deltaY-s.deltaY},r={x:t.deltaX,y:t.deltaY};s=t,h(r,e)}}.bind(this)),r.on("panend",function(t){s=t,n=this.currentFrameIndex(),i=this.currentRowIndex()}.bind(this)),r.on("pinchstart",function(e){if(this.initState===this.INIT_STATE.Initialized){var i=this.getCurrentZoomer();i.fullImageStatus===i.FULL_IMAGE_STATUS.NotLoaded&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.loadFullImage.call(this,i,this.getEventPositionRelativeToTarget(e,this.spinContainerRect))),t=i.getCurrentImageDisplaySize(),l.set({enable:!1})}}.bind(this)),r.on("pinch",function(e){e.preventDefault(),e.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&this.getCurrentZoomer().scale(t,e.scale,this.getEventPositionRelativeToTarget(e,this.spinContainerRect),u)}.bind(this)),r.on("pinchend",function(){this.initState===this.INIT_STATE.Initialized&&p()}.bind(this)),this.containers.spin.addEventListener("mousewheel",m),this.containers.spin.addEventListener("DOMMouseScroll",m),this.hasError.subscribe(function(t){this.viewModel.isErrorPageVisible(t)}.bind(this))},a.prototype.getMatrixShift=function(t,e,i,n){var s=(t?-1:1)*this.params.spinSpeed*e*i/n;return s>0?Math.floor(s):Math.ceil(s)},a.prototype.getRemoteFrameIndex=function(t,e){var i=(t+e)%this.frames[0].length;return 0>i&&(i=this.frames[0].length+i),i},a.prototype.getRemoteRowIndex=function(t,e){var i=(t+e)%this.frames.length;return 0>i&&(i=this.frames.length+i),i},a.prototype.loadAssets=function(t,e,i){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=null,this.assetsProvider.getAssets(t,function(t){return t.maxSize.width&&t.maxSize.height?(this.loadedAssets=t,void("function"==typeof e&&e(t))):void("function"==typeof i&&i())}.bind(this),i)},a.prototype.setAssets=function(t){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=t},a}),define("bindings/fadeVisible",["ko","$"],function(t,e){"use strict";function i(){}return i.prototype.init=function(i,n){var s=n();e(i).toggle(t.unwrap(s))},i.prototype.update=function(i,n){var s=n();t.unwrap(s)?e(i).fadeIn():e(i).fadeOut()},t.bindingHandlers.fadeVisible=new i,t.bindingHandlers.fadeVisible}),define("spinViewer/component",["$","spinViewerView","utils/scene7.config","utils/scene7.ImageLoader","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider","spinViewer/ViewModel","spinViewer/Controller","bindings/fadeVisible"],function(t,e,i,n,s,r,o,a,l){"use strict";return{viewModel:{createViewModel:function(e,c){var d=t({}),u=t({}),h={window:window,root:c.element,spin:c.element.querySelector(".amp-spin"),images:c.element.querySelector(".amp-spin .amp-images")},p=new i(e.scene7.imageServer,e.scene7.videoServer),m=new s(p),f=new r(p,m),v=new o(f),g=new n(p,e.viewer.useCors),b=new a(d,e.messages);e.viewer.zoomFactors.container&&(e.viewer.zoomFactors=e.viewer.zoomFactors.container);var y=new l(v,g,e.viewer,b,h,u),S={setAssets:y.setAssets.bind(y),loadAssets:y.loadAssets.bind(y),init:y.init.bind(y),zoomIn:y.zoomIn.bind(y),zoomOut:y.zoomOut.bind(y),zoomReset:y.zoomReset.bind(y),events:y.events};return e.api(S),b}},template:e,synchronous:!0}}),define("Asos.Utils.MediaPlayers",["videoPlayer/component","videoPlayer/DataMapper","videoPlayer/AssetsProvider","spinViewer/component","utils/scene7.config","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider"],function(t,e,i,n,s,r,o,a){"use strict";function l(){this.videoPlayer=t,this.spinViewer=n}return l.prototype.getSpinViewerAssetsProvider=function(t){var e=new s(t),i=new r(e),n=new o(e,i);return new a(n)},l.prototype.getVideoPlayerAssetsProvider=function(t){var n=new s(null,t),o=new r(n),a=new e(n);return new i(n,o,a)},new l}),define("ProductUtils/Cookies",["Utils"],function(t){return function(){this.getXSiteOrigin=function(){var e=t.Cookies.readCookie("x-site-origin",!0);return e?e:null}}}),define("ProductUtils/NewRelicLogger",["PageConfig"],function(t){var e=function(){var e;this.init=function(t){e=t},this.logError=function(i,n){window.newrelic&&(n.pageVersion=t.version,n.pageUrl=window.location.href,n.pageType=e,window.newrelic.addPageAction(i.message,n))}};return e.prototype.PAGE_TYPE={PRD:"ProductPage.SingleProduct",GRP:"ProductPage.MixAndMatch"},e.prototype.ERROR_TYPE={AjaxError:"Ajax Error",ParseError:"Parse Error",UserActionFailed:"User Action Failed"},new e}),define("ProductUtils/UrlUtils",["PageConfig"],function(t){return function(){this.formatUrl=function(e){return e?"http"===e.substring(0,4)?t.shouldUseHttps?e.replace("http:","https:"):e:"/"===e.substring(0,1)?e:"//"+e:e},this.getUrlParam=function(t,e){e||(e=location.href),t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",n=new RegExp(i),s=n.exec(e);return null===s?null:s[1]},this.getVariantFromUrl=function(t,e){var i=t.split("?")[0];if(i=void 0!==i&&null!==i?i.split("/prd/"):null,i.length>0&&(i=parseInt(i[1])),i||(i=parseInt(this.getUrlParam("iid",t))),!i)return null;for(var n=0;n<e.length;n++)if(e[n].variantId===i)return e[n];return null}}}),define("ProductUtils/Ajax",["$","uuid","ProductUtils/Cookies","ProductUtils/NewRelicLogger","ProductUtils/UrlUtils"],function(t,e,i,n,s){return function(){function r(t,e){if(!e)return t;var i="";return Object.keys(e).sort().forEach(function(n){var s=e[n];void 0!==s&&null!==s&&(t.indexOf(n+"=")>-1||(i+="&"+n+"="+s))}),-1===t.indexOf("?")&&(i="?"+i.slice(1)),t+i}this.execute=function(e){var o,a,l="ProductPage",c=new i,d=new s;e.callerContext?l+="."+e.callerContext:l=!1,a=void 0!==e.retryCount?e.retryCount:null,o=void 0!==e.authorization?e.authorization:null,void 0===e.cache&&(e.cache=!0);var u=r(e.url,e.storeParams),h={},p=d.getUrlParam("x-site-origin")||c.getXSiteOrigin();return p&&(h["x-site-origin"]=p),t.ajax({cache:e.cache,url:u,data:h,tryCount:0,retryLimit:a,dataType:e.dataType,jsonpCallback:e.jsonpCallback,beforeSend:function(t){this.addRequestHeaders(t,l,o)}.bind(this),success:function(t){this.successRequest(e.successCallback,t,e.callbackArgs)}.bind(this),error:function(i){return n.logError(new Error(n.ERROR_TYPE.AjaxError),{apiName:e.apiName,requestUrl:u,status:i.status,caller:e.callerContext,response:i.response,xSiteOrigin:p,requestHeaders:i.headers,responseHeaders:i.getAllResponseHeaders()}),null!==this.retryLimit&&this.tryCount<=this.retryLimit?(this.tryCount++,void t.ajax(this)):void this.errorRequest(e.errorCallback,i,e.callbackArgs)}.bind(this)})},this.addRequestHeaders=function(t,i,n){if(t.headers={},i!==!1){var s=e();t.setRequestHeader("asos-c-name",i),t.setRequestHeader("asos-cid",s),t.headers["asos-c-name"]=i,t.headers["asos-cid"]=s}null!==n&&(t.setRequestHeader("Authorization",n),t.headers.Authorization=n)},this.successRequest=function(t,e,i){t&&t(e,i)},this.errorRequest=function(t,e,i){t&&t(e,i)}}}),define("ProductUtils/StockPrice",["$","ProductUtils/Ajax","Product.Config","PageConfig"],function(t,e,i,n){return function(){this.ajax=new e,this.getStockPrice=function(t,e,i){if(void 0!==t&&null!==t){var n=void 0===t.products?t.id:t.productIds;this.requestData(t,e,n,i)}},this.requestData=function(t,e,s,r){this.ajax.execute({storeParams:{store:n.storeCode,currency:n.currency,keyStoreDataversion:n.keyStoreDataversion},url:i.stockPriceUrl+s,apiName:"Product Catalogue",callerContext:"StockPrice",successCallback:this.successRequest.bind(this),errorCallback:r,retryCount:5,callbackArgs:{callback:e,products:t}})},this.successRequest=function(t,e){var i=this.combineData(e.products,t),n=void 0===i.productIds?i.isInStock:!0;this.setStockClass(n),e.callback(i)},this.combineData=function(t,e){var i,n=void 0!==t.products,s=this.createVariantMap(t,n);if(n){for(var r={},o=0;o<t.products.length;o++)r[t.products[o].id]=o;var a=[];a.length=e.length;for(var l=0;l<e.length;l++){var c=r[e[l].productId];a[c]=e[l]}for(var d=0;d<t.products.length;d++)t.products[d]=this.mergeJsons(t.products[d],a[d]);i=t;for(var u=[],h=0;h<t.products.length;h++)u.push(this.mapVariantData(t.products[h],i.products[h],s[t.products[h].productId]));return i.products=u,i}return s=s[t.id],i=this.mergeJsons(t,e[0]),this.mapVariantData(t,i,s)},this.mapVariantData=function(t,e,i){for(var n=!1,s=0;s<t.variants.length;s++)n||(n=e.variants[s].isInStock),e.variants[s].size=i[e.variants[s].id].size,e.variants[s].sizeOrder=i[e.variants[s].id].sizeOrder,e.variants[s].colour=i[e.variants[s].id].colour,e.variants[s].colourWayId=i[e.variants[s].id].colourWayId,e.variants[s].isPrimary=i[e.variants[s].id].isPrimary,e.variants[s].sizeId=i[e.variants[s].id].sizeId,e.variants[s].productImage=void 0!==t.productImage?t.productImage.url:"";return e.isInStock=n,e},this.createVariantMap=function(t,e){var i=[];if(e)for(var n=0;n<t.products.length;n++)i[t.products[n].id]=[],i=this.loopVariants(t.products[n],i);else i[t.id]=[],i=this.loopVariants(t,i);return i},this.loopVariants=function(t,e){for(var i=0;i<t.variants.length;i++){var n=t.variants[i].variantId;e[t.id][n]=t.variants[i]}return e},this.mergeJsons=function(t,e){var i=JSON.parse(JSON.stringify(t)),n=JSON.parse(JSON.stringify(e));for(var s in n)try{i[s]=n[s]}catch(r){console.warn("couldn't merge JSONS: "+r)}return i},this.setStockClass=function(e){var i=e?"pg-in-stock":"pg-out-of-stock";t(".asos-product").hasClass("pg-out-of-stock")||t(".asos-product").hasClass("pg-out-of-stock")||t(".asos-product").addClass(i)}}}),define("Models/VariantDecorator",[],function(){return function(){var t=this;t.getData=function(t,e){e=void 0===e?!1:e;var i=void 0!==t.productImage?[t.productImage]:t.images,n={};if(i)for(var s=0;s<i.length;s++){var r=i[s];if(r.colourWayId){var o=n[r.colourWayId];void 0===o&&(n[r.colourWayId]=r.colour)}}var a=t.variants;a.sort(function(t,e){var i=e.colour.localeCompare(t.colour);return 0===i?e.sizeOrder-t.sizeOrder:i});var l,c=t.productId?t.productId:t.id,d=a.length,u=[],h={productId:c,colours:[],rrpPrice:void 0,maxPrevPrice:void 0,minPrice:void 0,isInStock:!1},p=0;for(a.length>0&&a[0].price.isOutletPrice&&(h.rrpPrice=a[0].price.rrp);d--;){var m=a[d];m.productId=c,void 0===h.hasDifferentPrices&&m.isInStock&&(void 0===l?l=m.price.current:m.price.current.value!==l.value&&(h.hasDifferentPrices=!0));var f=e||m.isInStock;f&&(void 0===h.minPrice||h.minPrice.value>m.price.current.value)&&(h.minPrice=m.price.current);var v=m.isInStock;m.colourName=n[m.colourWayId];var g=u[m.colour];void 0===g&&(h.colours.push({colour:m.colour,colourName:m.colourName,variants:[]}),g=u[m.colour]={index:p,variantsInStock:0},p++),v&&(g.variantsInStock++,h.isInStock||(h.isInStock=!0));var b=h.colours[g.index];b.variants.push(m),(void 0===g.lowestPrice||g.lowestPrice.value>m.price.current.value)&&(g.lowestPrice=m.price.current),void 0===h.rrpPrice&&m.price.isMarkedDown&&(void 0===g.maxPreviousPrice||g.maxPreviousPrice.value<m.price.previous.value)&&(g.maxPreviousPrice=m.price.previous)}for(var y=Object.keys(u),S=y.length-1;S>=0;S--){var w=u[y[S]];if(e||0!==w.variantsInStock){var I=h.colours[S];void 0!==w.maxPreviousPrice&&(void 0===h.maxPrevPrice||h.maxPrevPrice.value<w.maxPreviousPrice.value)&&(h.maxPrevPrice=w.maxPreviousPrice),I.price=w.lowestPrice,I.prevPrice=w.maxPreviousPrice}else h.colours.splice(w.index,1)}return h}}}),define("text",{load:function(t){throw new Error("Dynamic load not allowed: "+t)}}),define("text!Components/product-image/product-image.html",[],function(){return'<div class="grid-row">\r\n    <img data-bind="attr: { src: imgUrl }"/>\r\n    <div data-bind=\'component:{\r\n            name: "save-button",\r\n            params:{\r\n                productId: productId,\r\n                state: state,\r\n                productImage : imgUrl,\r\n                context : context\r\n                  }\r\n           }\'></div>\r\n</div>\r\n'}),define("Models/RecentlyViewedStorage",[],function(){return function(){function t(){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()+o),t}function e(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e)return{item:t[i],index:i};return null}function i(t){this.localStorageSupported&&s.setItem(n,JSON.stringify(t))}var n="RecentlyViewed",s=window.localStorage,r=25,o=30;return this.localStorageSupported=!0,this.ProductItem=function(t,e,i,n,s){this.id=t,this.img=e,this.url=i,this.title=n,this.mixMatch=s},this.checkLocalStorageSupport=function(){if("object"==typeof localStorage)try{localStorage.setItem("testStorage",1),localStorage.removeItem("testStorage")}catch(t){this.localStorageSupported=!1}},this.checkLocalStorageSupport(),this.addItem=function(n){var s=this.getItems(),o=e(s,n.id);n.expiryDate=t(),null!==o&&void 0!==o?(s.splice(o.index,1),s.splice(0,0,n)):(s.length===r&&s.splice(-1,1),s.splice(0,0,n)),i(s)},this.removeItem=function(t){var n=this.getItems(),s=e(n,t);void 0!==s&&null!==s&&(n.splice(s.index,1),i(n))},this.getItems=function(){var t=null;if(this.localStorageSupported&&(t=s.getItem(n)),null===t)return[];var e=new Date,r=JSON.parse(t),o=r.filter(function(t){return void 0===t.expiryDate||null===t.expiryDate||new Date(t.expiryDate)>e});return o.length!==r.length&&i(o),o},this.setExpiryInDays=function(t){void 0!==t&&null!==t&&!isNaN(t)&&parseInt(t)&&(o=t)},this.getExpiryInDays=function(){return o},this.clear=function(){i([])},this}()}),define("ProductUtils/features/manifest",[],function(){return{features:{},mvt:{"t1280-web-selling-fast":{},"t1270-web-fit-assistant-redesign":{}}}}),define("ProductUtils/features/features",["asos-web-features","./manifest"],function(t,e){var i=t["default"].getInstance();return i.addManifest(e,{}),i}),define("ProductUtils/Analytics",["$","ProductUtils/UrlUtils","Models/RecentlyViewedStorage","PageConfig","ProductUtils/features/features"],function(t,e,i,n,s){var r=function(){this.url=new e,this.log=this.url.getUrlParam("analytics"),this.base="tracking.productPage.";var r=this;window.product=[],this.applyStandardEventData=function(e){var i={keyStoreDataVersion:n.keyStoreDataversion,selectedCountry:n.countryCode,selectedCurrency:n.currency,selectedLanguage:n.language,selectedSizeSchema:n.sizeSchema,sitechromeTemplateVersion:n.siteChromeTemplateVersion},s=t.extend({},e,i);return s},this.fireEvent=function(e,i,n){var s=this.applyStandardEventData(i),r=(n?"":this.base)+e;"true"===this.log&&console.log(r,s),t(window).trigger(r,s)};var o={entryScreen_landed:1,entryScreen_submit:2,entryScreen_tooltip:3,enterData_height_metric:4,enterData_weight_metric:5,"enterData_BC-size":6,"enterData_BC-brand":7,"enterData_purchase history":8,enterData_clw_block_bra:9,enterData_uclw_block_bra:10,immediateRecommendation_upper:11,immediateRecommendation_lower:12,immediateRecommendation_shoes:13,bcScreen_landed:14,bcScreen_skip:15,bcScreen_submit:16,lbwBcScreen_landed:17,lbwBcScreen_skip:18,lbwBcScreen_submit:19,managePurchasesScreen_landed:20,managePurchasesScreen_submit:21,managePurchasesScreen_skip:22,lbwRiseScreen_landed:23,lbwRiseScreen_submit:24,lbwSizeSelectScreen_landed:25,lbwSizeSelectScreen_submit:26,lbwCategoryScreen_landed:27,lbwCategoryScreen_submit:28,lbwCategoryScreen_skip:29,shapeSelectScreen_1_landed:30,shapeSelectScreen_1_skip:31,shapeSelectScreen_1_submit:32,shapeSelectScreen_1_tooltip:33,shapeSelectScreen_2_landed:34,shapeSelectScreen_2_skip:35,shapeSelectScreen_2_submit:36,shapeSelectScreen_2_tooltip:37,ageScreen_landed:38,ageScreen_skip:39,ageScreen_submit:40,braScreen_landed:41,braScreen_skip:42,braScreen_submit:43,resultsScreen_initial_landed:44,resultsScreen_final_landed:45,sizeRecommendation_returning_lower_results_sp:46,sizeRecommendation_returning_upper_results_sp:47,sizeRecommendation_upper_results_sp:48,sizeRecommendation_lower_results_sp:49,sizeRecommendation_out_of_scale:50,close_lower_results_sp:51,close_upper_results_sp:52,close_brand_compare:53,close_upper_form:54,close_lower_form:55,close_upper_out_of_scale:56,outOfScaleScreen_landed:57,loadingScreen_open:58,loadingScreen_close:59,loadingScreen_timeout:60,entryScreen_close:61,outOfScaleScreen_back:62,outOfScaleScreen_close:63,brandCompareScreen_landed:64,brandCompareScreen_back:65,brandCompareScreen_submit:66,brandCompareScreen_close:67,brandCompareScreen_skip:68,initialResultsScreen_landed:69,initialResultsScreen_close:70,initialResultsScreen_back:71,finalResultsScreen_landed:72,finalResultsScreen_close:73,finalResultsScreen_back:74,tummyShapeScreen_landed:75,tummyShapeScreen_back:76,tummyShapeScreen_submit:77,tummyShapeScreen_close:78,tummyShapeScreen_skip:79,hipShapeScreen_landed:80,hipShapeScreen_back:81,hipShapeScreen_submit:82,hipShapeScreen_close:83,hipShapeScreen_skip:84,ageScreen_back:86,ageScreen_close:88,braScreen_back:91,braScreen_close:93,managePurchasesScreen_back:96,managePurchasesScreen_close:98,lowerCategoryScreen_landed:100,lowerCategoryScreen_back:101,lowerCategoryScreen_submit:102,lowerCategoryScreen_close:103,lowerCategoryScreen_skip:104};this.getFitAnalyticsEventCode=function(t,e){if(t&&e){var i=t+"_"+e,n=o[i];return n?n:t+":"+e}},this.addVariants=function(t,e,i){var n=[],s=0;t=void 0===t.length?[t]:t;for(var r=0;r<t.length;r++){var o=void 0===t[r].price.current?t[r].price:t[r].price.current.value;s+=o,n.push({productIID:t[r].productId,variantIID:t[r].variantId,units:t.length,salePrice:o,sellingFast:t[r].sellingFast})}if(e){var l={context:"addToBagError",totalValue:s,productsAdded:n.length,addToBagType:i,products:n,errorCode:e.message[0].errorCode,errorId:e.message[0].errorMessage};this.fireEvent("addToBag",a(l),!1)}else{var c={context:"addToBag",totalValue:s,productsAdded:n.length,addToBagType:i,products:n};this.fireEvent("addToBag",a(c),!1)}};var a=function(t){if(t&&window.fitAnalyticsData)for(var e in window.fitAnalyticsData)window.fitAnalyticsData.hasOwnProperty(e)&&"context"!==e&&(t[e]=window.fitAnalyticsData[e]);return t};this.saveVariants=function(t,e){e=void 0===e?"main":e;for(var i=0;t.length>i;i++)this.fireEvent("saveForLater",{context:"saveForLater",productIID:t[i].productId,variantIID:t[i].variantId,saveForLaterType:e,SellingFast:t[i].sellingFast})};var l=function(t){var e=r.getRecommendationState(t.recommendationType),i={faState:e,faUserProfile:t.hasPreviousPurchaseData?"previous purchase data":"no previous purchase data",faSignedInStatus:t.userSignedIn?"signed in":"not signed in",faSizeRegion:n.storeCode.toLowerCase()};return t.bodyCategory&&(i.faBodyCategory=t.bodyCategory),t.recommendedSize&&(i.faRecommendedSize=t.recommendedSize),window.fitAnalyticsData=i,i};this.fireFitAnalyticsOutOfScaleEvent=function(t){var e=l(t);e.context="out of scale",this.fireEvent("fitAnalyticsInteraction",e,!1)},this.fireFitAnalyticsSaveSelectionsEvent=function(t){t.context="save selections",this.fireEvent("fitAnalyticsInteraction",t,!1)},this.fireFitAnalyticsOpenWidgetEvent=function(t){var e=l(t);e.context="launch widget",this.fireEvent("fitAnalyticsInteraction",e,!1)},this.fireFitAnalyticsCloseWidgetEvent=function(t){var e=l(t);e.context="close widget";var i=[];if(t.widgetScreenEvents)for(var n=0;n<t.widgetScreenEvents.length;n++){var s=t.widgetScreenEvents[n],r=this.getFitAnalyticsEventCode(s.event,s.value);r&&i.push(r)}e.viewedScreens=i.join(","),this.fireEvent("fitAnalyticsInteraction",e,!1)},this.fireFitAnalyticsLoadEvent=function(t){var e=l(t);e.context="fit analytics impression",s.ifActive("t1270-web-fit-assistant-redesign",!0).then(function(t){e.mvtTestName=t?t.mvtExperience:void 0,this.fireEvent("fitAnalyticsImpression",e,!1)}.bind(this))},this.getRecommendationState=function(t){switch(t){case 1:return"first time interaction";case 2:return"partial recommendation";case 3:return"full recommendation";case 4:return"recommendation not in stock"}},this.getVariantStockStatus=function(t){var e=[];if(!t)return e;for(var i=0;i<t.length;i++){var n=t[i],s={variantId:n.variantId,stockStatus:n.isInStock?"in stock":"out of stock"};e.push(s)}return e},this.fireProductLoadEvent=function(t){var e=this.hasRecentlyViewed(),i=this.getSizes(t.variants),s=void 0!==t.productPrice?t.productPrice:t.price,r={IsMarkDown:s.isMarkedDown,OriginalPrice:s.xrp,CurrentPrice:s.current,ProductIID:t.id,MixMatchIID:!1,TotalSku:t.variants.length,AvailbleSku:this.getSkus(t.variants),RecentlyViewedAvailible:e>0?!0:!1,IsInStock:t.isInStock,TotalColours:Object.keys(t.colourImageMap).length,ProductURL:location.protocol+"//"+location.host+location.pathname,TotalSizes:i[0],AvailibleSizes:i[1],StockStatus:t.isInStock,VariantStockStatus:this.getVariantStockStatus(t.variants),PreviusCatagoryPageNumber:this.url.getUrlParam("pge"),PreviusCatagoryGridSize:this.url.getUrlParam("gridsize"),PreviusCatagoryTotalstyles:this.url.getUrlParam("totalstyles"),PreviusCatagoryRowColumn:this.url.getUrlParam("gridrow")||this.url.getUrlParam("gridcolumn")?this.url.getUrlParam("gridrow")+"/"+this.url.getUrlParam("gridcolumn"):null,PreviusCatagoryPageSize:this.url.getUrlParam("pgesize"),CID:this.url.getUrlParam("cid"),SearchTerm:decodeURI(this.url.getUrlParam("SearchQuery")),BreadCrumb:n.breadcrumb,Platform:n.platform,StoreID:n.storeId,PageType:"product",PageName:n.pageTitle,Channel:n.gender,ProductCategoryName:this.getCatName(),ProductCode:t.productCode,AppVersion:n.version,SellingFast:t.sellingFast};this.signal(r),this.fireEvent("pageLoad",r,!1)},this.fireMixMatchLoadEvent=function(t){var e=this.hasRecentlyViewed(),i={MixMatchIID:t.id.replace("m",""),IsInStock:this.mixMatchInStock(t.products),ProductURL:location.protocol+"//"+location.host+location.pathname,PreviusCatagoryPageNumber:this.url.getUrlParam("pge"),PreviusCatagoryGridSize:this.url.getUrlParam("gridsize"),PreviusCatagoryTotalstyles:this.url.getUrlParam("totalstyles"),PreviusCatagoryRowColumn:this.url.getUrlParam("gridrow")||this.url.getUrlParam("gridcolumn")?this.url.getUrlParam("gridrow")+"/"+this.url.getUrlParam("gridcolumn"):null,
PreviusCatagoryPageSize:this.url.getUrlParam("pgesize"),CID:this.url.getUrlParam("cid"),SearchTerm:decodeURI(this.url.getUrlParam("SearchQuery")),BreadCrumb:n.breadcrumb,AvailibleProducts:t.productIds,RecentlyViewedAvailible:e>0?!0:!1,Platform:n.platform,StoreID:n.storeId,PageType:"mix&match",PageName:n.pageTitle,Channel:n.gender,ProductCategoryName:this.getCatName(),AppVersion:n.version};this.signal(i),this.fireEvent("pageLoad",i,!1)},this.signal=function(t){window.Product=t},this.mixMatchInStock=function(t){for(var e=!1,i=0;i<t.length;i++)t[i].isInStock&&(e=!0);return e},this.hasRecentlyViewed=function(){return i.getItems().length},this.getCatName=function(){for(var t=n.breadcrumb.split("/"),e="",i=2;i<t.length-1;i++)e+=2===i?t[i]:" | "+t[i];return e},this.getSkus=function(t){for(var e=0,i=0;i<t.length;i++)t[i].isInStock===!0&&e++;return e},this.getSizes=function(t){for(var e=[],i=0,n=0,s=0;s<t.length;s++)void 0===e[t[s].size]&&(i++,e[t[s].size]=!0,t[s].isInStock&&n++);return[i,n]},this.fireFeatureAnalytics=function(t){var e=window.s_gi(window.s.account);e.eVar9=t,window.mvtTestName=t}};return new r}),define("ProductUtils/Bag",["Asos.Commerce.Bag.Sdk","$","ProductUtils/Analytics","ProductUtils/NewRelicLogger"],function(t,e,i,n){return function(e,s){function r(t){return{productId:t.productId,colour:t.colourName,sizeId:t.sizeId,variantId:t.variantId,price:t.price.current.value,sellingFast:e.state.sellingFast}}return this.initiator=s,this.error="",void 0!==e&&(this.error=e.state.resources.ErrorMaxDescription),this.addItems=function(e,i){var n,s=e.length>1?!0:!1;if(s){var o=this.formatAddProducts(e);n=t.addVariants(o),this.watchPromise(n,i,o,this.initiator)}else{var a=void 0!==e[0]?e[0]:e;a.colourName=void 0===a.colourName?a.colour:a.colourName;var l=r(a);n=t.addVariant(l),this.watchPromise(n,i,l,this.initiator)}},this.formatErrorMessage=function(t){var e=t.userMessage||"";return t.hasOwnProperty("messageContext")&&t.messageContext&&t.messageContext.length>0&&(e=e.replace(/{(\d)}/g,function(e,i){var n=t.messageContext[parseInt(i,10)];return n?n:"..."})),e},this.watchPromise=function(t,e,s,r){t.then(function(){return i.addVariants(s,!1,r),e({success:!0,error:""})},function(t){var o;i.addVariants(s,t,r),o="LegacyQuantityLimitReached"===t.message[0].errorCode?this.error:this.formatErrorMessage(t.message[0]),n.logError(new Error(n.ERROR_TYPE.UserActionFailed),{action:"AddToBag",additionalData:JSON.stringify(s),message:o}),e({success:!1,error:o})}.bind(this))},this.formatAddProducts=function(t){for(var e=[],i=0;i<t.length;i++){var n=r(t[i]);n.colourName=void 0===n.colourName?n.colour:n.colourName,e.push(n)}return e},this}}),define("Components/product-image/product-image",["ko","text!./product-image.html","ProductUtils/Bag"],function(t,e,i){function n(e){this.imgUrl=e.imgUrl;var n=e.data,s=new i;this.state=e.state,this.productId=e.productId,this.saveForLaterCalled=t.observable(!1),this.context=e.context,this.saveForLater=function(){this.saveForLaterCalled()!==!0&&(s.saveProduct(n),this.saveForLaterCalled(!0))}.bind(this)}return{viewModel:n,template:e}}),define("text!Components/product-price/product-price.html",[],function(){return'<div class="grid-row rendered">\r\n    <span data-id="from-price" data-bind="visible: showFromLabel, text: fromLabelText, css: { \'price-from-discounted\' : isDiscountedPrice }" class="price-from"></span>\r\n    <span data-id="current-price" data-bind="text: priceText(), css: {\'product-price-discounted\' : isDiscountedPrice }, markAndMeasure: \'pdp:price_displayed\'" class="current-price"></span>\r\n    <span data-id="rrp-price" data-bind="text: rrpPriceText, visible: showRrpPrice" class="product-prev-price"></span>\r\n    <span data-id="previous-price" data-bind="text: prevPriceText, visible: showPrevPrice" class="product-prev-price"></span>\r\n    <span data-id="german-vat-message" data-bind="text: germanVatMessage, visible: showGermanVatMessage" class="product-german-vat"></span>\r\n</div>\r\n<!-- ko if: showPrevPrice -->\r\n<div class="clear-element"></div>\r\n<!-- /ko -->'}),define("Components/product-price/product-price",["ko","text!./product-price.html","ProductUtils/Ajax"],function(t,e,i){function n(e){this.ajax=new i;var n=e.state,s=n.productData;this.showRrpPrice=void 0!==s.rrpPrice,this.rrpPriceText=this.showRrpPrice?n.resources.Rrp+" "+s.rrpPrice.text:"",this.showGermanVatMessage=e.showGermanVatMessage?!0:!1,this.germanVatMessage=e.state.resources.GermanVatMessage,this.isDisplayPrice=e.isDisplayPrice,this.prevPriceText=t.computed(function(){return void 0===n.selectedColour()&&void 0!==s.maxPrevPrice?s.maxPrevPrice.text:void 0!==n.selectedColour()&&void 0!==n.selectedColour().prevPrice?n.selectedColour().prevPrice.text:""}.bind(this)),this.showPrevPrice=t.computed(function(){return""!==this.prevPriceText()}.bind(this)),this.showFromLabel=t.computed(function(){return void 0===s.hasDifferentPrices?!1:void 0!==n.selectedColour()?!1:!0}),this.fromLabelText=n.resources.From,this.isDiscountedPrice=t.computed(function(){return this.showPrevPrice()||this.showRrpPrice}.bind(this));var r;r=void 0===n.selectedColour()?s.minPrice:n.selectedColour().price,this.price=t.observable(r),this.isDisplayPrice&&this.price.subscribe(function(t){e.state.displayPrice(t.value)}.bind(this)),this.priceText=t.computed(function(){return void 0===this.price()?"":this.price().text}.bind(this)),n.selectedColour.subscribe(function(t){t?this.price(t.price):this.price(s.minPrice)}.bind(this))}return{viewModel:n,template:e}}),define("text!Components/social-share/social-share.html",[],function(){return'<div class="share-bar-wrap" data-bind="visible:visible, style: { left: x, top:y}">\r\n    <div class="triangle-up"></div>\r\n    <div id="share-bar">\r\n        <div id="gigya-share"></div>\r\n    </div>\r\n</div>'}),define("Components/social-share/social-share",["ko","text!./social-share.html","$","PageConfig","ProductUtils/Analytics"],function(t,e,i,n,s){function r(e){function r(t){var e=void 0!==t?t.shareItem.provider:null,i=p.id+"";i=i.replace("m",""),s.fireEvent("pageInteraction",{context:"socialShare",socialPlatform:e,productIID:i})}var o=i(".social-share-icon-desktop"),a=i(".social-share-icon-mobile"),l=i(".share-bar-wrap"),c=i("#social-share"),d=-26,u=40;this.x=t.observable(0),this.y=t.observable(0),this.visible=t.observable(!1),this.images=e.data.images;var h,p=e.data,m=p.images[0].url,f=p.name,v=document.URL,g=!1,b=n.platform;h="US"===n.countryCode?this.SOCIAL_SERVICES[0].us:this.SOCIAL_SERVICES[0].uk,h="desktop"===b?h.desktop:h.mobile;var y={type:"image",src:m,href:v};this.document=i(document),this.open=function(){g||(g=!0,r()),this.document.bind("click",function(){this.visible(!1),this.document.unbind("click")}.bind(this))},this.isGigyaLoaded=function(){return document.querySelector("#gigya-script")},this.downloadGigya=function(t){var e=document.createElement("script"),i="3_Gl66L3LpFTiwZ8jWQ9x_4MLyUUHPRmPtRni0hzJ9RH5WA2Ro6tUv47yNXtKn3HQ8";e.setAttribute("type","text/javascript"),e.setAttribute("id","gigya-script"),e.setAttribute("src","https://cdns.gigya.com/JS/gigya.js?apiKey="+i),document.querySelector("head").appendChild(e),e.onload=function(){var e=new gigya.socialize.UserAction;e.addMediaItem(y),e.setTitle(f),e.setDescription(f),e.setLinkBack(y.href);var i={userAction:e,containerID:"gigya-share",iconsOnly:!0,enableCounter:!1,deviceType:b,shareButtons:h,onShareButtonClicked:r};gigya.socialize.showShareBarUI(i),t()}},this.loadGigya=function(t){this.isGigyaLoaded()?t():this.downloadGigya(t)},this.sharedClickHandler=function(t,e){return t.preventDefault(),this.loadGigya(function(){this.open(),l.toggleClass("mobile",e).toggleClass("desktop",!e),c.appendTo(e?a:o),this.visible()?this.visible(!1):(this.visible(!0),e||(this.x(d+"px"),this.y(u+"px")))}.bind(this)),!1},a.click(function(t){return l.is(t.target)?!1:this.sharedClickHandler(t,!0)}.bind(this)),o.click(function(t){return l.is(t.target)?!1:this.sharedClickHandler(t,!1)}.bind(this))}return r.prototype.SOCIAL_SERVICES=[{uk:{desktop:[{provider:"pinterest"},{provider:"facebook"}],mobile:[{provider:"pinterest"},{provider:"facebook"},{provider:"whatsapp"},{provider:"email"}]},us:{desktop:[{provider:"pinterest"},{provider:"facebook"},{provider:"wanelo"}],mobile:[{provider:"pinterest"},{provider:"facebook"},{provider:"whatsapp"},{provider:"wanelo"},{provider:"email"}]}}],{viewModel:r,template:e}}),define("Components/content/content",[],function(){function t(t){this.state=t.state,this.product=t.data}return{viewModel:t}}),define("text!Components/out-of-stock/out-of-stock.html",[],function(){return'<!-- ko if: !inStock -->\r\n    <!-- ko if: productCode -->\r\n    <p class="product-code">\r\n        <span class="label" data-bind="text:productCodeLabel"></span>\r\n        <span data-bind="text:productCode"></span>\r\n    </p>\r\n    <!-- /ko -->\r\n    \r\n<div data-bind="visible: isMoreFromMessageVisible()"> \r\n    <div class="more-from">\r\n        <h2 data-bind="text:moreFromMessage"></h2>\r\n\r\n        <ul data-bind="foreach: moreFrom">\r\n            <li><a href="#" data-bind="attr: { href: $parent.getTrackedLinkUrl(linkUrl) }, text: friendlyName"></a></li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n<!-- /ko -->\r\n'}),define("Components/out-of-stock/out-of-stock",["ko","text!./out-of-stock.html"],function(t,e){function i(t){var e=t.state;if(this.inStock=e.productData.isInStock,this.inStock)return!1;this.moreFromMessage=e.resources.MoreFrom,this.youMightLikeMessage=e.resources.OutOfStockYouMightLike,this.productCodeLabel=e.resources.ProductCode,this.productCode=t.data.productCode;var i=t.data;this.moreFrom=i.categories,this.getYouMightLikeMessage=function(){return this.youMightLikeMessage.replace("<a>",'<a href="#YMAL">')},this.isMoreFromMessageVisible=function(){return!1},this.getTrackedLinkUrl=function(t){return t+(-1===t.indexOf("?")?"?":"&")+"CTAref=More+From"}}return{viewModel:i,template:e}}),define("text!Components/size-guide/size-guide.html",[],function(){return'<!-- ko if: render() -->\r\n<div class="size-guide-button">\r\n    <!-- ko if: !isMobile -->\r\n        <a href="#" data-bind="click : toggleSizeGuideVisibility, text : text"></a>\r\n    <!-- /ko -->\r\n    <!-- ko if: isMobile -->\r\n    <a href="#" target="_blank" data-bind="click: fireSizeGuideEvent, attr : { href : sizeGuideUrl }, text : text"></a>\r\n    <!-- /ko -->\r\n</div>\r\n\r\n<div class="size-guide" style="display: none;" data-bind="visible : sizeGuideVisible">\r\n    <div class="size-guide-modal">\r\n        <iframe frameborder="0" seamless="seamless" data-bind="attr: { src : sizeGuideUrl }"></iframe>\r\n    </div>\r\n    <a href="#close" class="size-guide-close" data-bind="click : toggleSizeGuideVisibility"></a>\r\n    <div class="size-guide-overlay" data-bind="click : toggleSizeGuideVisibility"></div>\r\n</div>\r\n\r\n<!-- /ko -->\r\n'}),define("Components/size-guide/size-guide",["ko","$","text!./size-guide.html","PageConfig","ProductUtils/Analytics"],function(t,e,i,n,s){function r(i){this.text=i.dictionary.SizeGuide,this.sizeGuideUrl=i.url,this.isMobile="mobile"===n.platform,this.sizeGuideVisible=t.observable(!1),this.render=i.visible,this.productId=i.productId,this.bindKeyUp=function(){e(document).on("keyup.closeSizeGuide",function(t){this.checkEvent(t)}.bind(this))},this.checkEvent=function(t){27===t.keyCode&&this.toggleSizeGuideVisibility()},this.unbindKeyUp=function(){e(document).unbind("keyup.closeSizeGuide")},this.fireSizeGuideEvent=function(){return s.fireEvent("pageInteraction",{context:"launchSizeGuide",productIID:i.id}),!0},this.toggleSizeGuideVisibility=function(){this.sizeGuideVisible(!this.sizeGuideVisible()),document.body.style.overflow=this.sizeGuideVisible()?"hidden":"",this.sizeGuideVisible()?(this.fireSizeGuideEvent(),this.bindKeyUp()):this.unbindKeyUp()}}return{viewModel:r,template:i}}),define("text!Components/recently-viewed/recently-viewed.html",[],function(){return'<!-- ko if: render -->\r\n<section>\r\n    <div class="layout-width recently-viewed" data-bind="visible: carousel.items().length > 0">\r\n        <div class="layout-module">\r\n            <h2 data-bind="text: title"></h2>\r\n            <div class="carousel">\r\n                <div class="row">\r\n                    <div class="arrows">\r\n                        <a class="arrow left-arrow" data-bind="click:carousel.moveLeft, css: {active : carousel.hasPreviousPanel }, visible: carousel.hasOtherPanels"><span></span></a>\r\n                    </div>\r\n                    <div class="window" data-bind="swipe">\r\n                        <ul class="slide-panel" data-bind="foreach: carousel.visibleItems, style: { width: carousel.width(), marginLeft:carousel.slidePosition()},css: { suppressSlide : !carousel.animate() }">\r\n                            <li data-bind="style: { width: $parent.carousel.itemWidth()}">\r\n\r\n                                <a data-bind="attr: { href: url }"><img data-bind="attr: { src: img }" /></a>\r\n\r\n                                <!-- ko if: !$parent.isMobile -->\r\n                                <a data-bind="click: $parent.removeItem.bind($data, id)" class="remove"><span class="product-closesmall">Remove</span></a>\r\n                                <!-- /ko -->\r\n\r\n                                <div data-bind=\'visible: $parent.showMixMatch($data), component:{name: "save-button",\r\n                                 params:{\r\n                                     productId: id,\r\n                                     productImage : img,\r\n                                     context:"recentlyviewed"\r\n                                 }\r\n                                 }\'></div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class="arrows">\r\n                        <a class="arrow right-arrow" data-bind="click:carousel.moveRight, css: {active : carousel.hasNextPanel }, visible: carousel.hasOtherPanels"><span></span></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <a href="#" class="clear" data-bind="click: clear, text: clearText">Clear</a>\r\n\r\n        </div>\r\n        <ul class="nav" data-bind="foreach: carousel.panels, visible: carousel.hasOtherPanels">\r\n            <li data-bind="click: $parent.carousel.currentPanel.bind($data)">\r\n                <a data-bind="css:{active:$parent.carousel.currentPanel() == $data}" href="#"></a>\r\n            </li>\r\n        </ul>\r\n  </div>\r\n</section>\r\n<!-- /ko -->\r\n\r\n\r\n'}),define("ProductUtils/debouncer",[],function(){return this.debounce=function(t,e,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||t.apply(s,r)},a=i&&!n;clearTimeout(n),n=setTimeout(o,e),a&&t.apply(s,r)}},this}),define("Models/CarouselControl",["ko","jquery","PageConfig","ProductUtils/debouncer"],function(t,e,i,n){return function(){var s=this,r=t.observable(4),o=4,a=2,l=t.observable(0),c="slide",d=t.observable(0),u=t.observable(),h="desktop"===i.platform.toLowerCase()?1:2,p=document.querySelector("html");s.events=e({}),s.items=t.observableArray(),s.panels=t.observableArray(),s.loop=t.observable(!1),s.animate=t.observable(!0),s.setData=function(t){void 0!==t&&null!==t&&t instanceof Array?this.items(t):s.items.removeAll()},s.currentPanel=t.computed({read:function(){return l()},write:function(t,e){s.animate(void 0===e?!0:e),t>=-1&&t<s.panels().length&&l(t)}}),s.itemsInView=t.computed({read:function(){return r()},write:function(t){t&&t>0&&(r(t),o=t)}}),s.panels.subscribe(function(){if(l()>=s.panels().length){var t=0===s.panels().length?0:s.panels().length-1;l(t)}});var m=function(t){for(var e=Math.ceil(t.length/r()),i=s.panels().length,n=i;e>n;n++)s.panels.push(n);for(var o=e;i>o;o++)s.panels.pop()};r.subscribe(function(){m(s.items())}),s.items.subscribe(m),s.width=t.computed(function(){var t=s.items().length>r()?100*s.items().length/r():100;return t+"%"}),s.itemWidth=t.computed(function(){var t=s.items().length>=r()?100/s.items().length:100/r();return t===1/0&&(t=0),t+"%"}),s.slidePosition=t.computed(function(){return d(),"slide"===c?"-"+100*Math.max(0,l())+"%":d()+"px"}),s.moveLeft=function(){s.animate(!0);var t;l()>0?(t=l()-1,l(t)):s.loop()&&(t=s.panels().length-1,l(t))},s.moveRight=function(){s.animate(!0),l()<s.panels().length-1?l(l()+1):s.loop()&&l(0)},s.hasPreviousPanel=t.computed(function(){return s.loop()?s.panels().length>1:l()>0}),s.hasNextPanel=t.computed(function(){return s.loop()?s.panels().length>1:s.panels().length>0&&l()+1<s.panels().length}),s.hasOtherPanels=t.computed(function(){return s.hasNextPanel()||s.hasPreviousPanel()}),s.setAnimationType=function(t){c=t};var f=function(t){s.itemsInView(t),s.events.trigger("resize")};s.resize=function(t,e,i,n){if(s.landscapePanels=i,s.portraitPanels=n,"mobile"===t)return s.setAnimationType("move"),f(e.innerWidth>e.innerHeight?i:n);if(p.classList.contains("MasterLayout"))return s.events.trigger("resize");var r=o;return e.innerWidth<=568?(f(Math.ceil(a)),void(o=r)):e.innerWidth<=720?(f(Math.ceil((o+a)/2)),void(o=r)):f(Math.ceil(o))},l.subscribe(function(t){!u()&&t>0&&u(!0)}),s.visibleItems=t.computed(function(){return u()?s.items():s.items.slice(0,Math.ceil(s.itemsInView())*h)}),window.addEventListener("resize",n.debounce(function(){s.resize(i.platform,window,s.landscapePanels,s.portraitPanels)})),t.bindingHandlers.swipe={init:function(t){e(t).scroll(function(){u()||u(!0)})}}}}),define("Components/recently-viewed/recently-viewed",["ko","$","text!./recently-viewed.html","Models/CarouselControl","Models/RecentlyViewedStorage","ProductUtils/Bag","ProductUtils/Analytics","ProductUtils/UrlUtils","PageConfig"],function(t,e,i,n,s,r,o,a,l){function c(e,i){function c(){var t=i.URL.split("?")[0].split("#")[0]+"?CTAref=Recently+Viewed",e=u.getUrlParam("clr",i.URL);return e&&(t+="&clr="+e),t}i=i||document;var d=e.state,u=new a;this.title=d.resources.RecentlyViewed,this.clearText=d.resources.Clear,this.disableSaveForLater=e.disableSaveForLater,this.isMobile="mobile"===l.platform,this.render=t.observable(!1),s.setExpiryInDays(e.expiryInDays),this.carousel=new n,this.carousel.itemsInView(5),this.carousel.resize(l.platform,window,3.7,1.7);var h=s.getItems();window.localStorage&&h.length>0&&this.render(!0);for(var p=0;p<h.length;p++)h[p].addedToBag=t.observable(!1);this.carousel.setData(h),this.bag=new r;var m=e.data,f=d.mainImage().url+"?$L$&wid=168&fit=constrain",v=void 0!==m.productIds?!0:!1;this.showMixMatch=function(t){return void 0!==t.mixMatch?!t.mixMatch:!1};var g=new s.ProductItem(m.id,f,c.call(this),m.name,v);s.addItem(g),this.url=t.observable(i.URL),this.removeItem=function(t){var e=this.carousel.items.remove(function(e){return e.id===t});e.length>0&&s.removeItem(t)}.bind(this),this.clear=function(){s.clear(),this.carousel.items.removeAll(),o.fireEvent("carouselAction",{context:"clearAll",carouselType:"recentlyviewed"}),d.submodulesCompleted.recentlyViewed(d.CAROUSEL_LOADING_STATE.NO_DATA)},d.submodulesCompleted.recentlyViewed(this.carousel.items().length>0?d.CAROUSEL_LOADING_STATE.HAS_DATA:d.CAROUSEL_LOADING_STATE.NO_DATA)}return{viewModel:c,template:i}}),define("text!Components/might-like/might-like.html",[],function(){return'<section>\r\n    <div class="layout-width you-might-also-like" data-bind="visible: carousel.items().length > 0">\r\n        <div class="layout-module">\r\n            <h2 data-bind="text: title"></h2>\r\n            <div class="carousel">\r\n                <div class="row">\r\n                    <div class="arrows">\r\n                        <a class="arrow left-arrow" data-bind="click:carousel.moveLeft, css: {active : carousel.hasPreviousPanel }, visible: carousel.hasOtherPanels"><span></span></a>\r\n                    </div>\r\n                    <div class="window" data-bind="swipe">\r\n                        <ul class="slide-panel" data-bind="foreach: carousel.visibleItems, style: { width: carousel.width(), marginLeft:carousel.slidePosition()},css: { suppressSlide : !carousel.animate() }">\r\n                            <li data-bind="style: { width: $parent.carousel.itemWidth()}">\r\n                                <a data-bind="attr: { href: $parent.getProductLink(id, $index())}">\r\n                                    <div class="product-tile">\r\n                                        <img data-bind="attr: { src: $parent.getImageSrc($data)}" />\r\n                                        <div data-bind=\'component:{\r\n                                            name: "save-button",\r\n                                            params:{\r\n                                                productId: id,\r\n                                                productImage : $parent.getImageSrc($data),\r\n                                                context : "youMightLike"\r\n                                                  }\r\n                                           }\'></div>\r\n                                        <div class="tile-info">\r\n                                            <h1 data-bind="text:$parent.formatTitle(name)"></h1>\r\n                                            <div class="price-container">\r\n                                                <span class="price" data-bind="text:$parent.getPriceText(price), css: { \'price-highlighed\' : $parent.isPriceDiscounted(price) }"></span>\r\n                                                <span class="discounted-price" data-bind="visible: $parent.isPriceDiscounted(price), text:$parent.getDiscountedPriceText(price)"></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class="arrows">\r\n                        <a class="arrow right-arrow" data-bind="click:carousel.moveRight, css: {active : carousel.hasNextPanel }, visible: carousel.hasOtherPanels"><span></span></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ul class="nav" data-bind="foreach: carousel.panels, visible: carousel.hasOtherPanels">\r\n            <li data-bind="click: $parent.carousel.currentPanel.bind($data)">\r\n                <a data-bind="css:{active:$parent.carousel.currentPanel() == $data}" href="#"></a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</section>\r\n\r\n\r\n\r\n'}),define("Components/might-like/might-like",["ko","$","text!./might-like.html","Models/CarouselControl","PageConfig","Utils","ProductUtils/Ajax","Product.Config","Asos.Identity.Web.ClientSdk","ProductUtils/UrlUtils","events"],function(t,e,i,n,s,r,o,a,l,c,d){function u(t){var e=t.state,i=t.data,r=new c;this.resources=e.resources,this.features=e.features,this.ajax=new o,this.serviceUrl="",this.useRecs=this.features.recommendationsEnabledStores.indexOf(s.storeCode.toLowerCase())>-1,this.title=this.useRecs&&!e.productData.isInStock?e.resources.MightLikeOutOfStock:e.resources.MightLike,this.createFredHopperUrl=function(t,e){return a.ymalApiUrl+t+"?channel="+e.platform+"-web"},this.createRecsUrl=function(t){return a.recsApiUrl+"?ctx_origin=pdt&limit=16&ctx_productids="+t},this.createRecsOosUrl=function(t){return a.recsApiUrl+"?ctx_origin=oos&limit=16&ctx_productIds="+t},this.serviceMapper=function(t){return void 0!==window.mvtMightLikeEndpoint?window.mvtMightLikeEndpoint+"&ctx_productids="+t:this.useRecs?e.productData.isInStock?this.createRecsUrl(t):this.createRecsOosUrl(t):this.createFredHopperUrl(t,s)},this.serviceUrl=this.serviceMapper(i.id),this.carousel=new n,this.carousel.itemsInView(4),this.carousel.resize(s.platform,window,3.7,1.7),this.getImageSrc=function(t){return this.useRecs?r.formatUrl(t.images[0].url+"?$XL$&wid=200&fit=constrain"):r.formatUrl(t.imageUrl+"?$XL$&wid=200&fit=constrain")},this.getProductLink=function(t,e){return s.siteDomain+"/prd/"+t+"?CTAref=We+Recommend+Carousel_"+(e+1)+"&featureref1=we+recommend"+(this.useRecs?"+pers":"")}.bind(this),this.getPriceText=function(t){return t.current.text},this.getDiscountedPriceText=function(t){return this.isPriceDiscounted(t)?t.isOutletPrice?e.resources.Rrp+t.rrp.text:t.previous.text:""},this.isPriceDiscounted=function(t){return t.isMarkedDown||t.isOutletPrice},this.formatTitle=function(t){var e=t;return e.length>50&&(e=e.substring(0,48),e+="..."),e},this.getAuthorizationHeader=function(){return l.customer.customerGuid().then(function(t){return"Bearer "+(t||"null")},function(){return"Bearer null"})},this.getRecommendations=function(t,e){return this.ajax.execute({url:t,apiName:"Presentation",callerContext:"YMAL",storeParams:{store:s.storeCode,country:s.countryCode,currency:s.currency,lang:s.language,sizeSchema:s.sizeSchema,keyStoreDataversion:s.keyStoreDataversion},authorization:e,successCallback:this.bindCarouselResponse.bind(this)})},this.update=function(t){return this.getAuthorizationHeader().then(this.getRecommendations.bind(this,t),this.getRecommendations.bind(this,t)).then(this.bindCarouselResponse.bind(this))},this.bindCarouselResponse=function(t){this.carousel.setData(t.recommendations),e.submodulesCompleted.recommendations(this.carousel.items().length>0?e.CAROUSEL_LOADING_STATE.HAS_DATA:e.CAROUSEL_LOADING_STATE.NO_DATA)},d.on("updateMightLike",function(t,e){this.carousel.items([]),this.update(e+"&ctx_productids="+i.id)}.bind(this)),d.on("setMightLikeData",function(t,e){this.useRecs=!0,this.bindCarouselResponse(e.recData)}.bind(this)),this.update(this.serviceUrl)}return{viewModel:u,template:i}}),define("text!Components/buy-the-look/buy-the-look.html",[],function(){return'<section data-bind="visible: isVisible" class="buy-the-look">\r\n    <div class="layout-width">\r\n        <div class="layout-module">\r\n            <h2 data-bind="text: state.resources.BuyTheLook"></h2>\r\n            <div class="carousel">\r\n                <div class="row">\r\n                    <div class="arrows">\r\n                        <a class="arrow left-arrow" data-bind="click:carousel.moveLeft, css: {active : carousel.hasPreviousPanel }, visible: carousel.hasOtherPanels"><span></span></a>\r\n                    </div>\r\n                    <div class="window" data-bind="swipe">\r\n                        <ul data-bind="foreach: {data: carousel.visibleItems, afterRender: renderedHandler}, style: { height: uniformHeight, width: carousel.width(), marginLeft:carousel.slidePosition()},css: { suppressSlide : !carousel.animate() }, afterRender: postRender ">\r\n                            <li data-bind="style: { width: $parent.carousel.itemWidth() }, css : { \'out-of-stock\' : !isInStock, \'in-stock\' : isInStock}">\r\n                                <div class="item card-container">\r\n                                    <div class="card" data-bind="css : { \'flipped\' : state.showAddToBagError() }">\r\n                                        <div class="front">\r\n                                            <div class="btl-product-details">\r\n                                                <a data-bind="attr: { href: $parent.getProductLink(product.id, $index()) }">\r\n                                                    <div class="product-image" data-bind=\'component: { name: "product-image", params: {imgUrl: imgUrl, state:state, productId: product.id, context:"buythelook" } }\'></div>\r\n                                                    <div class="product-title" data-bind="text:$parent.formatTitle(product.name)"></div>\r\n                                                </a>\r\n                                            </div>\r\n                                            <div class="btl-options">\r\n                                                <div class="product-price" data-bind=\'component: { name: "product-price", params: {state: state, hideDeliveryLink: true, showGermanVatMessage: showGermanVatMessage}}\'></div>\r\n                                                <div class="separator"></div>\r\n                                                <div data-bind="component:{\r\n                                        name: \'product-colour\',\r\n                                        params: {\r\n                                            hideLabels: true,\r\n                                            useShortSelectColourLabel: true,\r\n                                            state: state,\r\n                                            data: product}\r\n                                        }"></div>\r\n\r\n                                                <div class="separator"></div>\r\n                                                <div data-bind=\'component:{\r\n                                        name: "product-size",\r\n                                        params: {\r\n                                            hideLabels: true,\r\n                                            hideLowInStock: true,\r\n                                            state: state,\r\n                                            data: product}\r\n                                        }\'></div>\r\n                                                <!-- ko if: isInStock -->\r\n                                                <div class="add-status">\r\n                                                    <div data-component-id="add-item" data-bind=\'component: { name: "add-item",\r\n                                             params:{\r\n                                                 productId: product.id,\r\n                                                 showTryAgain: false,\r\n                                                 productImage : product.images[0].url,\r\n                                                 state: state,\r\n                                                 initiator : "buyTheLook"\r\n                                             }}\'></div>\r\n                                                </div>\r\n                                                <!-- /ko -->\r\n                                                <div class="out-of-stock-button" data-bind="visible: !isInStock">\r\n                                                    <span data-bind="text: state.resources.OutOfStockBuyTheLook"></span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="back">\r\n                                            <div class="btl-product-details">\r\n                                                <a data-bind="attr: { href: $parent.getProductLink(product.id, $index()) }">\r\n                                                    <img class="product-image" data-bind="attr: { src: imgUrl }" alt="" />\r\n                                                </a>\r\n                                            </div>\r\n                                            <div class="add-failed">\r\n                                                <div class="add-to-bag-error" data-bind="html: state.addToBagErrorMessage"></div>\r\n                                                <div class="retry-add">\r\n                                                    <a class="failed" data-bind="click: $parent.tryAgain($index())">\r\n                                                        <span data-bind="text: state.resources.AddToBagTryAgain"></span>\r\n                                                    </a>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class="arrows">\r\n                        <a class="arrow right-arrow" data-bind="click:carousel.moveRight, css: {active : carousel.hasNextPanel }, visible: carousel.hasOtherPanels"><span></span></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ul class="nav" data-bind="foreach: carousel.panels, visible: carousel.hasOtherPanels">\r\n            <li data-bind="click: $parent.carousel.currentPanel.bind($data)">\r\n                <a data-bind="css:{active:$parent.carousel.currentPanel() == $data}" href="#"></a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n</section>\r\n\r\n';
}),define("ProductUtils/BuyTheLook",["ProductUtils/Ajax","ProductUtils/UrlUtils","Product.Config","PageConfig"],function(t,e,i,n){return function(){this.productArray=[],this.callbacks=[],this.ajax=new t;var s=new e;this.getBuyTheLook=function(t,e){this.ajax.execute({storeParams:{store:n.storeCode,currency:n.currency,lang:n.language,sizeSchema:n.sizeSchema,keyStoreDataversion:n.keyStoreDataversion},url:i.buyTheLookApiUrl+t,apiName:"Product Catalogue",callerContext:"BuyTheLook",successCallback:this.success.bind(this),retryCount:5,callbackArgs:{callback:e}})},this.success=function(t,e){var i=t.products;i.sort(function(t,e){return t.order-e.order});for(var n=0;n<i.length;n++){var r=i[n].product;r.sizeGuide=s.formatUrl(r.sizeGuide);for(var o=0;o<r.images.length;o++)r.images[o].url=s.formatUrl(r.images[o].url);for(var a=0;a<r.variants.length;a++){var l=r.variants[a];l.size=l.brandSize,l.variantId=l.id,l.sizeDescription&&(l.size+=" - "+l.sizeDescription)}}e.callback(i)}}}),define("Components/buy-the-look/buy-the-look",["ko","text!./buy-the-look.html","Models/CarouselControl","Models/VariantDecorator","PageConfig","$","ProductUtils/BuyTheLook"],function(t,e,i,n,s,r,o){function a(e){this.state=e.state,this.product=e.data,this.carousel=new i,this.buyTheLook=new o,this.render=e.render,this.uniformHeight=t.observable(),this.expectedCarouselLength=t.observable(0),this.renderedCount=t.observable(0),this.adjustCarouselHeight=function(){var t=r(".buy-the-look .item"),e=[];t.each(function(t){var i=20,n=r(this).find(".btl-product-details").outerHeight(),s=r(this).find(".btl-options").outerHeight(),o=s+n+i;e.push(t),e[t]=o});var i=Math.max.apply(Math,e);this.uniformHeight(i+"px")}.bind(this),this.renderedHandler=function(){this.renderedCount(this.renderedCount()+1),this.expectedCarouselLength()>0&&this.renderedCount()===this.carousel.visibleItems().length&&setTimeout(this.adjustCarouselHeight,1)}.bind(this),this.carousel.events.on("resize",function(){this.adjustCarouselHeight()}.bind(this)),this.isVisible=t.computed(function(){return null!==t.utils.arrayFirst(this.carousel.items(),function(t){return t.isInStock})}.bind(this)),this.formatTitle=function(t){var e=t;return e.length>32&&(e=e.substring(0,29),e+="..."),e},this.getProductLink=function(t,e){return t+"?CTAref=Complete+the+Look+Carousel_"+(e+1)+"&featureref1=complete+the+look"},this.tryAgain=function(t){this.carousel.items()[t].state.showAddToBagError(!1)},this.product.buyTheLookId?this.buyTheLook.getBuyTheLook(this.product.buyTheLookId,function(i){if(!i)return void this.state.submodulesCompleted.buyTheLook(this.state.CAROUSEL_LOADING_STATE.NO_DATA);var r=[];this.expectedCarouselLength(i.length);for(var o=0;o<i.length;o++){var a=i[o].product,l=a.variants.filter(function(t){return t.isInStock}),c=l.length>0,d={productData:(new n).getData(a,!c),selectedColour:t.observable(),selectedSize:t.observable(),showNoColourSelectedWarning:t.observable(!1),showNoSizeSelectedWarning:t.observable(!1),showAddToBagError:t.observable(!1),addToBagErrorMessage:t.observable(""),resources:e.state.resources},u={state:d,product:a,showGermanVatMessage:e.showGermanVatMessage},h=a.images.filter(function(t){return t.isPrimary===!0?t.url:""});u.isInStock=c,u.imgUrl=h.length>0?h[0].url:a.images[0].url,u.imgUrl=u.imgUrl+"?$L$&wid=190&fit=constrain",r.push(u)}r.sort(function(t,e){return t.isInStock===e.isInStock?0:t.isInStock?-1:1}),i.length>0&&(this.carousel.itemsInView(4),this.carousel.setData(r.slice(0,6)),this.carousel.resize(s.platform,window,3.7,1.7)),this.state.submodulesCompleted.buyTheLook(this.isVisible()?this.state.CAROUSEL_LOADING_STATE.HAS_DATA:this.state.CAROUSEL_LOADING_STATE.NO_DATA)}.bind(this)):this.state.submodulesCompleted.buyTheLook(this.state.CAROUSEL_LOADING_STATE.NO_DATA)}return{viewModel:a,template:e}}),define("text!Components/product-gallery/product-gallery.html",[],function(){return'<div class="product-carousel" id="product-gallery">\r\n    <div class="window" data-bind="swipe">\r\n            <div class="selling-fast" data-bind="visible: showSellingFastLabel">\r\n                <span class="selling-fast__label" data-bind="text: state.resources.SellingFast"></span>\r\n            </div>\r\n        <ul data-bind="foreach: galleryItems, css: { animate : animate() }, style: { width : galleryWidth, marginLeft : galleryPosition }">\r\n            <li data-bind="style: { width : $parent.itemWidth}, css: { \'zoomable\': $parent.imageData() }, attr: { \'data-gallery-index\': $index }">\r\n                <div class="asos-media spinset imageviewer" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: $parent.playerParams.scene7, viewer: { showCloseButton: false, zoomFactors: $parent.zoomFactors, baseJpgQlt: 80, zoomJpgQlt: 90, handleLoadingErrors: false, showHint: false }, api: $parent.imageViewerApis()[$index()], messages: $parent.playerParams.messages } }, visible: $parent.imageViewersVisibility()[$index()]\'></div>\r\n                <!-- ko if: $index() === 1 -->\r\n                <img class="gallery-image" data-bind="attr: { src: $parent.colourOptionImage().url + \'?$XXL$&wid=513&fit=constrain\' }, event: { onload: window.asos.performance.markAndMeasure(\'pdp:gallery_image_\'+$index()+\'_displayed\')}" />\r\n                <!-- /ko -->\r\n                <!-- ko if: $index() !== 1 -->\r\n                <img class="gallery-image" data-bind="attr: { src: url + \'?$XXL$&wid=513&fit=constrain\' }, event: { onload: window.asos.performance.markAndMeasure(\'pdp:gallery_image_\'+$index()+\'_displayed\')}" />\r\n                <!-- /ko -->\r\n            </li>\r\n        </ul>\r\n        <a href="#" class="arrow left-arrow active" data-bind="click:moveLeft, markAndMeasure: \'pdp:gallery_swiping_left_interactive\'"><span>left</span></a>\r\n        <a href="#" class="arrow right-arrow active" data-bind="click:moveRight, markAndMeasure: \'pdp:gallery_swiping_right_interactive\'"><span>right</span></a>\r\n        <div class="carousel-bullets">\r\n            <ul data-bind="foreach: galleryItems">\r\n                <li data-bind="if: $index() > 0, css: { active: $parent.thumbIndex() === $index() }">\r\n                    <a href="#" data-bind="click: $parent.selectThumbnail.bind($data, $index())"></a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="asos-media catwalk" style="display: none" data-bind=\'component: { name: "asos-video-player-prod", params: { scene7: playerParams.scene7, player: { startInFullScreen: startVideoInFullScreen, closeOnFullScreenExited: closeVideoOnFullScreenExited, initialLoopCount: 2 }, api: videoPlayerApi, messages: playerParams.messages } }, visible: isVideoVisible\'></div>\r\n    <div class="asos-media spinset spinviewer" style="display: none" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: playerParams.scene7, viewer: { spinSpeed: spinSpeed, showCloseButton: showSpinViewerCloseButton, zoomFactors: zoomFactors, reverseVerticalDirection: false, reverseHorizontalDirection: false, baseJpgQlt: 80, zoomJpgQlt: 90, showHint: showSpinViewerContainerHint, useInitialAnimation: true, animationIntervalStart: 100, animationIntervalPeak: 100, animationFramesCount: 5, preloadingTimeout: 30000 }, api: spinViewerApi, messages: playerParams.messages } }, visible: isSpinViewerVisible, css: { "zoomable": isSpinViewerLoadedWithoutErrors }\'></div>\r\n</div>\r\n\r\n<div class="thumbnails">\r\n    <ul>\r\n        <!-- ko foreach: galleryItems-->\r\n        <!-- ko if: $index() > 0 -->\r\n        <li class="image-thumbnail mobile-hide" data-bind="css: { active: $parent.thumbIndex() === $index() }">\r\n            <a href="#" data-bind="click: $parent.selectThumbnail.bind($data, $index())">\r\n                <!-- ko if: $index() === 1 -->\r\n                <img data-bind="attr: { src: $parent.colourOptionImage().url + \'?$S$&wid=40&fit=constrain\' }"/>\r\n                <!-- /ko -->\r\n                <!-- ko if: $index() > 1 -->\r\n                <img data-bind="attr: { src: url + \'?$S$&wid=40&fit=constrain\' }" />\r\n                <!-- /ko -->\r\n            </a>\r\n        </li>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n\r\n\r\n        <li class="button button-catwalk" style="display: none" data-bind="visible: isVideoButtonVisible() && isInStock()">\r\n            <a href="#" data-bind="click: onVideoButtonActivated, css: { active: isVideoVisible }">\r\n                <div class="icon-container">\r\n                    <div class="inactive sprite product-play"></div>\r\n                    <div class="active sprite product-play-filled"></div>\r\n                </div>\r\n                <span class="text" data-bind="text: state.resources.Catwalk"></span>\r\n            </a>\r\n        </li>\r\n        <li class="button button-spinset" style="display: none" data-bind="visible: isSpinViewerButtonVisible">\r\n            <a href="#" data-bind="click: onSpinViewerButtonActivated, css: { active: isSpinViewerVisible }">\r\n                <div class="icon-container">\r\n                    <div class="inactive sprite product-360"></div>\r\n                    <div class="active sprite product-360-selected" data-bind="css: { \'product-360-selected\': !isSpinViewerButtonInClosingState(), \'product-returns\': isSpinViewerButtonInClosingState() }"></div>\r\n                </div>\r\n                <span class="text" data-bind="text: isSpinViewerButtonInClosingState() ? \'Gallery\' : \'360\'">360</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n\r\n</div>\r\n<button class="link social-share-icon-desktop" data-bind="visible: isInStock">\r\n    <span class="product-share-icon"></span>\r\n    <span class="social-share-text" data-bind="text: state.resources.SocialShare"></span>\r\n</button>\r\n'}),define("Components/product-gallery/product-gallery",["ko","$","text!./product-gallery.html","Models/CarouselControl","PageConfig","hammer","Asos.Utils.MediaPlayers","ProductUtils/Analytics","ProductUtils/UrlUtils","ProductUtils/features/features"],function(t,e,i,n,s,r,o,a,l,c){function d(e){function i(t,e){return void 0!==h[t]&&d[h[t]]!==e?h[t]:void 0!==u[t]&&d[u[t]]!==e?u[t]:-1}var n=e.state,d=e.data.images,u=e.data.map,h=e.data.localisedMap;this.defaultColour=e.state.defaultColour,this.defaultProductId=e.data.defaultProductId;var p=0;this.galleryItems=t.observableArray(),this.galleryWidth=t.observable(),this.itemWidth=t.observable(),this.itemWidthValue=t.observable(),this.galleryPosition=t.observable(),this.galleryIndex=t.observable(0),this.animate=t.observable(!1),this.thumbIndex=t.observable(0),this.isInStock=t.observable(!1);var m=new l,f="mobile"===s.platform,v={imageChanged:!1,thumbnailClick:!1,imageViewerZoomIn:!1,spinViewerInit:!1,spinViewerSpin:!1,spinViewerZoomIn:!1,videoPlayerInit:!1,videoProgress:{25:!1,50:!1,75:!1,100:!1}},g="tracking.mediaPlayer.videoAction",b="tracking.mediaPlayer.mediaAction";this.checkIfInStockAndSetFlag=function(){this.isInStock(n.productData?n.productData.isInStock:!0)},this.getVisibleImages=function(e){var i=e.filter(function(t){return t.isVisible===!0});if(!i[0].colourWayId||null===i[0].colourWayId){var n=t.utils.arrayFirst(e,function(t){return t.isPrimary});if(n||(n=t.utils.arrayFirst(e,function(t){return t.colourWayId&&null!==t.colourWayId})),n){var s=i.indexOf(n);s>=0&&i.splice(s,1),i.splice(0,0,n)}}return i};var y=this.getVisibleImages(d);n.mainImage=this.colourOptionImage=t.observable(y[0]),this.init=function(){this.galleryItems(this.shuffleLastImage(y)),this.galleryWidth(this.getGalleryWidth()),this.itemWidth(this.getItemWidth()),this.setSwipe(),this.setImageViewers(),this.setGalleryPosition(1),this.defaultProductId>0?this.trySetProductImage(this.defaultProductId):this.defaultColour&&this.defaultColour.length>0&&this.trySetColour(this.defaultColour.toLowerCase())},this.setGalleryPosition=function(t){this.galleryIndex(t),0===t?this.thumbIndex(this.galleryItems().length-1):this.thumbIndex(t),this.galleryPosition("-"+100*Math.abs(this.galleryIndex())+"%")},this.getItemWidth=function(){return 100/this.galleryItems().length+"%"},this.getGalleryWidth=function(){return 100*this.galleryItems().length+"%"},this.shuffleLastImage=function(t){var e=t,i=t[t.length-1];return e.unshift(i),e},this.moveLeft=function(){if(this.resetImageViewer(),0===this.galleryIndex())return this.animate(!1),this.setGalleryPosition(this.galleryItems().length-1),setTimeout(function(){this.animate(!0),this.setGalleryPosition(this.galleryItems().length-2),v.imageChanged||(a.fireEvent("carouselAction",{context:"chevronClick",carouselType:"productGallery",productIID:e.data.id,nextImagePosition:this.galleryIndex()}),v.imageChanged=!0)}.bind(this),10),!1;this.animate(!0),this.setGalleryPosition(this.galleryIndex()-1);var t=0===this.galleryIndex()?this.galleryItems().length-1:this.galleryIndex();return v.imageChanged||(a.fireEvent("carouselAction",{context:"chevronClick",carouselType:"productGallery",productIID:e.data.id,nextImagePosition:t}),v.imageChanged=!0),!1},this.moveRight=function(){return this.resetImageViewer(),this.galleryIndex()===this.galleryItems().length-1?(this.animate(!1),this.setGalleryPosition(0),setTimeout(function(){this.animate(!0),this.setGalleryPosition(1),v.imageChanged||(a.fireEvent("carouselAction",{context:"chevronClick",carouselType:"productGallery",productIID:e.data.id,nextImagePosition:this.galleryIndex()}),v.imageChanged=!0)}.bind(this),10),!1):(this.animate(!0),this.setGalleryPosition(this.galleryIndex()+1),v.imageChanged||(a.fireEvent("carouselAction",{context:"chevronClick",carouselType:"productGallery",productIID:e.data.id,nextImagePosition:this.galleryIndex()}),v.imageChanged=!0),!1)},this.selectThumbnail=function(t,i){this.exitVideo(),this.exitSpinViewer(),this.resetImageViewer(),this.animate(!1),this.setGalleryPosition(t),i===!0||v.thumbnailClick||(a.fireEvent(b,{context:"thumbnailClick",productIID:e.data.id,selectedImagePosition:t,zoomedIn:!1,pageType:"product"},!0),v.thumbnailClick=!0)}.bind(this),this.trySetColour=function(t){t=t.replace(/ /g,"");var e=i(t,this.colourOptionImage());if(-1!==e){var n=1;this.colourOptionImage(d[e]),this.exitVideo(),this.exitSpinViewer(),this.setGalleryPosition(n),this.imageViewersVisibility()[n]&&this.initImageViewer(n)}},this.trySetProductImage=function(t){for(var e=1,i=0;i<d.length;i++)if(d[i].productId===t){e=i+1;break}this.setGalleryPosition(e)},this.deselectThumbnails=function(){this.galleryIndex()>=0&&(p=this.galleryIndex()),this.setGalleryPosition(-2)},n.selectedColour.subscribe(function(t){void 0===t||null===t?(this.colourOptionImage(d[0]),this.initImageViewer(1)):t.colourName&&this.trySetColour(t.colourName.toLowerCase())}.bind(this)),this.videoPlayerApi=t.observable(),this.exitVideo=function(){if(this.isVideoVisible(!1),this.videoPlayerApi()&&this.videoPlayerApi().stop)try{this.videoPlayerApi().stop()}catch(t){console.warn("could not stop video: "+t)}},document.body.addEventListener("modalClosed",function(){this.exitVideo()}.bind(this)),this.startVideoInFullScreen=f,this.closeVideoOnFullScreenExited=f,this.isVideoButtonVisible=t.observable(!1),this.isVideoVisible=t.observable(!1),this.playerParams=e.data.playerParams,this.playerParams.messages={errorHeaderText:n.resources.AMP_VP_ErrorPage_HeaderText,errorMessageText:n.resources.AMP_VP_ErrorPage_MessageText,spinsetErrorMessageText:n.resources.AMP_SV_ErrorPage_MessageText,refreshButtonText:n.resources.AMP_VP_ErrorPage_RefreshButtonText,unsupportedHeaderText:n.resources.AMP_VP_UnsupportedPage_HeaderText,unsupportedMessageText:n.resources.AMP_VP_UnsupportedPage_MessageText,closeButtonText:n.resources.AMP_VP_UnsupportedPage_CloseButtonText,hintDragText:n.resources.AMP_SV_HintPage_DragText,hintTapText:n.resources.AMP_SV_HintPage_TapText},this.onVideoButtonActivated=function(){v.videoFirstPlaybackCompleted=!1,this.isVideoVisible()||(p=this.thumbIndex()>=0?this.thumbIndex():p,this.resetImageViewer(),this.deselectThumbnails(),this.isVideoVisible(!0),this.exitSpinViewer(),this.videoPlayerApi().start(S),v.videoPlayerInit||(a.fireEvent(g,{context:"video",productIID:e.data.id,videoEvent:"start",fullScreen:this.startVideoInFullScreen,pageType:"product"},!0),v.videoPlayerInit=!0))};var S;this.videoPlayerApi.subscribe(function(t){t.events.on("playerExitRequested allLoopsEnded",function(){this.isVideoVisible()&&this.selectThumbnail(p,!0)}.bind(this)),t.events.on("progress",function(t,i){if(i.detail.value)for(var n in v.videoProgress){var s=parseInt(n,10);!v.videoProgress[n]&&i.detail.value>=s&&(v.videoProgress[n]=!0,a.fireEvent(g,{context:"video",productIID:e.data.id,videoEvent:n,fullScreen:i.detail.isFullScreen,pageType:"product"},!0))}});var i={formats:["m3u8","mp4","ogg"],preferredFPS:f?25:50,preferredBitrates:{720:1200}};if(e.data.useProductIdForVideos)return void t.loadAssets(e.data.id,i,function(){this.isVideoButtonVisible(!0),this.checkIfInStockAndSetFlag()}.bind(this));if(e.data.media&&e.data.media.catwalkUrl){var n=o.getVideoPlayerAssetsProvider(e.data.playerParams.scene7.videoServer);n.getAssets(m.formatUrl(e.data.media.catwalkUrl),i).then(function(t){S=t,this.isVideoButtonVisible(!0),this.checkIfInStockAndSetFlag()}.bind(this))}}.bind(this)),this.spinViewerApi=t.observable(),this.exitSpinViewer=function(){this.spinViewerApi()&&this.spinViewerApi().zoomReset(),this.isSpinViewerVisible(!1)},this.spinSpeed=f?1.5:3,this.showSpinViewerCloseButton=f,this.showSpinViewerContainerHint=!f,this.zoomFactors=[.5,1],this.isSpinViewerButtonVisible=t.observable(!1),this.isSpinViewerVisible=t.observable(!1),this.isSpinViewerLoadedWithoutErrors=t.observable(!1),this.isSpinViewerButtonInClosingState=t.computed(function(){return f&&this.isSpinViewerVisible()},this),this.onSpinViewerButtonActivated=function(){this.isSpinViewerVisible()?f&&(this.exitSpinViewer(),this.selectThumbnail(p,!0)):(p=this.thumbIndex()>=0?this.thumbIndex():p,this.resetImageViewer(),this.deselectThumbnails(),this.exitVideo(),this.isSpinViewerVisible(!0),this.spinViewerApi().init(),v.spinViewerInit||(a.fireEvent(b,{context:"360Launch",productIID:e.data.id,pageType:"product"},!0),v.spinViewerInit=!0))},this.spinViewerApi.subscribe(function(t){t.events.on("playerExitRequested",function(){this.isSpinViewerButtonVisible()&&this.selectThumbnail(p,!0)}.bind(this)),t.events.on("spun",function(){v.spinViewerSpin||(a.fireEvent(b,{context:"360Interaction",productIID:e.data.id,pageType:"product"},!0),v.spinViewerSpin=!0)}),t.events.on("zoomedIn",function(){v.spinViewerZoomIn||(a.fireEvent(b,{context:"360Zoom",productIID:e.data.id,pageType:"product"},!0),v.spinViewerZoomIn=!0)}),t.events.on("allImagesLoaded",function(t,e){e&&this.isSpinViewerLoadedWithoutErrors(e)}.bind(this));var i=e.data.id;t.loadAssets(i,function(){this.isSpinViewerButtonVisible(n.productData?n.productData.isInStock:!0)}.bind(this))}.bind(this)),this.imageData=t.observable(),this.imageViewerApis=t.observableArray([]),this.imageViewersVisibility=t.observableArray([]),this.areAllImageViewerApisReady=function(){for(var t=0;t<this.imageViewerApis().length;t++)if(!this.imageViewerApis()[t]())return!1;return!0},this.initImageViewer=function(t){var i=this.imageViewersVisibility(),n=this.imageData(),s=this.imageViewerApis()[t](),r=e.data.rootElement.querySelector('li[data-gallery-index="'+t+'"] img.gallery-image');if(!r.complete)return void(r.onload=this.initImageViewer.bind(this,t));if(r.complete&&s&&n){i[t]=!0,this.imageViewersVisibility(i);var o=r.cloneNode();o.style.visibility="visible",s.setAssets(n[this.getImageIndexFromGalleryIndex(t)]),s.init(null,o),r.style.visibility="hidden"}},this.loadImagesMetadata=function(t){var i=o.getSpinViewerAssetsProvider(e.data.playerParams.scene7.imageServer);i.getAssets(t,function(t){this.imageData(t),this.checkIfInStockAndSetFlag()}.bind(this))},this.imageData.subscribe(function(t){if(t)for(var e=0;e<this.imageViewerApis().length;e++)this.initImageViewer(e)}.bind(this)),this.onImageViewerApiReady=function(t){var i=e.data.rootElement.querySelector('[data-gallery-index="'+t+'"]'),n=this.imageData();n&&this.initImageViewer(t,i)},this.getImageIndexFromGalleryIndex=function(e){var i=1===e?this.colourOptionImage():this.galleryItems()[e],n=t.utils.arrayFirst(d,function(t){return t.url===i.url});return d.indexOf(n)},this.setImageViewers=function(){for(var e,i=this.galleryItems(),n=[],s=0;s<d.length;s++)n.push(d[s].url);for(s=0;s<i.length;s++)e=t.observable(),this.imageViewerApis.push(e),this.imageViewersVisibility.push(!1),e.subscribe(this.onImageViewerApiReady.bind(this,s));this.loadImagesMetadata(n)},this.resetImageViewer=function(){var t=this.imageViewerApis()[this.galleryIndex()]&&this.imageViewerApis()[this.galleryIndex()]();t&&t.zoomReset()},this.setSwipe=function(){if(window.addEventListener){var t=document.querySelector(".product-gallery .window"),e=new r(t,{inputClass:r.TouchInput});e.on("swipeleft",function(){this.moveRight()}.bind(this)),e.on("swiperight",function(){this.moveLeft()}.bind(this))}},this.isSellingFastEnabled=t.observable(!1),this.showSellingFastLabel=t.computed(function(){var t=!this.isVideoVisible()&&!this.isSpinViewerVisible();return this.isInStock()&&e.state.sellingFast&&t&&this.isSellingFastEnabled()}.bind(this)),c.ifActive("t1280-web-selling-fast",!0).then(function(t){t&&(a.fireFeatureAnalytics(t.mvtExperience),t.isActive&&this.isSellingFastEnabled(!0))}.bind(this)),this.init()}return{viewModel:d,template:i}}),define("text!Components/product-colour/product-colour.html",[],function(){return'<!-- ko if: render -->\r\n<section>\r\n    <div class="colour-size colour-component">\r\n        <div class="grid-row colour-section">\r\n            <label class="disabled" data-bind="text: colourLabel, visible: !hideLabels"></label>\r\n            <span class="product-colour" data-bind="visible: colourLabelVisible(), text: selectedColourLabel(), css: { disabled: isDisabled }"></span>\r\n            <div class="colour-size-select" data-bind="visible: colourDropdownVisible()">\r\n                <select data-id="colourSelect"\r\n                        data-bind=\'optionsCaption: selectColourText,\r\n                        disable: isDisabled,\r\n                        options: data,\r\n                        optionsAfterRender: setColourOptionText,\r\n                        value: colour,\r\n                        css:{ required : noColourSelected()}\'></select>\r\n                <!-- ko if: noColourSelected() -->\r\n                <span class="error basic-error-box" data-bind="text:selectColourPrompt"></span>\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n<!-- /ko -->'}),define("Components/product-colour/product-colour",["ko","text!./product-colour.html","PageConfig"],function(t,e,i){function n(e){var n=e.state,s="undefined"!==e.hideOnOutOfStock?e.hideOnOutOfStock:!1;this.render=s&&!n.productData.isInStock?!1:!0,this.noColourSelected=e.state.showNoColourSelectedWarning,this.data=t.observableArray(),this.colour=n.selectedColour,this.hideLabels=e.hideLabels,this.useShortSelectColourLabel=e.useShortSelectColourLabel,this.selectColourPrompt=n.resources.SelectColourPrompt,this.colourLabel=n.resources.Colour+":",this.isMobile="mobile"===i.platform,this.notAvailableText=n.resources.NotAvailable,this.useShortSelectColourLabel?this.selectColourText=n.resources.SelectColour:this.selectColourText=n.resources.SelectColourFrom,this.lowInStockText=n.resources.LowInStock;var r=e.state.productData;this.isDisabled=!e.state.productData.isInStock;var o=r.colours;this.data(o),this.selectColourText=this.selectColourText.replace("{0}",this.data().length),this.colourDropdownVisible=t.computed(function(){return this.data().length>1}.bind(this)),this.colourLabelVisible=t.computed(function(){return!this.colourDropdownVisible()}.bind(this)),this.setColourOptionText=function(t,e){e&&(r.hasDifferentPrices?t.text=e.colour+" "+e.price.text:t.text=e.colour)},this.selectedColourLabel=t.computed(function(){return this.colour()?this.colour().colour:""}.bind(this)),this.setDefaultColour=function(){1===this.data().length&&this.colour(this.data()[0])},this.setDefaultColour(),this.setVariantColour=function(t,e){for(var i=0;i<t.length;i++)if(t[i].colour===e){this.colour(t[i]);break}},e.state.defaultVariant&&this.setVariantColour(this.data(),e.state.defaultVariant.colour)}return{viewModel:n,template:e}}),define("text!Components/product-size/product-size.html",[],function(){return'<!-- ko if: render -->\r\n<section>\r\n    <div class="colour-size size-component">\r\n        <div class="size-section" data-bind="visible: sizeSectionVisible()">\r\n            <div style="display: table; width: 100%">\r\n                <!-- ko if: (showFitAnalyticsSection() && !showNewIcon()) || !showFitAnalyticsSection() -->\r\n                    <label style="display: table-cell; vertical-align: bottom" data-bind="text: sizeLabel, visible: !hideLabels, disable: isDisabled"></label>\r\n                <!-- /ko -->\r\n                <div style="display: table-cell; vertical-align: top; width: 100%">\r\n                    <!-- ko if: isOneSize -->\r\n                    <span class="product-size" data-bind="visible: sizeLabelVisible(), text: selectedSizeLabel(), css: { disabled: isDisabled }"></span>\r\n                    <!-- /ko -->\r\n                    <!-- ko if: !showFitAnalyticsSection() -->\r\n                    <div id="size-guide" class="size-guide" style="float: right;" data-bind=\'component: { name: "size-guide", params: {dictionary: sizeGuideDictionary , url: sizeGuideLink, visible: state.showSizeGuide, id:id}}\'></div>\r\n                    <!-- /ko -->\r\n                    <!-- ko if: showFitAnalyticsSection() && !isFitAssistantMvtCandidate() -->\r\n                    <div class="fit-analytics upper" style="line-height: 1.57; letter-spacing: 0.4px;" data-bind="style: { float: fitAnalyticsViewModel.recommendation() === fitAnalyticsViewModel.RecommendationType.None ? \'right\' : \'none\' }">\r\n                        <div class="table">\r\n                            <div class="cell" data-bind="click: fitAnalyticsOpen, visible: fitAnalyticsViewModel.recommendation() === fitAnalyticsViewModel.RecommendationType.None">\r\n                                <div class="circle" style="float: left">\r\n                                    <span class="no-recommendation"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class="cell">\r\n                                <a data-bind="click: fitAnalyticsOpen, text: fitAnalyticsLinkText"></a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- /ko -->\r\n                    <!-- ko if: showFitAnalyticsSection() && showPillDesign() -->\r\n                        <div class="fit-analytics upper">\r\n                            <button data-bind="click: fitAnalyticsOpen, attr:{\'aria-label\': fitAnalyticsMvtAriaText, \'class\': fitAnalyticsMvtVariantClass}">\r\n                                <span class="inner" data-bind="text: fitAnalyticsMvtText"></span>\r\n                            </button>\r\n                        </div>\r\n                    <!-- /ko -->\r\n                    <!-- ko if: showFitAnalyticsSection() && showNewIcon() -->\r\n                    <div class="fit-analytics upper">\r\n                        <a href="#" data-bind="click: fitAnalyticsOpen, attr:{\'class\': fitAnalyticsMvtVariantClass}">\r\n                            <div class="circle" style="float: left">\r\n                                <span class="fit-analytics-icon"></span>\r\n                            </div>\r\n                            <span class="inner" data-bind="text: fitAnalyticsMvtText"></span>\r\n                        </a>\r\n                    </div>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n            <!-- ko if: !isOneSize -->\r\n            <span class="product-size" data-bind="visible: sizeLabelVisible(), text: selectedSizeLabel(), css: { disabled: isDisabled }"></span>\r\n            <!-- /ko -->\r\n            <div class="colour-size-select" data-bind="visible: sizeDropdownVisible(), markAndMeasure: \'pdp:size_selector_interactive\'">\r\n                <select data-id="sizeSelect"\r\n                        data-bind=\'options: variants,\r\n                    optionsAfterRender: disableSizeIfOutOfStock,\r\n                    optionsText: "Size",\r\n                    optionsCaption: selectSizeText,\r\n                    value: size,\r\n                    disable: isDisabled || sizeDropdownDisabled(),\r\n                    css:{ required : noSizeSelected()}\'></select>\r\n                <!-- ko if: noSizeSelected() -->\r\n                <span class="error basic-error-box" data-bind="text:selectSizePrompt"></span>\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <div class="grid-row low-in-stock" data-bind="visible: isLowInStock() && !hideLowInStock">\r\n            <span class="clock"></span><span data-bind="text:lowInStockText"></span>\r\n        </div>\r\n    </div>\r\n</section>\r\n<!-- /ko -->\r\n'}),define("Components/product-size/product-size",["ko","text!./product-size.html","ProductUtils/features/features"],function(t,e,i){function n(e){var n=e.data,s=e.state,r="undefined"!==e.hideOnOutOfStock?e.hideOnOutOfStock:!1;this.state=s,this.render=r&&!s.productData.isInStock?!1:!0,this.noSizeSelected=e.state.showNoSizeSelectedWarning,this.sizeGuideDictionary=e.state.resources,this.sizeGuideLink=n.sizeGuide,this.colour=s.selectedColour,this.size=s.selectedSize,this.alwaysDisplaySizeLabel=!1,this.isLowInStock=t.observable(!1),this.hideLabels=e.hideLabels,this.hideLowInStock=e.hideLowInStock,this.displayOnlyAsDropDown=e.displayOnlyAsDropDown||!1,this.doNotSelectDefaultSize=e.doNotSelectDefaultSize||this.displayOnlyAsDropDown,this.id=n.id,this.isOneSize=n.isOneSize,this.size.subscribe(function(){var t=void 0===this.size()?!1:this.size().isLowInStock===!0;this.isLowInStock(t)}.bind(this)),this.variants=t.computed(function(){return void 0===this.colour()?[]:this.colour().variants}.bind(this)),s.showSizeGuide||(s.showSizeGuide=t.observable(!1)),s.showSizeGuide(e.showSizeGuide===!0&&n.sizeGuideVisible),this.selectSizePrompt=s.resources.SelectSizePrompt,this.sizeLabel=s.resources.Size+":",this.outOfStockText=s.resources.OutOfStock,this.notAvailableText=s.resources.NotAvailable,this.selectSizeText=s.resources.SelectSize,this.lowInStockText=s.resources.LowInStock;var o=e.state.productData;this.isDisabled=!e.state.productData.isInStock;for(var a=o.colours,l=0,c=a.length-1;c>=0;c--){var d=a[c];d.variants.length>l&&(l=d.variants.length)}!this.displayOnlyAsDropDown&&!n.isNoSize&&a.length>1&&1===l&&(this.alwaysDisplaySizeLabel=!0),this.colour.subscribe(function(t){void 0===t||1!==this.colour().variants.length||this.displayOnlyAsDropDown?this.setDefaultSize():this.size(this.colour().variants[0])}.bind(this)),this.sizeDropdownVisible=t.computed(function(){if(this.alwaysDisplaySizeLabel)return!1;if(this.displayOnlyAsDropDown)return!0;if(n.isNoSize)return!1;var t=void 0===this.colour(),e=t?0:this.colour().variants.length;return t||e>1}.bind(this)),this.sizeLabelVisible=t.computed(function(){return this.alwaysDisplaySizeLabel?!0:!this.displayOnlyAsDropDown&&!n.isNoSize&&!this.sizeDropdownVisible()}.bind(this)),this.sizeSectionVisible=t.computed(function(){return this.sizeLabelVisible()||this.sizeDropdownVisible()}.bind(this)),this.disableSizeIfOutOfStock=function(e,i){void 0!==i&&null!==i&&(e.text=i.isInStock?i.size:i.size+" - "+this.notAvailableText,t.applyBindingsToNode(e,{enable:i.isInStock},i))}.bind(this),this.sizeDropdownDisabled=t.computed(function(){return void 0===this.colour()}.bind(this)),this.selectedSizeLabel=t.computed(function(){return this.alwaysDisplaySizeLabel?a[0].variants[0].size:this.size()?this.size().size:"";
}.bind(this)),this.setDefaultSize=function(){if(!this.doNotSelectDefaultSize&&void 0!==o&&void 0!==this.variants()&&1===o.colours.length){for(var t,e=o.colours[0],i=e.variants.length-1;i>=0;i--)if(e.variants[i].isInStock){if(void 0!==t){t=void 0;break}t=this.variants()[i]}void 0!==t&&this.size(t)}},this.setVariantSize=function(t,e){for(var i=0;i<t.length;i++)if(t[i].variantId===e){if(!t[i].isInStock){this.size(void 0);break}this.size(t[i]);break}},e.useFitAnalytics&&e.state.fitAnalyticsViewModel()?this.fitAnalyticsViewModel=e.state.fitAnalyticsViewModel():this.fitAnalyticsViewModel={isLoaded:t.observable(!1)},this.showFitAnalyticsSection=t.computed(function(){if(!this.fitAnalyticsViewModel.isLoaded())return!1;if(!this.fitAnalyticsViewModel.recommendation)return!1;var t=void 0!==this.fitAnalyticsViewModel.recommendation();return t&&i.ifActive("t1270-web-fit-assistant-redesign",!0).then(function(t){t&&(this.initFitAssistantMvt(t),this.fitAnalyticsViewModel.recommendation.subscribe(this.initFitAssistantMvt.bind(this,t)))}.bind(this)),t}.bind(this)),this.getFitAnalyticsText=function(){if(this.fitAnalyticsViewModel.recommendation){var t;switch(this.fitAnalyticsViewModel.recommendation()){case this.fitAnalyticsViewModel.RecommendationType.Partial:t=s.resources.Fit_Analytics_Rec_Partial;break;case this.fitAnalyticsViewModel.RecommendationType.Complete:t=s.resources.Fit_Analytics_Rec_Complete;break;case this.fitAnalyticsViewModel.RecommendationType.OOS:t=s.resources.Fit_Analytics_Rec_OOS;break;default:t=s.resources.Fit_Analytics_Rec_None}if(t)return t.replace("{size}",this.fitAnalyticsViewModel.recommendedSize())}},this.fitAnalyticsLinkText=t.computed(function(){return this.getFitAnalyticsText()}.bind(this)),this.fitAnalyticsOpen=function(){this.fitAnalyticsViewModel.openRecommendations&&this.fitAnalyticsViewModel.openRecommendations()}.bind(this),this.setDefaultSize(),e.state.defaultVariant&&this.setVariantSize(this.variants(),e.state.defaultVariant.variantId),this.isFitAssistantMvtCandidate=t.observable(!1),this.showPillDesign=t.observable(!1),this.showNewIcon=t.observable(!1),this.fitAnalyticsMvtText=t.computed(function(){return this.showPillDesign()||this.showNewIcon()?this.getFitAnalyticsMvtText().text:void 0}.bind(this)),this.fitAnalyticsMvtAriaText=t.computed(function(){return this.showPillDesign()?this.getFitAnalyticsMvtText().ariaText:void 0}.bind(this)),this.fitAnalyticsMvtVariantClass=t.computed(function(){return this.showPillDesign()?this.fitAnalyticsViewModel.recommendation()===this.fitAnalyticsViewModel.RecommendationType.OOS?"fa-mvt-bluepill fa-mvt-bluepill--oos":"fa-mvt-bluepill":this.showNewIcon()?this.fitAnalyticsViewModel.recommendation()===this.fitAnalyticsViewModel.RecommendationType.OOS?"fa-mvt-newicon fa-mvt-newicon--oos":"fa-mvt-newicon":void 0}.bind(this)),this.getFitAnalyticsMvtText=function(){if(this.showPillDesign()||this.showNewIcon()){var t,e;switch(this.fitAnalyticsViewModel.recommendation()){case this.fitAnalyticsViewModel.RecommendationType.Partial:t=this.showPillDesign()?s.resources.Fit_Analytics_MVT_v3_Rec_Partial:s.resources.Fit_Analytics_Rec_Partial,e=s.resources.Fit_Analytics_MVT_v3_Rec_Partial_Aria;break;case this.fitAnalyticsViewModel.RecommendationType.Complete:t=this.showPillDesign()?s.resources.Fit_Analytics_MVT_v3_Rec_Complete:s.resources.Fit_Analytics_Rec_Complete,e=s.resources.Fit_Analytics_MVT_v3_Rec_Complete_Aria;break;case this.fitAnalyticsViewModel.RecommendationType.OOS:t=this.showPillDesign()?s.resources.Fit_Analytics_MVT_v3_Rec_OOS:s.resources.Fit_Analytics_Rec_OOS,e=s.resources.Fit_Analytics_MVT_v3_Rec_OOS_Aria;break;default:t=this.showPillDesign()?s.resources.Fit_Analytics_MVT_v3_Rec_None:s.resources.Fit_Analytics_Rec_None,e=t}if(!t)return;return{text:t.replace("{size}",this.fitAnalyticsViewModel.recommendedSize()),ariaText:e.replace("{size}",this.fitAnalyticsViewModel.recommendedSize())}}},this.initFitAssistantMvt=function(t){return"v2-icon"===t.variant?(this.isFitAssistantMvtCandidate(!0),void this.showNewIcon(!0)):"v3-pill"===t.variant?(this.isFitAssistantMvtCandidate(!0),void this.showPillDesign(!0)):void 0}}return{viewModel:n,template:e}}),define("text!Components/delivery-and-returns/delivery-and-returns.html",[],function(){return'<!-- ko if : !hideDeliveryLink-->\r\n<!-- ko if : features.deliveryAndReturnsModalEnabled -->\r\n<span><button class="link product-delivery" data-bind="text: deliveryReturnsLink, click: deliveryAndReturnsClicked"></button></span>\r\n<!-- /ko -->\r\n<!-- ko if : !features.deliveryAndReturnsModalEnabled -->\r\n<span><a href="#" class="product-delivery" target="_blank" data-bind="text: deliveryReturnsLink, attr : {href : url }"></a></span>\r\n<!-- /ko -->\r\n<!-- /ko -->\r\n'}),define("ProductUtils/SpinnerLoader",[],function(){return function(t){this.loader=null,t&&t.selector?this.loader=document.querySelector(t.selector):this.loader=document.querySelector(".loader"),this.show=function(){null!==this.loader&&(this.loader.style.display="block")},this.hide=function(){null!==this.loader&&(this.loader.style.display="none")}}}),define("ProductUtils/ModalWindow",["ko","PageConfig","ProductUtils/ComponentLoader","ProductUtils/SpinnerLoader"],function(t,e,i,n){return function(){this.components=new i,this.body=document.body,this.html=document.querySelector("html"),this.container=document.querySelector("#modal"),this.titleText=t.observable(""),this.lockBodyScroll=!0,this.title=this.container.querySelector(".modal-title h1"),this.content=this.container.querySelector(".modal-content"),this.closeArrow=this.container.querySelector(".modal-close"),this.modalScroll=this.container.querySelector(".modal-scroll"),this.modalWindow=this.container.querySelector(".modal-window"),this.modalCloseButton=this.container.querySelector(".modal-window .modal-close button.link"),this.customClasses=[],this.config=e;var s="mobile"===this.config.platform?".loader.mobile":".loader.fullwidth";this.loader=new n({selector:s}),this.componentName=null,this.hasLoaded=!1,this.open=function(t){t.showSpinner&&!this.hasLoaded&&this.loader.show(),this.setup(t),this.bindClose(),this.modalCloseButton.focus()},this.close=function(){this.tearDown()}.bind(this),this.setClass=function(t){this.customClasses.push(t),this.container.classList.add(t)},this.setAriaLabel=function(t){void 0!==t?this.modalWindow.setAttribute("aria-label",t):this.modalWindow.removeAttribute("aria-label")},this.setTitle=function(t){this.titleText(t),this.title.innerHTML=t},this.addContent=function(t){this.content.innerHTML=t,this.modalScroll.style.display=""},this.componentLoaded=function(){this.hasLoaded=!0,this.loader.hide()},this.addComponent=function(t,e,i){this.componentName=t;var n="modal-"+this.componentName,s='<div id="'+n+'"></div>';this.addContent(s),e.loadedCallback=this.componentLoaded.bind(this),this.components.register({type:this.componentName,name:this.componentName,elementId:n,useComponentTemplate:!0},e,i)},this.setup=function(t){this.body.classList.add("lockScroll"),this.html.classList.add("lockScroll"),this.setClass("open"),this.params=t},this.tearDown=function(){this.components.unregister(this.componentName),this.setTitle(""),this.setAriaLabel(),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.trapFocus),this.title.removeEventListener("click",this.stopEventPropagation),this.content.removeEventListener("click",this.stopEventPropagation),this.closeArrow.removeEventListener("click",this.onArrowClick),this.container.removeEventListener("click",this.close),this.content.style.height="";for(var t=0;t<this.customClasses.length;t++)this.container.classList.remove(this.customClasses[t]);this.body.classList.remove("lockScroll"),this.html.classList.remove("lockScroll");var e=document.createEvent("CustomEvent");e.initCustomEvent("modalClosed",!1,!1,{}),this.body.dispatchEvent(e),this.params&&this.params.openerElement&&this.params.openerElement.focus()},this.checkEscapeKey=function(t){return 27===t.keyCode?!0:!1},this.onKeyUp=function(t){this.checkEscapeKey(t)&&this.close()}.bind(this),this.stopEventPropagation=function(t){t.stopPropagation()},this.onArrowClick=function(t){this.close(),t.preventDefault(),t.stopPropagation()}.bind(this),this.trapFocus=function(t){var e=this.container.querySelectorAll('a[href], button, input[type="text"]'),i=e[0],n=e[e.length-1];("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===i&&(n.focus(),t.preventDefault()):document.activeElement===n&&(i.focus(),t.preventDefault()))}.bind(this),this.bindClose=function(){document.addEventListener("keyup",this.onKeyUp),this.title.addEventListener("click",this.stopEventPropagation),this.content.addEventListener("click",this.stopEventPropagation),this.closeArrow.addEventListener("click",this.onArrowClick),this.container.addEventListener("click",this.close),document.addEventListener("keydown",this.trapFocus)}}}),define("Models/LocalStorageWrapper",[],function(){return function(){var t=window.localStorage;return this.isStorageAvailable=function(){try{var t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(i){return!1}},this.addItem=function(e,i,n){this.isStorageAvailable()&&t.setItem(e,JSON.stringify({item:i,expiry:n}))},this.getItem=function(e){if(this.isStorageAvailable()){var i=t.getItem(e);if(i){var n=JSON.parse(i);return new Date(n.expiry)<new Date?void t.removeItem(e):n.item}}},this}}),define("Components/delivery-and-returns/delivery-and-returns",["ko","text!./delivery-and-returns.html","ProductUtils/Ajax","Product.Config","PageConfig","ProductUtils/ModalWindow","ProductUtils/Analytics","Models/LocalStorageWrapper","Asos.Identity.Web.ClientSdk"],function(t,e,i,n,s,r,o,a,l){function c(e){this.state=e.state,this.isCssTagAdded=!1,this.resources=e.state.resources,this.features=e.state.features,this.deliveryReturnsLink=e.state.resources.DeliveryReturnsLink,this.apiUrl=s.siteDomain+e.state.resources.DeliveryUrl,this.hideDeliveryLink=e.hideDeliveryLink,this.modalWindow=new r,this.currentDeliveryAndReturnsData=null,this.isPremierUser=t.observable(null),this.ajax=new i;var n=new a,c={GB:!0,IE:!0,NL:!0,BE:!0,LU:!0,SE:!0,DK:!0,AT:!0,FI:!0,GR:!0,BG:!0,CY:!0,RO:!0,EE:!0,PL:!0,PT:!0,CZ:!0,LV:!0,LT:!0,SK:!0,SI:!0,HU:!0,HR:!0,MT:!0,HK:!0,SG:!0,NZ:!0};if(this.getExpiryDate=function(){var t=new Date;return t.setSeconds(0),t.setMilliseconds(0),t.setDate(t.getDate()+1),t},this.getDeliveryAndReturnsCountryCode=function(){var t=n.getItem("DeliveryAndReturnsCountryCode");return t?t:null}.bind(this),this.error=function(t){var e="";if(t.responseJSON&&Array.isArray(t.responseJSON)){var i=t.responseJSON[0];i.errorCode&&"DNR_"===i.errorCode.substring(0,4)&&(e=i.errorMessage)}e||(e=this.resources.DeliveryAndReturnsTechnicalDifficulties);var n={content:e};this.showModal("error-container",this.resources.DeliveryAndReturnsTechnicalDifficultiesTitle,n)}.bind(this),this.setDeliveryReturnsShippingOnlyLinkIfNotValidForCountry=function(t){c[t]||(this.deliveryReturnsLink=e.state.resources.DeliveryReturnsShippingOnlyLink)},this.setIsPremierUser=function(){var t=function(t){var e=t.length>0&&t.indexOf(s.countryCode)>=0?"true":"false";this.isPremierUser(e)}.bind(this);return l.customer.subscriptions().then(t,t.bind(this,[]))},"COM"===s.storeCode){var d=n.getItem("CountryCode");d?this.setDeliveryReturnsShippingOnlyLinkIfNotValidForCountry(d):s.geoCountryCode&&(this.setDeliveryReturnsShippingOnlyLinkIfNotValidForCountry(s.geoCountryCode),n.addItem("CountryCode",s.geoCountryCode,this.getExpiryDate()))}this.setDeliveryAndReturnsContent=function(t){var i={content:t.result,showCountrySelectionCallback:this.requestCountriesContent};this.currentDeliveryAndReturnsData=t,this.showModal("delivery-and-returns-content",i.content.title,i,e.state.resources.DeliveryAndReturnsModalAriaLabel)}.bind(this),this.setCountriesContent=function(t){var i={content:t.result.countries,currentDestination:this.currentDeliveryAndReturnsData.result.destination,countrySelectionCallback:this.newCountrySelected,cancelCallback:this.cancelCountrySelectionCallback};this.showModal("delivery-and-returns-countries",e.state.resources.DeliveryAndReturnsCountriesHeading,i,e.state.resources.DeliveryAndReturnsCountrySelectorModalAriaLabel)}.bind(this),this.showModal=function(t,i,n,s){this.modalWindow.close(),this.modalWindow.addComponent(t,n,e.state),this.modalWindow.setTitle(i),this.modalWindow.setClass("modal-"+t),this.modalWindow.setAriaLabel(s),this.modalWindow.open({openerElement:document.querySelector("button.link.product-delivery")})}.bind(this),this.requestDeliveryAndReturnsContent=function(t){var e="";t&&(e="&deliverycountry="+t);var i={url:this.apiUrl+"?api=1"+e+"&userispremiercustomer="+this.isPremierUser(),callerContext:"DeliveryAndReturns.MainContent",successCallback:this.setDeliveryAndReturnsContent,errorCallback:this.error,apiName:"DeliveryAndReturns"};this.ajax.execute(i)}.bind(this),this.requestCountriesContent=function(){var t={url:this.apiUrl+this.DELIVERY_COUNTRIES_URL_PATH,callerContext:"DeliveryAndReturns.CountriesList",successCallback:this.setCountriesContent,errorCallback:this.error,apiName:"DeliveryAndReturns"};this.ajax.execute(t)}.bind(this),this.addCssTag=function(){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",s.flagsCssPath),document.querySelector("head").appendChild(t),this.isCssTagAdded=!0},this.deliveryAndReturnsClicked=function(){this.isCssTagAdded||this.addCssTag();var t=function(){var t=void 0!==e.state.productData?e.state.productData.productId:null;o.fireEvent("pageInteraction",{context:"freeDeliveryAndReturns",productIID:t});var i=this.getDeliveryAndReturnsCountryCode();this.requestDeliveryAndReturnsContent(i)}.bind(this);this.setIsPremierUser().then(t,t)}.bind(this),this.cancelCountrySelectionCallback=function(){this.setDeliveryAndReturnsContent(this.currentDeliveryAndReturnsData)}.bind(this),this.newCountrySelected=function(t){n.addItem("DeliveryAndReturnsCountryCode",t,this.getExpiryDate()),this.requestDeliveryAndReturnsContent(t)}.bind(this)}return c.prototype.DELIVERY_COUNTRIES_URL_PATH="countries/?api=1",{viewModel:c,template:e}}),define("text!Components/shipping-restrictions/shipping-restrictions.html",[],function(){return'<div class="shipping-restrictions" data-bind="visible: showShippingRestrictions">\r\n    <span><a id="shippingRestrictionsLink" href="#" data-bind="text:shippingRestrictionsLabel, click:openShippingRestrictions"></a></span>\r\n</div>'}),define("ProductUtils/FullProductApiClient",["ProductUtils/Ajax","Product.Config","ProductUtils/UrlUtils","PageConfig"],function(t,e,i,n){return function(){this.productArray=[],this.callbacks=[],this.ajax=new t;var s=new i,r=function(t){return void 0!==t&&null!==t?!0:!1};this.getFullProduct=function(t,e,i){return null!==t&&void 0!==t?this.requestData(t,e,i):void 0},this.requestData=function(t,i,s){var r=e.fullProductUrl,o=i?"shippingrestrictions":void 0;return this.ajax.execute({storeParams:{store:n.storeCode,currency:n.currency,lang:n.language,sizeSchema:n.sizeSchema,keyStoreDataversion:n.keyStoreDataversion,expand:o},url:r+t,apiName:"Product Catalogue",callerContext:s,errorCallback:this.error}).done(this.productRetrieved.bind(this))}.bind(this),this.productRetrieved=function(t){t.media.images=this.sortProductImages(t.media.images),t.media.catwalkUrl=this.getSingleCatwalkUrl(t);for(var e=0;e<t.media.images.length;e++){var i=t.media.images[e];i.isVisible=i.isPrimary||!r(i.colourWayId),i.url=s.formatUrl(i.url)}for(var n=0;n<t.variants.length;n++)t.variants[n].size=t.variants[n].brandSize,t.variants[n].sizeDescription&&(t.variants[n].size+=" - "+t.variants[n].sizeDescription);return t}.bind(this),this.sortProductImages=function(t){return t.sort(function(t,e){var i=e.isPrimary.toLocaleString().localeCompare(t.isPrimary.toLocaleString());if(0!==i)return i;if(void 0===t.colour||""===t.colour){if(void 0===e.colour||null===e.colour||""===e.colour)return t.type.toLocaleString().localeCompare(e.type.toLocaleString());if(e.colour&&e.colour.length>0)return 1}if(void 0===e.colour||null===e.colour||""===e.colour)return-1;var n=t.colour.toLocaleString().localeCompare(e.colour.toLocaleString());return n}),t}.bind(this),this.getSingleCatwalkUrl=function(t){return t&&t.media&&t.media.catwalk&&Array.isArray(t.media.catwalk)&&t.media.catwalk.length?t.media.catwalk[0].url:void 0},this.error=function(){}.bind(this)}}),define("Components/shipping-restrictions/shipping-restrictions",["ko","$","text!./shipping-restrictions.html","ProductUtils/Ajax","ProductUtils/ModalWindow","ProductUtils/FullProductApiClient","PageConfig","Product.Config"],function(t,e,i,n,s,r,o,a){function l(i){var l=new r;this.state=i.state,this.isInStock=this.state.productData.isInStock,this.ajax=new n;var c=i.data.shippingRestrictions;this.showShippingRestrictions=t.computed(function(){return this.isInStock&&c.shippingRestrictionsVisible}.bind(this)),this.shippingRestrictionsLabel=c.shippingRestrictionsLabel,this.getIncludedCountries=function(t,e){return t.excludedCountryCodes.length?e.filter(function(e){return 0===t.excludedCountryCodes.filter(function(t){return e.country===t}).length}).map(function(t){return t.name}):t.includedCountryCodes.length?e.filter(function(e){return t.includedCountryCodes.filter(function(t){return e.country===t}).length>0}).map(function(t){return t.name}):e.map(function(t){return t.name})},this.openShippingRestrictions=function(){var t=l.getFullProduct(i.data.productId,!0,"ShippingRestrictions"),n=this.ajax.execute({storeParams:{lang:o.language,keyStoreDataversion:o.keyStoreDataversion},url:a.storeApiClientUrl,api:"Store",callerContext:"ShippingRestrictions"});return e.when(t,n).done(function(t,e){var i=t[0].shippingRestriction,n=this.getIncludedCountries(i,e[0]);this.showModalContent({ShippableCountries:n,Description:this.state.resources.OnlyShips})}.bind(this)),!1},this.showModalContent=function(t){var e=new s;e.addComponent("shipping-restrictions-content",t,this.state),e.setTitle(this.state.resources.ShippingRestrictionsHeading),e.setClass("modal-shipping-restrictions-content"),e.open({showSpinner:!1,openerElement:document.querySelector("#shippingRestrictionsLink")})}}return{viewModel:l,template:i}}),define("text!Components/stock-price-retry/stock-price-retry.html",[],function(){return'<!-- ko if : state.showStockPriceRetry -->\r\n<div class="container">\r\n    <h1 data-bind="text: resources.StockPriceRetryTitle"></h1>\r\n    <div data-bind="text: resources.StockPriceRetryContent"></div>\r\n\r\n    <a>\r\n        <span data-bind="click: retry, text: resources.StockPriceRetryButton"></span>\r\n    </a>\r\n</div>\r\n\r\n<!-- /ko -->'}),define("Components/stock-price-retry/stock-price-retry",["ko","text!./stock-price-retry.html"],function(t,e){function i(t){this.resources=t.state.resources,this.retry=function(){t.state.retryCallback()}}return{viewModel:i,template:e}}),define("text!Components/save-button/save-button.html",[],function(){return'<div class="save-button" data-bind="click: componentClicked">\r\n    <a class="save-button-link" href="#" data-bind="click:saveProduct, clickBubble:false, css: { \'animate\' : isSaved, \'active\': active, \'out-of-stock-save-button\': !inStock }, markAndMeasure: \'pdp:save_for_later_interactive\'">\r\n        <span class="heartPrimary"></span>\r\n        <span data-bind="attr: {class : getCelebrationIconClass()}">\r\n            <span class="celebrationAnimation">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n            </span>\r\n        </span>\r\n    </a>\r\n    <span class="toolTip" data-bind="html:message,visible:displayMessage,css: { \'fade\' : fade , \'error\':isError , \'nonError\':!isError()}"></span>\r\n</div>'}),define("Models/SavedItem",[],function(){return function(t,e,i,n,s,r){this.productId="",this.variantId="",this.sizeId="-1",this.imageUrl="",this.colour="",this.sellingFast=!1,this.init=function(){void 0!==t&&this.setProductId(t),void 0!==e&&this.setVariantId(e),void 0!==i&&this.setSizeId(i),void 0!==n&&this.setImageUrl(n),void 0!==s&&this.setColour(s),void 0!==r&&this.setSellingFast(r)},this.setProductId=function(t){var e=parseInt(t);e&&(this.productId=e)},this.setVariantId=function(t){var e=parseInt(t);e&&(this.variantId=e)},this.setSizeId=function(t){var e=parseInt(t);e&&(this.sizeId=e)},this.setImageUrl=function(t){"string"==typeof t&&(this.imageUrl=t)},this.setColour=function(t){"string"==typeof t&&(this.colour=t)},this.setSellingFast=function(t){"boolean"==typeof t&&(this.sellingFast=t)},this.setValuesViaState=function(t){t&&(void 0!==t.selectedColour()&&this.setColour(t.selectedColour().colourName),void 0!==t.selectedSize()&&(this.setVariantId(t.selectedSize().variantId),this.setSizeId(t.selectedSize().sizeId)),void 0!==t.sellingFast&&this.setSellingFast(t.sellingFast))},this.getObject=function(){return"-1"===this.sizeId&&this.setColour(""),{productId:this.productId,variantId:this.variantId,sizeId:this.sizeId,imageUrl:this.imageUrl,colour:this.colour,sellingFast:this.sellingFast}},this.init()}}),define("Components/save-button/save-button",["ko","text!./save-button.html","Models/SavedItem","Asos.Customer.SavedItems.Sdk","featureSwitches","PageConfig","ProductUtils/Analytics","ProductUtils/NewRelicLogger"],function(t,e,i,n,s,r,o,a){function l(e){function s(t,i){e.state&&e.state.toast&&(i&&e.state.toast.message(i),e.state.toast.displayMessage(t))}function r(){var t=l();if("object"==typeof t&&Object.keys(t).length){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!0;return!1}return!1}function l(){return window.__sdk.features.getFeaturesState()["web-event-icon"]}function c(){this.isSaved(!1),this.active(!1),this.displayMessage(!1),s(!1),clearTimeout(this.fadeTimer),clearTimeout(this.hideTimer)}function d(t){t&&(t.selectedSize.subscribe(function(){c.call(this)}.bind(this)),t.selectedColour.subscribe(function(){c.call(this)}.bind(this)))}if(this.active=t.observable(!1),this.fade=t.observable(!0),this.displayMessage=t.observable(!1),this.message=t.observable(),this.isSaving=!1,this.isSaved=t.observable(!1),this.isCelebrationActive=r(),this.isError=t.observable(!1),this.isMixMatch=e.isMixMatch!==!0?!1:!0,this.hasSizeSelected=!1,this.fadeTimer=null,this.hideTimer=null,this.isMixMatch)for(var u=0;u<e.state.length;u++)d.call(this,e.state[u]);else d.call(this,e.state);this.getCelebrationIconClass=function(){var t="";if(this.isCelebrationActive){var e=l(),i=Object.keys(e).filter(function(t){return e[t]});i.length&&(t=" "+i[0])}return"heartSecondary"+t},this.inStock=!0,this.isInStock=function(t){return t?t.length>0?!0:t.productData.isInStock:!0},this.inStock=this.isInStock(e.state),this.saveProduct=function(){this.active(!0);var t;if(!this.inStock||this.isSaving||this.isSaved())return!1;var s;if(this.isMixMatch)s=this.createProductArray(e.state),t=n.addProducts(s),o.saveVariants(s,e.context);else{var r=new i(e.productId,"","",e.productImage,"");r.setValuesViaState(e.state),s=r.getObject(),t=n.addProduct(s),o.saveVariants([s],e.context)}return this.watchPromise(t,s),!1},this.watchPromise=function(t,i){var n=(Array.isArray(e.state)?e.state[0]:e.state)||{},s=n.resources||{};this.isSaving=!0,t.then(function(){this.isSaved(!0),this.isSaving=!1}.bind(this),function(){a.logError(new Error(a.ERROR_TYPE.UserActionFailed),{action:"SaveForLater",additionalData:JSON.stringify(i)}),this.active(!1),this.isSaving=!1,this.showMessage(s.ErrorNotSaved,!0)}.bind(this))},this.createProductArray=function(t){for(var e,n=[],s=0;t.length>s;s++){var r=void 0!==t[s].selectedSize()?t[s].selectedSize().sizeId:"-1",o=void 0!==t[s].selectedSize()?t[s].selectedSize().variantId:"",a=void 0!==t[s].selectedColour()?t[s].selectedColour().colourName:"";e=new i(t[s].productData.productId,o,r,t[s].productImage,a),this.hasSizeSelected=!0,n.push(e.getObject())}return n},this.componentClicked=function(){return this.displayMessage(!1),s(!1),!0}.bind(this),this.showMessage=function(t,e){this.isError(e),this.message(t),this.displayMessage(!0),s(!0,t),this.fade(!1),this.isSaved(!1),this.runTimer()},this.runTimer=function(){this.fadeTimer=setTimeout(function(){this.fade(!0),this.hideTimer=setTimeout(function(){this.displayMessage(!1)}.bind(this),1e3)}.bind(this),4500)}}return{viewModel:l,template:e}}),define("text!Components/add-item/add-item.html",[],function(){return'<div class="add-item" data-bind="visible: isVisible">\r\n    <div class="is-add-item-saving" data-bind="visible: isBusy"></div>\r\n    <span class="aria-live" aria-role="status" aria-live="polite" data-bind="{ text: ariaLiveText, attr: { \'aria-label\': ariaLiveText }}"></span>\r\n    <a href="#" class="add-button" data-bind="click: addToBag, css : buttonCss, attr: { \'aria-label\': resources.AddToBag }, markAndMeasure: \'pdp:add_to_bag_interactive\'">\r\n        <span class="product-tick" data-bind="visible: showProductTick, text: iconText"></span>\r\n        <span data-bind="text: buttonText"></span>\r\n    </a>\r\n</div>'}),define("ProductUtils/ScrollTo",["$","ko"],function(t,e){return this.scrollToElement=function(e,i){var n=t(e);n.length>0&&t("html, body").animate({scrollTop:n.offset().top+i+"px"},"fast")},this.scrollToTop=function(){t("html, body").animate({scrollTop:"0px"},"fast")},e.bindingHandlers.scrollTo={init:function(i,n){var s=n(),r=e.unwrap(s),o=r,a=0;"object"==typeof r&&(o=r.selector,r.topPadding&&(a=r.topPadding)),t(i).click(function(){this.scrollToElement(o,a)}.bind(this))}},e.bindingHandlers.scrollToTop={init:function(e){t(e).click(function(){this.scrollToTop()}.bind(this))}},this}),define("Components/add-item/add-item",["$","ko","text!./add-item.html","ProductUtils/Bag","ProductUtils/ScrollTo","PageConfig"],function(t,e,i,n,s,r){function o(t){function i(e,i){t.state&&t.state.toast&&(i&&t.state.toast.message(i),t.state.toast.displayMessage(e))}this.isVisible=t.state.productData.isInStock,this.imgUrl=t.productImage,this.scrollToTop=t.scrollToTop,this.url=t.url,this.productId=t.state.productData.productId,this.resources=t.state.resources,this.selectedColour=t.state.selectedColour,this.selectedSize=t.state.selectedSize,this.noColourSelected=t.state.showNoColourSelectedWarning,this.noSizeSelected=t.state.showNoSizeSelectedWarning,this.addedToBag=e.observable(!1),this.showProductTick=e.observable(!1),this.failedToAdd=t.state.showAddToBagError,this.failedToAddMessage=t.state.addToBagErrorMessage,this.showTryAgain=e.observable(t.showTryAgain?t.showTryAgain:!1),this.buttonText=e.observable(this.resources.AddToBag),this.isBusy=e.observable(!1),this.ariaLiveText=e.computed(function(){var t=this.failedToAddMessage();return t?t:this.addedToBag()?this.resources.AddToBagSuccess:""},this),this.buttonCss=e.computed(function(){return this.failedToAdd()&&this.showTryAgain()?"failed":this.isBusy()?"is-disabled":""}.bind(this)),this.iconText=e.computed(function(){return this.addedToBag()?"added to basket":"add to basket"}.bind(this)),this.selectedSize.subscribe(function(t){void 0!==t&&this.noSizeSelected()&&this.noSizeSelected(!1)}.bind(this)),this.selectedColour.subscribe(function(t){void 0!==t&&this.noColourSelected()&&this.noColourSelected(!1)}.bind(this));var o=new n(t,t.initiator);this.addToBag=function(){this.isBusy()||(this.revertState(),i(!1),void 0===this.selectedColour()?this.noColourSelected(!0):void 0===this.selectedSize()?this.noSizeSelected(!0):(this.isBusy(!0),o.addItems(this.selectedSize(),this.addToBagResult)))};var a;this.addToBagResult=function(e){this.isBusy(!1),e.success?(this.addedToBag(!0),"buyTheLook"!==t.initiator&&this.showProductTick(!0),this.buttonText(this.resources.AddToBagSuccess),this.scrollToTop&&"mobile"!==r.platform&&s.scrollToTop(),a&&clearTimeout(a),this.showMessage(this.resources.AddToBagToastMessage),a=setTimeout(this.revertState,5e3)):(this.showTryAgain()&&this.buttonText(this.resources.AddToBagTryAgain),this.failedToAdd(!0),this.failedToAddMessage(e.error))}.bind(this),this.revertState=function(){this.buttonText(this.resources.AddToBag),this.addedToBag(!1),this.showProductTick(!1),this.failedToAdd(!1),this.failedToAddMessage(""),this.isBusy(!1)}.bind(this),this.showMessage=function(t){"mobile"===r.platform&&i(!0,t)}}return{viewModel:o,template:i}}),define("text!Components/afterpay/afterpay.html",[],function(){return'<!-- ko if : shouldDisplayMessage -->\r\n<a data-bind="attr: { href: informationLinkUrl }" target="_blank" class="afterpay-component">\r\n    <p data-bind="text: afterpayMessaging"></p>\r\n    <span class="afterpay-information">\r\n        <span class="afterpay-logo" data-bind=\'attr : { "aria-label": afterpayLogoTranslation }\'></span>\r\n        <span class="product-information-light" data-bind=\'attr : { "aria-label": afterpayMoreInformationTranslation }\'></span>\r\n    </span>\r\n</a>\r\n<!-- /ko -->\r\n'}),define("asos-web-afterpay-installments",[],function(){"use strict";var t=function(t){return t?e(t)[0]:void 0},e=function(t){if(t){var e=Math.round(100*t),i=4,n=i-1,s=Math.ceil(e/i),r=e-n*s;return[s/100,s/100,s/100,Math.floor(r)/100]}},i={getSummary:t,getInstallments:e};return i}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Asos.Web.Currency.Formatter",[],e):"object"==typeof exports?exports.currencyFormatter=e():(t.asos=t.asos||{},t.asos.currencyFormatter=e())}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(n,s,function(e){return t[e]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatValue=void 0;var n=function(t){return t&&t.__esModule?t:{"default":t}}(i(1)),s=new RegExp(/(#+)([^#])(#+)([^#]|$)(#+|$)/g),r=function(t,e){if(e&&!function(t){return Math.round(t)===t}(t))throw new Error("Value must be an integer when formatAsInteger is set to true, else numeric precision will be lost")};e.formatValue=function(t,e,i){var o=Number(t);if(isNaN(o)||!isFinite(o))return t;r(o,i);var a=n["default"].cultures[e]||n["default"].cultures["default"],l=function(t){var e=t.split(s).filter(function(t){return""!==t});return e.length<3?void 0:{digitGroupingLength:e[0].length,digitGroupingSymbol:e[1],digitsBeforeDecimal:e[2].length,decimalSeparator:e[3],decimalPlaces:e[4]?e[4].length:0}}(n["default"].numberFormats[a.numberFormat]);return l?function(t,e,i){var n=i.digitGroupingSymbol,s=i.digitGroupingLength,r=i.digitsBeforeDecimal,o=i.decimalSeparator,a=i.decimalPlaces,l=!!o&&!e,c=function(t){return t.split("").reverse().join("")}(e?Math.abs(t).toString():Math.abs(t).toFixed(a)).split(""),d=l?a+1+r:r,u=c.reduce(function(t,e,i){return l||i!==r?l&&i===a?""+o+t:i>=d&&(i-d)%s==0?""+e+n+t:""+e+t:""+e+n+t});return 0>t?"-"+u:u}(o,i,l):t}},function(t){t.exports={cultures:{"default":{currencyFormatting:{"default":"1",RUB:"2"},numberFormat:"1"},"ar-AE":{currencyFormatting:{"default":"4"},numberFormat:"1"},"ar-KW":{currencyFormatting:{"default":"4"},numberFormat:"1"},"ar-QA":{currencyFormatting:{"default":"4"
},numberFormat:"1"},"ar-SA":{currencyFormatting:{"default":"4"},numberFormat:"1"},"cs-CZ":{currencyFormatting:{"default":"4"},numberFormat:"3"},"de-DE":{currencyFormatting:{"default":"4"},numberFormat:"2"},"en-AU":{currencyFormatting:{"default":"1",RUB:"2"},numberFormat:"1"},"en-GB":{currencyFormatting:{"default":"1",RUB:"2"},numberFormat:"1"},"en-US":{currencyFormatting:{"default":"1",RUB:"2"},numberFormat:"1"},"es-AR":{currencyFormatting:{"default":"1",RUB:"2"},numberFormat:"1"},"es-CL":{currencyFormatting:{"default":"1",RUB:"2"},numberFormat:"1"},"es-ES":{currencyFormatting:{"default":"4"},numberFormat:"2"},"es-MX":{currencyFormatting:{"default":"1",RUB:"2"},numberFormat:"1"},"fa-IR":{currencyFormatting:{"default":"4"},numberFormat:"1"},"fr-FR":{currencyFormatting:{"default":"4"},numberFormat:"3"},"he-IL":{currencyFormatting:{"default":"4"},numberFormat:"1"},"hi-IN":{currencyFormatting:{"default":"4"},numberFormat:"1"},"it-IT":{currencyFormatting:{"default":"4"},numberFormat:"2"},"ja-JP":{currencyFormatting:{"default":"2"},numberFormat:"1"},"ko-KR":{currencyFormatting:{"default":"2"},numberFormat:"1"},"ms-MY":{currencyFormatting:{"default":"2"},numberFormat:"1"},"nl-NL":{currencyFormatting:{"default":"2"},numberFormat:"2"},"pl-PL":{currencyFormatting:{"default":"4"},numberFormat:"3"},"ru-RU":{currencyFormatting:{"default":"4"},numberFormat:"3"},"sv-SE":{currencyFormatting:{"default":"4"},numberFormat:"2"},"tr-TR":{currencyFormatting:{"default":"4"},numberFormat:"1"},"uk-UA":{currencyFormatting:{"default":"4"},numberFormat:"4"}},currencyFormats:{1:{negative:"-{C}{N}",positive:"{C}{N}"},2:{negative:"-{C} {N}",positive:"{C} {N}"},3:{negative:"-{N}{C}",positive:"{N}{C}"},4:{negative:"-{N} {C}",positive:"{N} {C}"}},currencySymbols:{AED:"AED",AUD:"$",CAD:"C$",CHF:"CHF",CNY:"",CZK:"K",DKK:"DKK",EUR:"",GBP:"",HKD:"HKD$",ILS:"ILS",INR:"INR",IRR:"IRR",JPY:"JPY",KRW:"KRW",KWD:"KWD",MYR:"RM",NOK:"NOK",NZD:"NZD$",PLN:"PLN",QAR:"QAR",RUB:".",SAR:"SAR",SEK:"SEK",SGD:"SGD$",TRY:"TRY",TWD:"NT$",UAH:"UAH",USD:"$"},numberFormats:{1:"###,###.##",2:"###.###,##",3:"### ###,##",4:"### ###.##"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCurrencySymbol=e.formatPrice=e.formatValue=void 0;var n=i(0),s=i(3);e.formatValue=n.formatValue,e.formatPrice=s.formatPrice,e.getCurrencySymbol=s.getCurrencySymbol},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatPrice=e.getCurrencySymbol=void 0;var n=function(t){return t&&t.__esModule?t:{"default":t}}(i(1)),s=i(0),r=e.getCurrencySymbol=function(t){var e=n["default"].currencySymbols[t];return e||""},o=(e.formatPrice=function(t,e,i,n){var l=Number(t);if(!o(l))return t;var c=r(i),d=a(e,i);if(!c)return t;var u=(0,s.formatValue)(Math.abs(l),e,n),h=(0>l?d.negative:d.positive).replace("{C}",c);return h=h.replace("{N}",u)},function(t){return!isNaN(t)&&isFinite(t)}),a=function(t,e){var i=n["default"].cultures[t]||n["default"].cultures["default"],s=i.currencyFormatting[e]||i.currencyFormatting["default"];return n["default"].currencyFormats[s]}}])}),define("Components/afterpay/afterpay",["ko","text!./afterpay.html","PageConfig","asos-web-afterpay-installments","Asos.Web.Currency.Formatter"],function(t,e,i,n,s){function r(e){this.afterpay=e.state.afterpay,this.instalmentsTranslation=e.state.resources.AfterpayInstalments,this.afterpayLogoTranslation=e.state.resources.AfterpayLogo,this.afterpayMoreInformationTranslation=e.state.resources.AfterpayMoreInformation,this.price=e.data.price,this.informationLinkUrl=i.siteDomain+"/customer-service/customer-care/afterpay/?WT.oss=afterpay&ctaref=product%20page",this.shouldDisplayMessage=t.computed(function(){return this.afterpay?this.price()>=this.afterpay.minimumTransactionAmount&&this.price()<=this.afterpay.maximumTransactionAmount:void 0}.bind(this)),this.afterpayMessaging=t.computed(function(){var t=n.getSummary(this.price()),e=s.formatPrice(t,i.language,i.currency);return this.instalmentsTranslation.replace("{price}",e)}.bind(this))}return{viewModel:r,template:e}}),define("text!Components/fit-analytics/fit-analytics.html",[],function(){return'<div id="product-size" data-bind=\'component:{\r\n    name: "product-size",\r\n    params: {\r\n        hideLabels: false,\r\n        hideLowInStock: false,\r\n        showSizeGuide: true,\r\n        state: state,\r\n        data: product,\r\n        useFitAnalytics: true,\r\n        hideOnOutOfStock : true}\r\n    }\'></div>\r\n<div class="aside-action">\r\n    <div id="product-add" data-bind=\'component:{name: "add-item",\r\n                     params:{\r\n                         productId: product.id,\r\n                         productImage : product.images[0].url,\r\n                         scrollToTop: true,\r\n                         state: state,\r\n                         initiator : "main"\r\n                     }}\'></div>\r\n    <div id="product-save" data-bind=\'component:{name: "save-button",\r\n                     params:{\r\n                         productId: product.id,\r\n                         productImage : product.images[0].url,\r\n                         state: state\r\n                     }\r\n                     }\'></div>\r\n    <div class="add-item-error error-message" data-bind="visible: state.showAddToBagError, html: state.addToBagErrorMessage" style="display: none">\r\n    </div>\r\n</div>\r\n<!-- ko if: showLowerSection -->\r\n<div class="fit-analytics lower">\r\n    <div class="size-guide-wrapper">\r\n        <label data-bind="text: lowerHeader"></label>\r\n        <span data-bind="text: lowerPreLinkText"></span>\r\n        <a data-bind="click: openRecommendations, text: lowerLinkText"></a>\r\n        <span data-bind="text: lowerPostLinkText"></span>\r\n        <div id="size-guide" class="size-guide" data-bind=\'component: { name: "size-guide", params: {dictionary: sizeGuideDictionary , url: product.sizeGuide, visible: state.showSizeGuide, id: product.id}}\'></div>\r\n        <span data-bind="text: lowerPostSizeGuideText"></span>\r\n    </div>\r\n</div>\r\n<!-- /ko -->\r\n'}),define("Components/fit-analytics/fit-analytics",["ko","text!./fit-analytics.html","$","PageConfig","ProductUtils/Analytics","Asos.Identity.Web.ClientSdk"],function(t,e,i,n,s,r){function o(e){function o(){return this.resources.Fit_Analytics_Lower_Intro}function a(t){return t&&t.split("{#}")[0]}function l(t){return t&&t.split("{#}")[1].split(/{sizeGuide=".*?"}/)[0]}function c(t){var e=t&&t.split("{#}")[1].match(/{sizeGuide="(.*?)"}/);return e&&e[1]}function d(t){return t&&t.split("{#}")[1].split(/{sizeGuide=".*?"}/)[1]}function u(){switch(n.storeCode){case"COM":return"GB";case"ROW":return"ASOS_ROW";case"ROE":return"ASOS_ROE";default:return n.storeCode}}var h=this;this.enabled=!1,this.visible=t.observable(!1),this.viewData=e.data,this.state=e.state,this.product=e.data,this.widget=void 0,this.resources=e.state.resources,this.isRecognised=t.observable(!1),this.features=e.state.features,this.state.fitAnalyticsViewModel(this);var p=[],m=!1;this.analyticsContext={analyticsLoadEventFired:!1,hasPreviousPurchases:!1,bodyPart:void 0},this.RecommendationType={None:1,Partial:2,Complete:3,OOS:4},this.recommendation=t.observable(void 0),this.recommendedSize=t.observable(),this.recommendedDisplaySize=t.observable(),this.recommendationText=t.observable(),this.userInfoLevel=t.observable(),this.displayLinkText=t.computed(function(){return-1!==[this.RecommendationType.None,this.RecommendationType.Complete,this.RecommendationType.Partial,this.RecommendationType.OOS].indexOf(this.recommendation())},this),this.recommendedSize.subscribe(function(t){this.recommendedDisplaySize(this.trimRecommendationSize(t))}.bind(this)),this.init=function(){var t=this.isMobileDevice(n.platform);this.isEnabled(this.viewData.isInStock,t,n.storeCode,this.features)&&r.customer.customerId().then(function(e){r.customer.isRecognised().then(function(i){this.isRecognised(i);var n=this.createFitData(this.viewData,e,this.state,t);this.createWidget(n)}.bind(this))}.bind(this))},this.createFitData=function(t,e,i,s){e||(e="");var r={productId:"asos-"+t.productCode,thumbnail:i.mainImage().url,userId:e,showMobile:s,prefetch:!0,shopCountry:u(),language:n.languageShort,shopSizingSystem:n.sizeSchema,manufacturedSizes:this.getSizes(t.variants)};return r},this.isMobileDevice=function(t){return"mobile"===t},this.isEnabled=function(t,e,i,n){return t&&this._hasMoreThanOneSize()?e?n.fitAnalyticsEnabledStoresMobile.indexOf(i.toLowerCase())>-1:n.fitAnalyticsEnabledStores.indexOf(i.toLowerCase())>-1:!1},this.getSizes=function(t){for(var e={},i=0;i<t.length;i++){var n=this.formatSizes(t[i].size);e[n]=t[i].isInStock}return e},this._hasMoreThanOneSize=function(){return!this.product.isNoSize&&!this.product.isOneSize}.bind(this),this.formatSizes=function(t){var e=t.split("-"),i=e[0].replace(/\s+$/,"");return i};var f=function(){var t={recommendationType:h.recommendation(),hasPreviousPurchaseData:h.analyticsContext.hasPreviousPurchases,userSignedIn:h.isRecognised(),recommendedSize:h.recommendedSize()};return h.analyticsContext.bodyPart&&(t.bodyCategory=h.analyticsContext.bodyPart),t};this.getPurchaseChildSKU=function(t){return t.variantId.replace(/^asos-/i,"")},this.onMetricEventReceived=function(t,e){if(this.fireAnalyticsLoadEvent(),m&&p.push({event:t,value:e}),"managePurchasesScreen"===t&&"submit"===e){var i=h.widget.data.purchases.filter(function(t){return t.isIncluded}).map(this.getPurchaseChildSKU),n=h.widget.data.purchases.filter(function(t){return!t.isIncluded}).map(this.getPurchaseChildSKU);this.fireAnalyticsSaveSelectionsEvent(i,n)}},this.fireAnalyticsSaveSelectionsEvent=function(t,e){s.fireFitAnalyticsSaveSelectionsEvent({selected:t,deselected:e})},this.fireAnalyticsLoadEvent=function(){if(this.visible()&&!this.analyticsContext.analyticsLoadEventFired){var t=f();s.fireFitAnalyticsLoadEvent(t),this.analyticsContext.analyticsLoadEventFired=!0}},this.fireAnalyticsOutOfScaleEvent=function(){var t=f();s.fireFitAnalyticsOutOfScaleEvent(t)},this.trimRecommendationSize=function(t){return t?t.replace(/(in|cm|UK|EU|Chest)/g,"").split("-")[0].trim():t},this.onRecommendationReceived=function(t,e){if(this.visible(!0),e&&void 0!==e.hasPastPurchases&&(this.analyticsContext.hasPreviousPurchases=e.hasPastPurchases),this.recommendation(this.RecommendationType.None),this.recommendedSize(void 0),this.recommendationText(this.resources.Fit_Analytics_Rec_None),"new user"===t)return void this.fireAnalyticsLoadEvent();if(e){if(this.userInfoLevel(e.userInfoLevel),e.outOfScale)return void this.fireAnalyticsOutOfScaleEvent();if(t&&this.recommendedSize(t),e.outOfStock)return this.recommendationText(this.resources.Fit_Analytics_Rec_OOS.replace("{size}",t)),this.recommendation(this.RecommendationType.OOS),void this.fireAnalyticsLoadEvent();1===e.userInfoLevel?(this.recommendationText(this.resources.Fit_Analytics_Rec_Partial.replace("{size}",t)),this.recommendation(this.RecommendationType.Partial)):2===e.userInfoLevel&&(this.recommendationText(this.resources.Fit_Analytics_Rec_Complete.replace("{size}",t)),this.recommendation(this.RecommendationType.Complete)),this.lastRecommendationDetails=e,this.fireAnalyticsLoadEvent()}},this.onLoadReceived=function(t){t&&t.garment&&(this.analyticsContext.bodyPart=t.garment.category),this.isLoaded(!0),this.fireAnalyticsLoadEvent()},this.openRecommendations=function(){if(this.widget){this.widget.open();var t=f();s.fireFitAnalyticsOpenWidgetEvent(t)}},this.onWidgetOpened=function(){m=!0},this.onWidgetClosed=function(){var t=f();t.widgetScreenEvents=p.slice(0),s.fireFitAnalyticsCloseWidgetEvent(t),m=!1,p.length=0},this.isLoaded=t.observable(!1),this.createWidget=function(t){window._fitAnalytics=function(){h.widget=new FitAnalyticsWidget({productId:t.productId,thumb:t.thumbnail,manufacturedSizes:t.manufacturedSizes,userId:t.userId,language:t.language,showMobile:t.showMobile,shopCountry:t.shopCountry,shopSizingSystem:t.shopSizingSystem,prefetch:t.prefetch,close:function(t,e,i){h.onRecommendationReceived(e,i),h.onWidgetClosed()},open:function(){h.onWidgetOpened()},metricEvent:function(t,e,i){h.onMetricEventReceived(t,e,i)},error:function(){},recommend:function(t,e,i){h.onRecommendationReceived(e,i)},load:function(t,e){h.onLoadReceived(e),h.widget.getRecommendation(),i("#existing-size-chart").hide()}})};var e=document.createElement("script");e.id="fitAnalyticsScript",e.src="//widget.fitanalytics.com/widget.js",e.crossOrigin="anonymous",document.body.appendChild(e)},this.showLowerSection=t.computed(function(){return this.isLoaded()?2!==this.userInfoLevel()?!0:this.state.showSizeGuide():!1}.bind(this)),this.getLowerText=function(t){if(this.recommendation()===this.RecommendationType.None)return t(this.resources.Fit_Analytics_Lower_Rec_None);switch(this.userInfoLevel()){case 1:return t(this.resources.Fit_Analytics_Lower_Rec_Partial);case 2:return t(this.resources.Fit_Analytics_Lower_Rec_Complete);default:return t(this.resources.Fit_Analytics_Lower_Rec_None)}},this.lowerHeader=this.resources.Fit_Analytics_Lower_Header,this.lowerPreLinkText=t.computed(function(){return o.call(this)}.bind(this)),this.lowerPostLinkText=t.computed(function(){return this.state.showSizeGuide()?this.getLowerText(l):void 0}.bind(this)),this.lowerPostSizeGuideText=t.computed(function(){var t=this.getLowerText(d);if(t&&!(t.length<=1))return t}.bind(this)),this.lowerLinkText=t.computed(function(){var t=this.getLowerText(a);if(this.lowerPostLinkText())return t;var e=this.getLowerText(d);return!e||e.length>1?t:t+e}.bind(this)),this.sizeGuideDictionary={SizeGuide:t.computed(function(){if(this.state.showSizeGuide()){var t=this.getLowerText(c),e=this.getLowerText(d);return!e||e.length>1?t:t+e}}.bind(this))},this.init()}return{viewModel:o,template:e}}),define("text!Components/toast/toast.html",[],function(){return'<span class="toast" data-bind="html: message, visible: displayMessage, css: { \'fade\': fade }"></span>'}),define("Components/toast/toast",["ko","text!./toast.html"],function(t,e){function i(e){this.fade=t.observable(!1),this.displayMessage=e.state.toast.displayMessage,this.message=e.state.toast.message,this.fadeTimer=null,this.hideTimer=null,this.message.subscribe(function(t){clearTimeout(this.fadeTimer),clearTimeout(this.hideTimer),t&&(this.fade(!1),this.runTimer())}.bind(this)),this.displayMessage.subscribe(function(t){clearTimeout(this.fadeTimer),clearTimeout(this.hideTimer),t&&(this.fade(!1),this.runTimer())}.bind(this)),this.runTimer=function(){this.fadeTimer=setTimeout(function(){this.fade(!0),this.hideTimer=setTimeout(function(){this.displayMessage(!1)}.bind(this),1e3)}.bind(this),4500)}}return{viewModel:i,template:e}}),define("ProductUtils/OutOfStockAnimator",[],function(){function t(){function t(){return window.innerWidth<720}function e(){var t=P.filter(function(t){return S.submodulesCompleted[t]()===S.CAROUSEL_LOADING_STATE.NOT_LOADED});return 0!==t.length}function i(){var t=P.filter(function(t){return S.submodulesCompleted[t]()===S.CAROUSEL_LOADING_STATE.HAS_DATA});return 0!==t.length}function n(){if(x===C.ANIMATION_STATUS.UP){for(var t in T)T[t].dispose();b.removeEventListener("click",n,!0),C.animateDown()}}function s(){setTimeout(function(){b.addEventListener("click",n,!0)},C.ANIMATION_DURATION)}function r(){if(x===C.ANIMATION_STATUS.INITIAL&&S&&!e()&&i()){if(a(),!y)return setTimeout(r,C.DOM_CHECK_INTERVAL);C.animateUp(),s()}}function o(){x===C.ANIMATION_STATUS.INITIAL||i()||C.animateDown()}function a(){p=document.querySelector("#asos-product"),g=document.querySelector("#lower-content"),m=document.querySelector(".product-gallery"),w=document.querySelector(".product-gallery-static"),b=document.querySelector("#asos-product > #core-product"),y=document.querySelector(".product-code"),f=document.getElementById("aside-content"),v=f.innerHTML}function l(t){return t.getBoundingClientRect().top+document.documentElement.scrollTop}function c(t){return t.getBoundingClientRect().bottom+document.documentElement.scrollTop}function d(){f.style.display="none",f.innerHTML="";var t=document.createElement("div");t.id="newAsideContainer",t.classList.add("layout-aside"),t.innerHTML=v,g.insertBefore(t,g.firstChild)}function u(){var t=document.getElementById("newAsideContainer");f.innerHTML=t.innerHTML,f.style.display="block",g.removeChild(t)}function h(){t()&&(x===C.ANIMATION_STATUS.INITIAL&&d(),x===C.ANIMATION_STATUS.SEQUENCE_COMPLETED&&u())}var p,m,f,v,g,b,y,S,w,I,C=this,T=[],P=["buyTheLook","recommendations","recentlyViewed"],x=C.ANIMATION_STATUS.INITIAL;this.isClickTargetHigherThanLowerContent=function(t){return t.getBoundingClientRect().top<g.getBoundingClientRect().top},this.subscribeToLoadingState=function(t){S=t,T.push(S.submodulesCompleted.buyTheLook.subscribe(r)),T.push(S.submodulesCompleted.recommendations.subscribe(r)),T.push(S.submodulesCompleted.recentlyViewed.subscribe(r)),T.push(S.submodulesCompleted.recentlyViewed.subscribe(o))},this.getAnimationTopPosition=function(){return t()?C.ANIMATION_TOP_POSITION.MOBILE:c(y)-l(m)+C.ANIMATION_TOP_POSITION.DESKTOP},this.animateUp=function(){a(),h(),x=C.ANIMATION_STATUS.MOVING_UP,I=m.getBoundingClientRect().height,w.style.display="none",m.style.maxHeight=I+"px",setTimeout(function(){m.style.maxHeight=C.getAnimationTopPosition()-C.GALLERY_MARGIN[t()?"MOBILE":"DESKTOP"]+"px",p.classList.add("animated-up"),setTimeout(function(){x=C.ANIMATION_STATUS.UP},C.ANIMATION_DURATION)},C.ANIMATION_TIMEOUT_DELAY)},this.animateDown=function(){a(),x=C.ANIMATION_STATUS.MOVING_DOWN,m.style.maxHeight=I+"px",p.classList.add("animating-down"),setTimeout(function(){m.removeAttribute("style"),p.classList.remove("animated-up"),p.classList.remove("animating-down"),x=C.ANIMATION_STATUS.SEQUENCE_COMPLETED,h()},C.ANIMATION_DURATION)}}var e=t.prototype;return e.ANIMATION_DURATION=2e3,e.DOM_CHECK_INTERVAL=250,e.ANIMATION_TOP_POSITION={MOBILE:190,DESKTOP:40},e.GALLERY_MARGIN={MOBILE:0,DESKTOP:30},e.ANIMATION_TIMEOUT_DELAY=20,e.ANIMATION_STATUS={INITIAL:0,MOVING_UP:1,UP:2,MOVING_DOWN:3,SEQUENCE_COMPLETED:4},new t}),define("text!Components/delivery-and-returns-content-table/delivery-and-returns-content-table.html",[],function(){return'<div class="delivery-options">\r\n    <!-- ko if : !isMobile-->\r\n    <hr />\r\n    <!-- ko foreach: content.deliveryGroups -->\r\n    <table>\r\n        <thead>\r\n        <tr class="delivery-and-returns-group-name">\r\n            <th scope="colgroup" colspan="3">\r\n                <h2 data-bind="text: name"></h2>\r\n            </th>\r\n        </tr>\r\n        <!-- ko if:$index()===0 -->\r\n        <tr class="delivery-and-returns-headings">\r\n            <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.type"></th>\r\n            <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.when"></th>\r\n            <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.howMuch"></th>\r\n        </tr>\r\n        <!-- /ko -->\r\n        </thead>\r\n        <tbody data-bind="foreach: options">\r\n        <tr>\r\n            <th scope="row" class="delivery-type" data-bind="html: type"></th>\r\n            <td class="delivery-when" data-bind="html: when"></td>\r\n            <td class="delivery-how-much" data-bind="with: $parents[1].formatHowMuch(howMuch)">\r\n                <span class="delivery-cost" data-bind="html: price"></span>\r\n                <span class="delivery-free-condition" data-bind="html: freeCondition"></span>\r\n                <span class="delivery-premier-qualifier" data-bind="html: premierQualifier"></span>\r\n            </td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n    <hr />\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if : isMobile-->\r\n    <!-- ko foreach: content.deliveryGroups -->\r\n    <table>\r\n        <thead>\r\n        <tr class="delivery-and-returns-group-name">\r\n            <th scope="colgroup" colspan="2">\r\n                <h2 data-bind="text: name"></h2>\r\n            </th>\r\n        </tr>\r\n        <!-- ko if:$index()===0 -->\r\n        <tr class="delivery-and-returns-headings">\r\n            <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.type"></th>\r\n            <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.howMuch"></th>\r\n        </tr>\r\n        <!-- /ko -->\r\n        </thead>\r\n        <tbody data-bind="foreach: options">\r\n        <tr>\r\n            <td>\r\n                <span class="delivery-type" data-bind="html: type"></span>\r\n                <span class="delivery-when" data-bind="html: when"></span>\r\n            </td>\r\n            <td class="delivery-how-much" data-bind="with: $parents[1].formatHowMuch(howMuch)">\r\n                <span class="delivery-cost" data-bind="html: price"></span>\r\n                <span class="delivery-free-condition" data-bind="html: freeCondition"></span>\r\n                <span class="delivery-premier-qualifier" data-bind="html: premierQualifier"></span>\r\n            </td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n    <hr />\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <span class="delivery-terms" data-bind="text: content.terms"></span>\r\n</div>'}),define("Components/delivery-and-returns-content-table/delivery-and-returns-content-table",["ko","text!./delivery-and-returns-content-table.html","PageConfig"],function(t,e,i){function n(t){this.content=t.data.content,this.isMobile="mobile"===i.platform,this.formatHowMuch=function(t){var e=t[0],i=null,n=null;return t.length>1&&(i=t[1],t.length>2&&(n=t[2])),{price:e,freeCondition:i,premierQualifier:n}}.bind(this)}return{viewModel:n,template:e}}),define("text!Components/delivery-and-returns-content-link/delivery-and-returns-content-link.html",[],function(){return'<div class="delivery-and-returns-content-link">\r\n    <p class="delivery-and-returns-link-title" data-bind="text: resources.DeliveryAndReturnsShippingMessageUsa"></p>\r\n    <p class="delivery-and-returns-link-message" data-bind="text: resources.DeliveryAndReturnsVisitExternalMessageUsa"></p>\r\n    <a class="button" href="#" data-bind="attr: {href: deliveryUrl}" target="_blank">\r\n        <span data-bind="text: resources.DeliveryAndReturnsVisitExternalLink"></span>\r\n        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">\r\n            <path fill="#FFFFFF" fill-rule="evenodd" d="M14 12h2V2H6v2h8v8zm0 2v4H0V4h4V0h14v14h-4zM4 6H2v10h10V6H4z"/>\r\n        </svg>\r\n    </a>\r\n</div>'}),define("Components/delivery-and-returns-content-link/delivery-and-returns-content-link",["ko","text!./delivery-and-returns-content-link.html","PageConfig"],function(t,e,i){function n(t){this.content=t.data.content,this.countryCode=t.data.countryCode,this.isMobile="mobile"===i.platform,this.resources=t.state.resources,this.deliveryUrl=i.siteDomain+this.resources.DeliveryUrl+"?country="+this.countryCode}return{viewModel:n,template:e}}),define("text!Components/shipping-restrictions-content/shipping-restrictions-content.html",[],function(){return'<div class="shipping-restrictions-content">\r\n    <div class="shipping-restriction-filter">\r\n        <label for="shippable-countries-input" data-bind="text: countryFilterLabel"></label> <input name="shippable-countries-input" type="text" data-bind="textInput: countryFilter" />\r\n    </div>\r\n    <div class="shippable-countries" data-bind="visible: shippableCountriesVisible">\r\n        <span class="shipping-restriction-description" data-bind="text: description"></span>\r\n        <ul data-bind="foreach:filteredShippableCountriesGroupOne">\r\n            <li>\r\n                <span data-bind="text: $data"></span>\r\n            </li>\r\n        </ul>\r\n        <ul data-bind="visible: shippableCountriesGroupTwoVisible, foreach:filteredShippableCountriesGroupTwo">\r\n            <li>\r\n                <span data-bind="text: $data"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="shipping-restrictions-no-matches" data-bind="visible: noMatchesVisible">\r\n        <span data-bind="text: noMatches"></span>\r\n    </div>\r\n</div>'}),define("Components/shipping-restrictions-content/shipping-restrictions-content",["ko","text!./shipping-restrictions-content.html"],function(t,e){function i(e){this.resources=e.state.resources,this.countryFilterLabel=this.resources.ShippingRestrictionsFilterLabel,this.noMatches=this.resources.ShippingRestrictionsNoMatches,this.description=e.data.Description,this.shippableCountries=t.observableArray(e.data.ShippableCountries),this.countryFilter=t.observable(""),this.filteredShippableCountries=t.computed(function(){return this.countryFilter||this.countryFilter()?t.utils.arrayFilter(this.shippableCountries(),function(t){return t.toLowerCase().indexOf(this.countryFilter().toLowerCase())>=0}.bind(this)):this.shippableCountries()}.bind(this)),this.filteredShippableCountriesGroupOne=t.computed(function(){if(this.filteredShippableCountries){var t=Math.ceil(this.filteredShippableCountries().length/2);return this.filteredShippableCountries().slice(0,t)}return[]}.bind(this)),this.filteredShippableCountriesGroupTwo=t.computed(function(){if(this.filteredShippableCountries){var t=Math.ceil(this.filteredShippableCountries().length/2);return this.filteredShippableCountries().slice(t)}return[]}.bind(this)),this.shippableCountriesVisible=t.computed(function(){return this.filteredShippableCountriesGroupOne&&this.filteredShippableCountriesGroupOne().length>0}.bind(this)),this.shippableCountriesGroupTwoVisible=t.computed(function(){return this.filteredShippableCountriesGroupTwo&&this.filteredShippableCountriesGroupTwo().length>0}.bind(this)),this.noMatchesVisible=t.computed(function(){return!this.shippableCountriesVisible()}.bind(this))}return{viewModel:i,template:e}}),define("text!Components/delivery-and-returns-content/delivery-and-returns-content.html",[],function(){return'\ufeff<div class="delivery-and-returns-content">\r\n    <div class="deliver-to">\r\n        <!-- ko if : !isMobile-->\r\n        <div class="current-country">\r\n            <span class="country-label" data-bind="text: content.destination.label"></span>\r\n            <span class="country-name dr-flag" data-bind="css: getCountryCode(), text: content.destination.selected.name"></span>\r\n        </div>\r\n        <div class="country-selection">\r\n            <div class="text-overlay"></div>\r\n            <button class="link" data-bind="click: countrySelectionClicked">\r\n                <span data-bind="text: content.destination.changeCountry"></span>\r\n            </button>\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko if : isMobile-->\r\n        <button class="link" data-bind="click: countrySelectionClicked">\r\n            <div class="current-country">\r\n                <span class="country-label" data-bind="text: content.destination.label"></span>\r\n                <span class="country-name dr-flag" data-bind="css: getCountryCode(), text: content.destination.selected.name"></span>\r\n            </div>\r\n            <div class="country-selection">\r\n                <div class="text-overlay"></div>\r\n                <span class="product-chevron" data-bind="text: content.destination.changeCountry"></span>\r\n            </div>\r\n        </button>\r\n        <!-- /ko -->\r\n    </div>\r\n\r\n    <!-- ko if: isUsa() -->\r\n    <div data-bind="component: { name: \'delivery-and-returns-content-link\', params: { data: { content: content, countryCode: getCountryCode() }, state: state } }"></div>\r\n    <!-- /ko -->\r\n\r\n    <!-- ko if: !isUsa() -->\r\n    <div data-bind="component: { name: \'delivery-and-returns-content-table\', params: { data: { content: content } } }"></div>\r\n    <!-- /ko -->\r\n\r\n    <!-- ko if: showPremier-->\r\n    <div class="premier-delivery">\r\n        <div class="premier-image">\r\n            <img data-bind="attr: { src: content.premier.image }" />\r\n        </div>\r\n        <div class="premier-text">\r\n            <h2 data-bind="text: content.premier.title"></h2>\r\n            <span data-bind="text: content.premier.text"></span>\r\n            <a class="premier-link" data-bind="text: content.premier.linkText, attr : {href: content.premier.link}" target="_blank"></a>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <div class="returns">\r\n        <div class="information-icon sprite product-information"></div>\r\n        <div class="information-text">\r\n            <h2 data-bind="text: content.returns.title"></h2>\r\n            <span data-bind="html: buildReturnsParagraph()"></span>\r\n        </div>\r\n    </div>\r\n</div>'}),define("Components/delivery-and-returns-content/delivery-and-returns-content",["ko","text!./delivery-and-returns-content.html","PageConfig"],function(t,e,i){function n(t){this.content=t.data.content,this.countrySelectedCallback=t.data.showCountrySelectionCallback,this.showPremier=null!==this.content.premier,this.isMobile="mobile"===i.platform,this.state=t.state,this.resources=this.state.resources,this.countrySelectionClicked=function(){this.countrySelectedCallback()},this.getCountryCode=function(){return this.content.destination.selected["2-iso"].toLowerCase()}.bind(this),this.isUsa=function(t){return"us"===this.getCountryCode(t)}.bind(this),this.getReturnRedirectLink=function(){return this.content.returns.link+"?country="+this.getCountryCode()}.bind(this),this.buildReturnsParagraph=function(){return this.resources.DeliveryAndReturnsReturnsPageMessage.replace("{link}",'<a href="'+this.getReturnRedirectLink()+'" target="_blank">').replace("{/link}",'</a><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#2D2D2D" fill-rule="evenodd" d="M14 12h2V2H6v2h8v8zm0 2v4H0V4h4V0h14v14h-4zM4 6H2v10h10V6H4z"/></svg>')}.bind(this)}return{viewModel:n,template:e}}),define("text!Components/delivery-and-returns-countries/delivery-and-returns-countries.html",[],function(){return'<div class="delivery-and-returns-countries">\r\n    <!-- ko if : !isMobile -->\r\n    <div class="current-country-cancel">\r\n        <div class="current-country">\r\n            <span class="country-label" data-bind="text: destination.label"></span>\r\n            <span class="country-name dr-flag" data-bind="css: getFlagCountryCode(destination.selected[\'2-iso\']), text: destination.selected.name"></span>\r\n        </div>\r\n        <div class="cancel-country-selection">\r\n            <div class="text-overlay"></div>\r\n            <button class="link" data-bind="click: cancelClicked"><span data-bind="text: cancelLabel"></span></button>\r\n        </div>\r\n    </div>\r\n    <hr />\r\n    <!-- /ko -->\r\n    <!-- ko if : isMobile-->\r\n    <div class="cancel-country-selection-container">\r\n        <div class="cancel-country-selection">\r\n            <button class="link" data-bind="click: cancelClicked"><span data-bind="text: cancelLabel"></span></button>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <div class="countries-filter">\r\n        <label for="countries-input" data-bind="text: countryFilterLabel"></label>\r\n        <div class="country-filter-input">\r\n            <input name="countries-input" type="text" data-bind="textInput: countryFilter" />\r\n            <button class="link" data-bind="visible: clearButtonVisible, text: clearCountryFilterLabel, click: clearCountryFilter"></button>\r\n        </div>\r\n    </div>\r\n    <div class="matching-countries" data-bind="visible: countriesVisible">\r\n        <ul data-bind="foreach: filteredCountries">\r\n            <li>\r\n                <button class="link dr-flag" data-bind="css: $parent.getFlagCountryCode(Code), text: Name, click: $parent.countryClicked.bind($data)"></button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="no-matches" data-bind="visible: noMatchesVisible">\r\n        <span data-bind="text: noMatches"></span>\r\n    </div>\r\n</div>';
}),define("Components/delivery-and-returns-countries/delivery-and-returns-countries",["ko","text!./delivery-and-returns-countries.html","PageConfig"],function(t,e,i){function n(e){this.isMobile="mobile"===i.platform,this.resources=e.state.resources,this.countrySelectedCallback=e.data.countrySelectionCallback,this.cancelCallback=e.data.cancelCallback,this.cancelLabel=this.resources.DeliveryAndReturnsCountriesCancelLabel,this.clearCountryFilterLabel=this.resources.DeliveryAndReturnsCountriesClearLabel,this.countryFilterLabel=this.resources.DeliveryAndReturnsCountriesFilterLabel,this.noMatches=this.resources.DeliveryAndReturnsCountriesNoMatches;var n=e.data.content;n.sort(function(t,e){var i=t.Name,n=e.Name;return n>i?-1:i>n?1:0}),this.countries=t.observableArray(n),this.destination=e.data.currentDestination,this.countryFilter=t.observable(""),this.clearButtonVisible=t.computed(function(){return this.countryFilter().length>0}.bind(this)),this.getFlagCountryCode=function(t){return t.toLowerCase()}.bind(this),this.countryClicked=function(t){this.countrySelectedCallback(t.Code)}.bind(this),this.cancelClicked=function(){this.cancelCallback()}.bind(this),this.clearCountryFilter=function(){this.countryFilter("")}.bind(this),this.filteredCountries=t.computed(function(){return this.countryFilter||this.countryFilter()?t.utils.arrayFilter(this.countries(),function(t){return t.Name.toLowerCase().indexOf(this.countryFilter().toLowerCase())>=0}.bind(this)):this.countries()}.bind(this)),this.countriesVisible=t.computed(function(){return this.filteredCountries().length>0}.bind(this)),this.noMatchesVisible=t.computed(function(){return!this.countriesVisible()}.bind(this))}return{viewModel:n,template:e}}),define("text!Components/error-container/error-container.html",[],function(){return'<div class="error-container">\r\n    <span class="product-information">Info</span>\r\n    <span class="error" data-bind="html: error"></span>\r\n</div>'}),define("Components/error-container/error-container",["ko","text!./error-container.html"],function(t,e){function i(t){this.error=t.data.content}return{viewModel:i,template:e}}),define("Components/product-details/product-details",["ko","ProductUtils/Analytics","$","ProductUtils/debouncer"],function(t,e,i,n){function s(s){this.isOpen=t.observable(!1),this.id=void 0!==s.data?s.data.id:null,this.containerHeight=t.observable(),this.$overflowContainer=i(".overflow-container"),this.setupDetailsContainer=function(){this.productDetailsMaxHeightOpen=this.$overflowContainer[0].scrollHeight+"px"},this.setupDetailsContainer(),this.toggle=function(){this.isOpen()?this.close():this.open()},this.open=function(){e.fireEvent("pageInteraction",{context:"showMore",productIID:this.id}),this.containerHeight(this.productDetailsMaxHeightOpen),this.isOpen(!0)},this.close=function(){e.fireEvent("pageInteraction",{context:"showLess",productIID:this.id}),this.containerHeight(null),this.isOpen(!1)},window.addEventListener("resize",n.debounce(this.setupDetailsContainer.bind(this),200))}return{viewModel:s}}),define("ProductUtils/OnElementInView",["$","ko"],function(t,e){return this.currentlyInView=null,this.target=null,this.sourceElement=null,this.callback=null,this.timer=null,this.cumulativeOffset=function(t){var e=0,i=0;do e+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);return{top:e,left:i}},this.checkScrollPosition=function(){var e=!1,i=t(this.sourceElement).outerHeight()+this.target.outerHeight()/2,n=window.innerHeight,s=this.cumulativeOffset(this.target[0]).top+i;(document.body.scrollTop+n>s||document.documentElement.scrollTop+n>s)&&(e=!0),(null===this.currentlyInView||e!==this.currentlyInView)&&(this.currentlyInView=e,this.callback({isInView:e}))},this.onScroll=function(){this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.checkScrollPosition.bind(this),100)},e.bindingHandlers.onElementInView={update:function(i,n){var s=n(),r=e.unwrap(s);this.target=t(r.targetSelector),this.sourceElement=i,this.callback=r.callback;var o=r.enabled;o?(this.checkScrollPosition(),window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onScroll,!1)):(window.removeEventListener("scroll",this.onScroll,!1),window.removeEventListener("resize",this.onScroll,!1))}},this}),define("ProductUtils/Performance",["ko"],function(t){t.bindingHandlers.markAndMeasure={init:function(e,i){var n=t.unwrap(i());window.asos.performance.markAndMeasure(n)}}}),define("Pages/FullProduct",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","Models/VariantDecorator","Utils","Components/product-image/product-image","Components/product-price/product-price","Components/social-share/social-share","Components/content/content","Components/out-of-stock/out-of-stock","Components/size-guide/size-guide","Components/recently-viewed/recently-viewed","Components/might-like/might-like","Components/buy-the-look/buy-the-look","Components/product-gallery/product-gallery","Components/product-colour/product-colour","Components/product-size/product-size","Components/delivery-and-returns/delivery-and-returns","Components/shipping-restrictions/shipping-restrictions","Components/stock-price-retry/stock-price-retry","Components/save-button/save-button","Components/add-item/add-item","Components/afterpay/afterpay","ProductUtils/UrlUtils","ProductUtils/Analytics","Components/fit-analytics/fit-analytics","Components/toast/toast","PageConfig","ProductUtils/OutOfStockAnimator","ProductUtils/NewRelicLogger","Components/delivery-and-returns-content-table/delivery-and-returns-content-table","Components/delivery-and-returns-content-link/delivery-and-returns-content-link","Components/shipping-restrictions-content/shipping-restrictions-content","Components/delivery-and-returns-content/delivery-and-returns-content","Components/delivery-and-returns-countries/delivery-and-returns-countries","Components/error-container/error-container","Components/product-gallery/product-gallery","Components/product-details/product-details","ProductUtils/ScrollTo","ProductUtils/OnElementInView","ProductUtils/Performance"],function(t,e,i,n,s,r,o,a,l,c,d,u,h,p,m,f,v,g,b,y,S,w,I,C,T,P,x,A,k,E,M,z,L){return this.init=function(c,D,_){function R(){if(!G){var e=function n(){return F.getStockPrice(V,function(t){H.productData=(new s).getData(t,!t.isInStock),window.asos.performance.markAndMeasure("pdp:stock_api_returned"),O.register({type:"content",name:"content1",elementId:"aside-content",useComponentTemplate:!1},t,H),O.register({type:"content",name:"content2",elementId:"lower-content",useComponentTemplate:!1},t,H),P.fireProductLoadEvent(t),H.showStockPriceRetry(!1),H.productData.isInStock||E.subscribeToLoadingState(H,t)}.bind(this),function(t){404!==t.status||V.price&&V.price.currency?H.showStockPriceRetry(!0):(H.showStockPriceRetry(!1),H.productData={isInStock:!1},O.register({type:"content",name:"aside-content-oos",elementId:"aside-content-oos",useComponentTemplate:!1},V,this.state))}),n}();this.state.retryCallback=e,O.register({type:"content",name:"aside-content-retry",elementId:"aside-content-retry",useComponentTemplate:!1},V,this.state),O.register({type:"product-details",name:"product-details",elementId:"product-details",useComponentTemplate:!1},V,this.state),O.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},V,this.state),t.components.register("product-gallery",f),t.components.register("size-guide",u),t.components.register("product-image",o),t.components.register("shipping-restrictions",y),t.components.register("product-price",a),t.components.register("out-of-stock",d),t.components.register("might-like",p),t.components.register("social-share",l),t.components.register("buy-the-look",m),t.components.register("stock-price-retry",S),t.components.register("product-colour",v),t.components.register("product-size",g),t.components.register("delivery-and-returns",b),t.components.register("delivery-and-returns-content-table",z),t.components.register("delivery-and-returns-content-link",L),t.components.register("recently-viewed",h),t.components.register("asos-video-player-prod",i.videoPlayer),t.components.register("asos-spin-viewer-prod",i.spinViewer),t.components.register("save-button",w),t.components.register("add-item",I),t.components.register("fit-analytics",x),t.components.register("toast",A),t.components.register("afterpay",C),G=!0}}M.init(M.PAGE_TYPE.PRD);var V="string"==typeof c?JSON.parse(c):c,F=new n,O=new e,U=r.QueryString.getValue("clr");V||M.logError(new Error(M.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"});var N=new T,B=N.getVariantFromUrl(window.location.href,V.variants),$=B?B.colour.toLowerCase().trim():null;this.state={selectedColour:t.observable(),selectedSize:t.observable(),showNoColourSelectedWarning:t.observable(!1),showNoSizeSelectedWarning:t.observable(!1),showAddToBagError:t.observable(!1),addToBagErrorMessage:t.observable(""),resources:D,features:_,defaultColour:U?decodeURIComponent(U).toLowerCase().trim():$,gender:V.gender,isInStock:t.observable(!0),showStockPriceRetry:t.observable(!1),defaultVariant:B,showSizeGuide:t.observable(!1),fitAnalyticsViewModel:t.observable(),sellingFast:V.sellingFast,afterpay:V.afterpay?V.afterpay[k.currency.toLowerCase()]:void 0,displayPrice:t.observable(0),CAROUSEL_LOADING_STATE:{NOT_LOADED:0,NO_DATA:1,HAS_DATA:2},submodulesCompleted:{buyTheLook:t.observable(0),recommendations:t.observable(0),recentlyViewed:t.observable(0)},toast:{displayMessage:t.observable(!1),message:t.observable()}},this.isMobile="mobile"===k.platform;var G=!1;document.addEventListener("DOMContentLoaded",function(){R.call(this)}.bind(this)),document.getElementById("aside-content")&&document.getElementById("lower-content")&&document.getElementById("product-details")&&document.getElementById("gallery-content")&&R.call(this);var H=this.state},this.init}),define("text!Components/mix-and-match/mix-and-match.html",[],function(){return'<div class="product-hero">\r\n    <div data-bind=\'component: { name: "delivery-and-returns", params: {state: state, hideDeliveryLink: false}}\'></div>\r\n    <!-- ko if: isMobile -->\r\n    <div class="separator"></div>\r\n    <!-- /ko -->\r\n</div>\r\n\r\n<ul>\r\n    <!-- ko foreach: products -->\r\n    <li class="item">\r\n        <a data-bind="click: $parent.isMobile ? $parent.navigateToFullProduct.bind($data, $index()) : $parent.showOverlay.bind($data, $index(), $element)">\r\n            <div class="product-image" data-bind=\'component: { name: "product-image", params: {imgUrl: productImage.url+"?$S$&wid=75&fit=constrain"} }\'></div>\r\n        </a>\r\n        <div class="product-info">\r\n            <!--Product title-->\r\n            <a data-bind="click: $parent.isMobile ? $parent.navigateToFullProduct.bind($data, $index()) : $parent.showOverlay.bind($data, $index(), $element)">\r\n                <div class="product-title" data-bind=\'text: name\'></div>\r\n                <div class="product-price" data-bind=\'component: { name: "product-price", params: {state: $parent.getState($index()), hideDeliveryLink: true, showGermanVatMessage: $parent.options.showGermanVatMessage }}\'></div>\r\n            </a>\r\n\r\n            <!-- ko if: $parent.isMobile && state.afterpay -->\r\n            <div class="afterpay mix-and-match-mobile" data-bind=\'component: { name: "afterpay", params: { state: state, data: { price: ko.observable($parent.getState($index()).productData.minPrice.value) } } }\'></div>\r\n            <!-- /ko -->\r\n\r\n            <!-- ko if: $parent.isMobile -->\r\n            <a data-bind="click: $parent.showOverlay.bind($data, $index(), $element)">\r\n                <div class="product-information"></div>\r\n            </a>\r\n            <!-- /ko -->\r\n            <!-- ko if: $parent.isOutOfStock($index()) -->\r\n            <span class="out-of-stock" data-bind="text: $parent.state.resources.OutOfStockMixAndMatch"></span>\r\n            <!-- /ko -->\r\n            <!-- ko if: !$parent.isOutOfStock($index()) -->\r\n            <div class="product-colour" data-bind=\'component:{\r\n                name: "product-colour",\r\n                params: {\r\n                    hideLabels: false,\r\n                    useShortSelectColourLabel: true,state: $parent.getState($index()),\r\n                    data: $data}\r\n                }\'></div>\r\n            <!-- /ko -->\r\n\r\n        </div>\r\n        <!-- ko if: !$parent.isOutOfStock($index()) -->\r\n        <div data-bind=\'component:{\r\n            name: "product-size",\r\n            params: {\r\n                hideLabels: false,\r\n                hideLowInStock: false,\r\n                hideOnOutOfStock: true,\r\n                showSizeGuide: true,\r\n                doNotSelectDefaultSize: !$parent.isMobile,\r\n                displayOnlyAsDropDown: !$parent.isMobile,\r\n                state: $parent.getState($index()),\r\n                data: $data}\r\n            }\'></div>\r\n        <!-- ko if: $parent.isMobile -->\r\n        <div id="mix-and-match-add-item" data-bind=\'component:{name: "add-item",\r\n                     params:{\r\n                         state: $parent.getState($index())\r\n                     }}\'></div>\r\n\r\n        <div id="mix-and-match-save-button" data-bind=\'component:{name: "save-button",\r\n                     params:{\r\n                         variants: variants,\r\n                         state: [$parent.getState($index())],\r\n                         isMixMatch : true\r\n                     }}\'></div>\r\n        <div class="basic-error-box" data-bind="visible: $parent.getState($index()).showAddToBagError, html: $parent.getState($index()).addToBagErrorMessage" style="display:none">\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n        <!-- ko if: $parent.isMobile -->\r\n        <div class="separator"></div>\r\n        <!-- /ko -->\r\n\r\n    </li>\r\n    <!-- /ko -->\r\n    <!-- ko if: !isMobile -->\r\n    <li class="item">\r\n        <div class="separator end-of-products"></div>\r\n    </li>\r\n    <li class="total-price-item">\r\n        <div data-bind=\'component: { name: "total-price", params: { variants: variants, state: getState(0), afterpay: state.afterpay } }\'></div>\r\n    </li>\r\n    <li class="item" data-bind="visible : showNoSizesSelectedWarning">\r\n        <div class="error-message" data-bind="html: state.resources.SelectSizePromptMixAndMatch"></div>\r\n    </li>\r\n    <li class="item" data-bind="visible : showAddToBagError">\r\n        <div class="error-message" data-bind="html: addToBagErrorMessage"></div>\r\n    </li>\r\n    <li class="item">\r\n        <div id="mix-and-match-add-items" data-bind=\'component:{name: "add-items",\r\n                     params:{\r\n                         variants: variants,\r\n                         state: state,\r\n                         initiator : "main"\r\n                     }}\'></div>\r\n        <div id="mix-and-match-save-button" data-bind=\'component:{name: "save-button",\r\n                     params:{\r\n                         variants: variants,\r\n                         state: context.States,\r\n                         isMixMatch : true\r\n                     }}\'></div>\r\n    </li>\r\n    <!-- /ko -->\r\n</ul>'}),define("Components/mix-and-match/mix-and-match",["ko","text!./mix-and-match.html","ProductUtils/ModalWindow","ProductUtils/Analytics","PageConfig"],function(t,e,i,n,s){function r(t){this.context=t.data,this.products=t.data.products,this.state=t.state,this.options=t.options,this.isMobile="mobile"===s.platform,this.showNoSizesSelectedWarning=t.state.showNoSizesSelectedWarning,this.showAddToBagError=t.state.showAddToBagError,this.addToBagErrorMessage=this.state.addToBagErrorMessage,this.variants=[];for(var e=this.products.length;e--;)this.variants.push(this.context.States[e].selectedSize);this.getState=function(t){return this.context.States[t]}.bind(this),this.isOutOfStock=function(t){return!this.getState(t).productData.isInStock}.bind(this),this.showOverlay=function(e,s){n.fireEvent("modalAction",{context:"openModal",modalType:"mixAndMatch",productIID:this.products[e].id});var r=new i;this.isMobile&&r.setTitle(this.state.resources.ProductInformation),r.addComponent("mix-and-match-product",{productId:this.products[e].id,playerParams:t.playerParams},this.state),r.setClass("mix-and-match-overlay"),r.open({showSpinner:!0,openerElement:s})}.bind(this),this.navigateToFullProduct=function(t){var e=s.siteDomain+"/prd/"+this.products[t].id+this.getQueryString();this.navigateTo(e)}.bind(this),this.navigateTo=function(t){window.location=t},this.getQueryString=function(){return document.location.search}}return{viewModel:r,template:e}}),define("text!Components/total-price/total-price.html",[],function(){return'<h4 class="number-of-items" data-bind="text: selectedItemsText"></h4><h4 class="total-price" data-bind="text: totalPrice"></h4>\r\n<!-- ko if : state.afterpay -->\r\n<div class="afterpay mix-and-match-desktop" data-bind=\'component: { name: "afterpay", params: { state: state, data: { price: totalPriceValue } } }\'></div>\r\n<!-- /ko -->'}),define("Components/total-price/total-price",["ko","text!./total-price.html","Asos.Web.Currency.Formatter","PageConfig"],function(t,e,i,n){function s(e){var s=e.variants;this.state=e.state,this.state.afterpay=e.afterpay,this.selectedItemsText=t.observable(""),this.totalPriceValue=t.observable(0),this.totalPrice=t.computed(function(){for(var t=s.length,r=0,o=0;t--;){var a=s[t]();a&&(r+=a.price.current.value,o++)}return this.totalPriceValue(r),this.selectedItemsText(e.state.resources.ItemsSelectedFormat.replace("{0}",o)),i.formatPrice(this.totalPriceValue().toFixed(2),n.language,n.currency)}.bind(this))}return{viewModel:s,template:e}}),define("text!Components/mix-and-match-product/mix-and-match-product.html",[],function(){return'<!-- ko if: product() != undefined -->\r\n\r\n<div>\r\n\r\n    <section>\r\n        <div class="layout-width">\r\n            <!-- ko if: !isMobile -->\r\n            <div id="gallery-content" data-bind="visible: !isMobile">\r\n                <div class="product-gallery" data-bind=\'component: { name: "product-gallery", params: {state: state,  data: { rootElement: $element, id: product().id, images: product().media.images, map: {}, defaultColour: product().defaultColour, media: product().media, playerParams: playerParams  }}}\'></div>\r\n            </div>\r\n            <!-- /ko -->\r\n\r\n            <div class="layout-aside" id="aside-content">\r\n                <!-- ko if: !state.productData.isInStock -->\r\n                    <h3 class="product-out-of-stock-label" data-bind="text: state.resources.OutOfStockMixAndMatch"></h3>\r\n                <!-- /ko -->\r\n                <!-- ko if: !isMobile -->\r\n                <h1 class="product-hero" data-bind="text: product().name"></h1>\r\n                <div class="product-price" id="product-price" data-bind=\'component: { name: "product-price", params: {state: state}}\'></div>\r\n                <div id="product-colour" data-bind=\'component:{\r\n                            name: "product-colour",\r\n                            params: {\r\n                                hideLabels: false,\r\n                                useShortSelectColourLabel: false,\r\n                                state: state,\r\n                                data: product(),\r\n                                hideOnOutOfStock : true}\r\n                            }\'></div>\r\n                <!-- /ko -->\r\n\r\n                <!-- ko if: state.productData.isInStock -->\r\n                <div class="product-details" id="product-details">\r\n                    <div class="product-description" data-bind="visible: info().productDetailsVisible">\r\n                        <h4 data-bind="text: state.resources.ProductDescriptionTitle"></h4>\r\n                        <span data-bind="html: info().productDetails"></span>\r\n                    </div>\r\n                    <div class="product-description" data-bind="visible: info().sizeAndFitVisible">\r\n                        <h4 data-bind="text: state.resources.SizeAndFitTitle"></h4>\r\n                        <span data-bind="html: info().sizeAndFit"></span>\r\n                    </div>\r\n                    <div class="product-description" data-bind="visible: info().careInfoVisible">\r\n                        <h4 data-bind="text: state.resources.CareInfoTitle"></h4>\r\n                        <span data-bind="html: info().careInfo"></span>\r\n                    </div>\r\n                    <div class="product-description" data-bind="visible: info().aboutMeVisible">\r\n                        <h4 data-bind="text: state.resources.AboutMeTitle"></h4>\r\n                        <span data-bind="html: info().aboutMe"></span>\r\n                    </div>\r\n                    <div class="product-description" data-bind="visible: info().brandDescriptionVisible">\r\n                        <h4 data-bind="text: state.resources.BrandDescriptionTitle"></h4>\r\n                        <span data-bind="html: info().brandDescription"></span>\r\n                    </div>\r\n                    <div class="product-description">\r\n                        <h4 data-bind="text: state.resources.ProductCode"></h4>\r\n                        <span data-bind="html: info().productCode"></span>\r\n                    </div>\r\n                </div>\r\n                <!-- /ko -->\r\n                <!-- ko if: !state.productData.isInStock -->\r\n                    <p class="product-code">\r\n                        <span class="label" data-bind="text: state.resources.ProductCode"></span>\r\n                        <span data-bind="text:info().productCode"></span>\r\n                    </p>\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\n    <a class="product-page-button" data-bind="attr: { href: productLink}, text: state.resources.GoToFullProduct"></a>\r\n</div>\r\n\r\n<!-- /ko  -->\r\n'}),define("Models/ProductDescription",[],function(){function t(){this.productDetails="",this.productDetailsVisible=!1,this.sizeAndFit="",this.sizeAndFitVisible=!1,this.careInfo="",this.careInfoVisible=!1,this.aboutMe="",this.aboutMeVisible=!1,this.brandDescription="",this.brandDescriptionVisible=!1,this.productCode=""}return function(){this.getProductDescriptionViewModel=function(e){var i=new t;e.description&&(i.productDetails=e.description,i.productDetailsVisible=!0);var n=e.info;return n&&(n.sizeAndFit&&(i.sizeAndFit=n.sizeAndFit,i.sizeAndFitVisible=!0),n.careInfo&&(i.careInfo=n.careInfo,i.careInfoVisible=!0),n.aboutMe&&(i.aboutMe=n.aboutMe,i.aboutMeVisible=!0)),e.brand&&e.brand.description&&(i.brandDescription=e.brand.description,i.brandDescriptionVisible=!0),i.productCode=e.productCode,i}}}),define("Components/mix-and-match-product/mix-and-match-product",["ko","text!./mix-and-match-product.html","ProductUtils/FullProductApiClient","Models/VariantDecorator","Models/ProductDescription","$","PageConfig"],function(t,e,i,n,s,r,o){function a(e){var r=new i;this.product=t.observable(),this.info=t.observable(),this.isMobile="mobile"===o.platform,this.playerParams=e.data.playerParams,this.dataReceived=e.data.loadedCallback,this.productLink=t.observable(),this.state={selectedColour:t.observable(),selectedSize:t.observable(),showNoColourSelectedWarning:t.observable(!1),showNoSizeSelectedWarning:t.observable(!1),resources:e.state.resources},r.getFullProduct(e.data.productId,!1,"MixAndMatch").done(function(t){this.state.productData=(new n).getData(t,!0);var e=new s;this.info(e.getProductDescriptionViewModel(t)),this.product(t),this.productLink(o.siteDomain+"/prd/"+t.id),this.dataReceived()}.bind(this))}return{viewModel:a,template:e}}),define("text!Components/add-items/add-items.html",[],function(){return'<div class="add-items">\r\n    <div class="is-add-items-saving" data-bind="visible: isBusy"></div>\r\n    <span class="aria-live" aria-live="polite" aria-role="status" data-bind="{ text: ariaLiveText, attr: { \'aria-label\': ariaLiveText }}"></span>\r\n    <a href="#" class="add-button" data-bind="click: addToBag, css : { \'is-disabled\' : isBusy }, attr: { \'aria-label\': resources.AddToBag }, markAndMeasure: \'pdp:add_to_bag_interactive\'">\r\n        <span class="product-tick" data-bind="visible: addedToBag, text: iconText"></span>\r\n        <span data-bind="text: buttonText"></span>\r\n    </a>\r\n</div>'}),define("Components/add-items/add-items",["ko","text!./add-items.html","ProductUtils/Bag","ProductUtils/ScrollTo","$"],function(t,e,i,n,s){function r(e){this.variants=e.variants,this.resources=e.state.resources,this.addedToBag=t.observable(!1),this.topOfPage=s("#top-of-page"),this.showNoSizesSelectedWarning=e.state.showNoSizesSelectedWarning,this.showAddToBagError=e.state.showAddToBagError,this.addToBagErrorMessage=e.state.addToBagErrorMessage,this.moreThanOneProductSelected=t.observable(!1),this.buttonText=t.observable(""),this.isBusy=t.observable(!1),this.ariaLiveText=t.computed(function(){var t=this.addToBagErrorMessage();return t?t:this.addedToBag()?this.resources.AddToBagSuccess:""},this),this.iconText=t.computed(function(){return this.addedToBag()?"added to basket":"add to basket"}.bind(this)),this.setButtonTextAdd=function(){this.moreThanOneProductSelected()?this.buttonText(this.resources.AddItemsToBagMixAndMatch):this.buttonText(this.resources.AddItemToBagMixAndMatch)}.bind(this),this.setButtonTextAdded=function(){this.moreThanOneProductSelected()?this.buttonText(this.resources.AddItemsToBagMixAndMatchSuccess):this.buttonText(this.resources.AddItemToBagMixAndMatchSuccess)}.bind(this),this.selectedVariants=t.computed(function(){for(var t=this.variants.length,e=[];t--;){var i=this.variants[t]();i&&e.push(i)}return this.showNoSizesSelectedWarning(!1),this.moreThanOneProductSelected(e.length>1),this.setButtonTextAdd(),this.addedToBag(!1),e}.bind(this));var r=new i(e,e.initiator);this.addToBag=function(){return this.isBusy()?!1:(this.revertState(),void(0===this.selectedVariants().length?this.showNoSizesSelectedWarning(!0):(this.isBusy(!0),r.addItems(this.selectedVariants(),this.addToBagResult))))}.bind(this);var o;this.addToBagResult=function(t){this.isBusy(!1),this.addedToBag(t.success),t.success?(this.setButtonTextAdded(),n.scrollToElement(this.topOfPage),o&&window.clearTimeout(o),o=setTimeout(this.revertState,5e3)):(this.showAddToBagError(!0),this.addToBagErrorMessage(t.error))}.bind(this),this.revertState=function(){this.setButtonTextAdd(),this.addedToBag(!1),this.showAddToBagError(!1),this.addToBagErrorMessage(""),this.isBusy(!1)}.bind(this)}return{viewModel:r,template:e}}),define("Pages/MixAndMatch",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","Models/VariantDecorator","Utils","Components/product-image/product-image","Components/product-price/product-price","Components/add-item/add-item","Components/afterpay/afterpay","Components/social-share/social-share","Components/content/content","Components/out-of-stock/out-of-stock","Components/size-guide/size-guide","Components/recently-viewed/recently-viewed","Components/might-like/might-like","Components/buy-the-look/buy-the-look","Components/mix-and-match/mix-and-match","Components/product-gallery/product-gallery","Components/product-colour/product-colour","Components/product-size/product-size","Components/total-price/total-price","Components/delivery-and-returns/delivery-and-returns","Components/stock-price-retry/stock-price-retry","Components/mix-and-match-product/mix-and-match-product","Components/save-button/save-button","Components/add-items/add-items","Components/add-item/add-item","ProductUtils/Analytics","Components/toast/toast","PageConfig","ProductUtils/NewRelicLogger","Components/product-details/product-details","ProductUtils/ScrollTo","ProductUtils/Performance"],function(t,e,i,n,s,r,o,a,l,c,d,u,h,p,m,f,v,g,b,y,S,w,I,C,T,P,x,A,k,E,M,z){return this.init=function(l,u,f){function v(){if(!V){var e=function n(){return _.getStockPrice(D,function(e){k.fireMixMatchLoadEvent(e);for(var i=0;i<e.products.length;i++){var n={selectedColour:t.observable(),selectedSize:t.observable(),showNoColourSelectedWarning:t.observable(!1),showNoSizeSelectedWarning:t.observable(!1),showAddToBagError:t.observable(!1),addToBagErrorMessage:t.observable(""),productImage:e.products[i].productImage.url,resources:u,features:f,session:T.session};n.productData=(new s).getData(e.products[i],!0),R.push(n)}D.colourImageMap={},D.localisedColourImageMap={},D.defaultColour="",D.States=R,L.register({type:"content",name:"content1",elementId:"aside-content",useComponentTemplate:!1},D,T),L.register({type:"content",name:"content2",elementId:"lower-content",useComponentTemplate:!1},D,T),T.showStockPriceRetry(!1)}.bind(this),function(t){404===t.status?(T.showStockPriceRetry(!1),T.productData={isInStock:!1},D.categories=[],L.register({type:"content",name:"aside-content-oos",elementId:"aside-content-oos",useComponentTemplate:!1},D,T)):T.showStockPriceRetry(!0)}),n}();this.state.retryCallback=e,L.register({type:"content",name:"aside-content-retry",elementId:"aside-content-retry",useComponentTemplate:!1},D,this.state),L.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},D,this.state),t.components.register("out-of-stock",h),t.components.register("stock-price-retry",C),t.components.register("product-gallery",b),t.components.register("size-guide",p),t.components.register("product-image",o),t.components.register("product-colour",y),t.components.register("product-size",S),t.components.register("product-price",a),t.components.register("social-share",d),t.components.register("mix-and-match",g),t.components.register("recently-viewed",m),t.components.register("total-price",w),t.components.register("delivery-and-returns",I),t.components.register("asos-video-player-prod",i.videoPlayer),t.components.register("asos-spin-viewer-prod",i.spinViewer),t.components.register("save-button",P),t.components.register("add-items",x),t.components.register("add-item",A),t.components.register("toast",E),t.components.register("afterpay",c),V=!0}}z.init(z.PAGE_TYPE.GRP),this.state={resources:u,features:f,selectedColour:t.observable(),showNoSizesSelectedWarning:t.observable(!1),showAddToBagError:t.observable(!1),addToBagErrorMessage:t.observable(""),showStockPriceRetry:t.observable(!1),toast:{displayMessage:t.observable(!1),message:t.observable()},CAROUSEL_LOADING_STATE:{NOT_LOADED:0,NO_DATA:1,HAS_DATA:2},submodulesCompleted:{buyTheLook:t.observable(0),recommendations:t.observable(0),recentlyViewed:t.observable(0)}},this.useProductIdForVideos=!0;var T=this.state,L=new e,D="string"==typeof l?JSON.parse(l):l;T.afterpay=D.afterpay?D.afterpay[M.currency.toLowerCase()]:void 0,D||z.logError(new Error(z.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"});var _=new n,R=[];D.defaultProductId=parseInt(r.QueryString.getValue("iid")||0);var V=!1;document.addEventListener("DOMContentLoaded",function(){v.call(this)}.bind(this)),document.getElementById("aside-content")&&document.getElementById("lower-content")&&document.getElementById("gallery-content")&&v.call(this)},this.init}),define("main",["Pages/FullProduct","Pages/MixAndMatch"],function(){});
//# sourceMappingURL=Asos.Product.Page.Web.js.map